/**
 * vastRemainingTimePlugin - v1.0.0 - 13:35:15 11-05-2018
 * Author: TuanLDT
 */

!function(){var e=void 0;!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],r):r(t.Kenh14PlayerCore,t.React)}(this,function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="default"in e?e.default:e;t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=a.getSkinComponent("component"),l=a.getSkinComponent("remainingTime"),p=a.getSkinComponent("progressControl"),u=e.playerconfig.DEFAULT,c=function(e){function a(e){r(this,a);var o=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return o.state={isShow:!1,children:[t.createElement(l,{key:"remainingTime",player:o.props.player}),t.createElement(p,{key:"pregressControl",player:o.props.player,ref:function(e){o.progressControl=e}})]},o._handleVastStart=o._handleVastStart.bind(o),o._handleAdEnd=o._handleAdEnd.bind(o),o}return o(a,s),i(a,[{key:"componentDidMount",value:function(){var e=this.props.player;e.on(u.EVENT.VAST_AD_START,this._handleVastStart),e.on(u.EVENT.AD_END,this._handleAdEnd)}},{key:"componentWillUnmount",value:function(){var e=this.props.player;e.off(u.EVENT.VAST_AD_START,this._handleVastStart),e.off(u.EVENT.AD_END,this._handleAdEnd),clearTimeout(this.tryStartTimeout_)}},{key:"_registerUpdateProgress",value:function(){var e=this,t=this.props.player;try{var r=this.progressControl.progressSlider.playProgress;t.on("timeupdate",r.handleTimeUpdate)}catch(t){this.tryStartTimeout_=setTimeout(function(){e._registerUpdateProgress()},100)}}},{key:"_deregisterUpdateProgress",value:function(){var e=this.props.player;try{var t=this.progressControl.progressSlider.playProgress;e.off("timeupdate",t.handleTimeUpdate)}catch(e){}}},{key:"_handleVastStart",value:function(){this._registerUpdateProgress(),this.setState({isShow:!0})}},{key:"_handleAdEnd",value:function(){this._deregisterUpdateProgress(),this.setState({isShow:!1})}},{key:"renderEl",value:function(){return this.state.isShow?t.createElement("div",{className:"vast-remaining"},t.createElement("div",{className:"vast-remaining-title"},t.createElement("span",null,"Quảng cáo "))):null}}]),a}();c.propTypes={player:e.PropTypes.object.isRequired};a.registerPlugin("vastRemainingTimePlugin",function(){var e=this;e.one("ready",function(){var r=t.createElement(c,{key:"VastRemainingTime",player:e});e.container.controlBar.addChild(r)})})})}();/**
 * guidePlugin - v1.0.0 - 18:40:07 29-07-2019
 * Author: cuongtt
 */

!function(){var t=void 0;!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof t&&t.amd?t(["playercore","react"],n):n(e.Kenh14PlayerCore,e.React)}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}var o="default"in t?t.default:t,i="default"in e?e.default:e,u=r(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),c=r(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),a=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},f=function(t,e,n){if(a(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},l=function(t){return"object"==typeof t?null!==t:"function"==typeof t},s=function(t){if(!l(t))throw TypeError(t+" is not an object!");return t},p=function(t){try{return!!t()}catch(t){return!0}},y=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d=u.document,h=l(d)&&l(d.createElement),v=function(t){return h?d.createElement(t):{}},b=!y&&!p(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a}),m=function(t,e){if(!l(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!l(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},_=Object.defineProperty,g={f:y?Object.defineProperty:function(t,e,n){if(s(t),e=m(e,!0),s(n),b)try{return _(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},O=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=y?function(t,e,n){return g.f(t,e,O(1,n))}:function(t,e,n){return t[e]=n,t},w={}.hasOwnProperty,j=function(t,e){return w.call(t,e)},P=function(t,e,n){var r,o,i,a=t&P.F,l=t&P.G,s=t&P.S,p=t&P.P,y=t&P.B,d=t&P.W,h=l?c:c[e]||(c[e]={}),v=h.prototype,b=l?u:s?u[e]:(u[e]||{}).prototype;l&&(n=e);for(r in n)(o=!a&&b&&void 0!==b[r])&&j(h,r)||(i=o?b[r]:n[r],h[r]=l&&"function"!=typeof b[r]?n[r]:y&&o?f(i,u):d&&b[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):p&&"function"==typeof i?f(Function.call,i):i,p&&((h.virtual||(h.virtual={}))[r]=i,t&P.R&&v&&!v[r]&&S(v,r,i)))};P.F=1,P.G=2,P.S=4,P.P=8,P.B=16,P.W=32,P.U=64,P.R=128;var k=P,M={}.toString,E=function(t){return M.call(t).slice(8,-1)},T=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==E(t)?t.split(""):Object(t)},F=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},L=function(t){return T(F(t))},x=Math.ceil,D=Math.floor,C=function(t){return isNaN(t=+t)?0:(t>0?D:x)(t)},A=Math.min,N=function(t){return t>0?A(C(t),9007199254740991):0},z=Math.max,G=Math.min,I=function(t,e){return(t=C(t))<0?z(t+e,0):G(t,e)},R=r(function(t){var e=u["__core-js_shared__"]||(u["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:c.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),K=0,V=Math.random(),W=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++K+V).toString(36))},q=R("keys"),B=function(t){return q[t]||(q[t]=W(t))},H=function(t){return function(e,n,r){var o,i=L(e),u=N(i.length),c=I(r,u);if(t&&n!=n){for(;u>c;)if((o=i[c++])!=o)return!0}else for(;u>c;c++)if((t||c in i)&&i[c]===n)return t||c||0;return!t&&-1}}(!1),J=B("IE_PROTO"),U=function(t,e){var n,r=L(t),o=0,i=[];for(n in r)n!=J&&j(r,n)&&i.push(n);for(;e.length>o;)j(r,n=e[o++])&&(~H(i,n)||i.push(n));return i},Y="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(t){return U(t,Y)},X={f:Object.getOwnPropertySymbols},Z={f:{}.propertyIsEnumerable},$=function(t){return Object(F(t))},tt=Object.assign,et=!tt||p(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=tt({},t)[n]||Object.keys(tt({},e)).join("")!=r})?function(t,e){for(var n=$(t),r=arguments.length,o=1,i=X.f,u=Z.f;r>o;)for(var c,a=T(arguments[o++]),f=i?Q(a).concat(i(a)):Q(a),l=f.length,s=0;l>s;)c=f[s++],y&&!u.call(a,c)||(n[c]=a[c]);return n}:tt;k(k.S+k.F,"Object",{assign:et});var nt=c.Object.assign,rt=r(function(t){t.exports={default:nt,__esModule:!0}});n(rt);var ot=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(rt);e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}})),it=Object.getOwnPropertyDescriptor,ut={f:y?it:function(t,e){if(t=L(t),e=m(e,!0),b)try{return it(t,e)}catch(t){}if(j(t,e))return O(!Z.f.call(t,e),t[e])}},ct=function(t,e){var n=(c.Object||{})[t]||Object[t],r={};r[t]=e(n),k(k.S+k.F*p(function(){n(1)}),"Object",r)},at=ut.f;ct("getOwnPropertyDescriptor",function(){return function(t,e){return at(L(t),e)}});var ft=c.Object,lt=function(t,e){return ft.getOwnPropertyDescriptor(t,e)},st=n(r(function(t){t.exports={default:lt,__esModule:!0}})),pt=B("IE_PROTO"),yt=Object.prototype,dt=Object.getPrototypeOf||function(t){return t=$(t),j(t,pt)?t[pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?yt:null};ct("getPrototypeOf",function(){return function(t){return dt($(t))}});var ht=c.Object.getPrototypeOf,vt=n(r(function(t){t.exports={default:ht,__esModule:!0}})),bt=n(r(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));k(k.S+k.F*!y,"Object",{defineProperty:g.f});var mt=c.Object,_t=function(t,e,n){return mt.defineProperty(t,e,n)},gt=r(function(t){t.exports={default:_t,__esModule:!0}});n(gt);var Ot=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(gt);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(t,o.key,o)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()})),St=S,wt={},jt=y?Object.defineProperties:function(t,e){s(t);for(var n,r=Q(e),o=r.length,i=0;o>i;)g.f(t,n=r[i++],e[n]);return t},Pt=u.document,kt=Pt&&Pt.documentElement,Mt=B("IE_PROTO"),Et=function(){},Tt=function(){var t,e=v("iframe"),n=Y.length;for(e.style.display="none",kt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Tt=t.F;n--;)delete Tt.prototype[Y[n]];return Tt()},Ft=Object.create||function(t,e){var n;return null!==t?(Et.prototype=s(t),n=new Et,Et.prototype=null,n[Mt]=t):n=Tt(),void 0===e?n:jt(n,e)},Lt=r(function(t){var e=R("wks"),n=u.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:W)("Symbol."+t))}).store=e}),xt=g.f,Dt=Lt("toStringTag"),Ct=function(t,e,n){t&&!j(t=n?t:t.prototype,Dt)&&xt(t,Dt,{configurable:!0,value:e})},At={};S(At,Lt("iterator"),function(){return this});var Nt=function(t,e,n){t.prototype=Ft(At,{next:O(1,n)}),Ct(t,e+" Iterator")},zt=Lt("iterator"),Gt=!([].keys&&"next"in[].keys()),It=function(){return this},Rt=function(t,e,n,r,o,i,u){Nt(n,e,r);var c,a,f,l=function(t){if(!Gt&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},s=e+" Iterator",p="values"==o,y=!1,d=t.prototype,h=d[zt]||d["@@iterator"]||o&&d[o],v=h||l(o),b=o?p?l("entries"):v:void 0,m="Array"==e?d.entries||h:h;if(m&&(f=dt(m.call(new t)))!==Object.prototype&&f.next&&Ct(f,s,!0),p&&h&&"values"!==h.name&&(y=!0,v=function(){return h.call(this)}),u&&(Gt||y||!d[zt])&&S(d,zt,v),wt[e]=v,wt[s]=It,o)if(c={values:p?v:l("values"),keys:i?v:l("keys"),entries:b},u)for(a in c)a in d||St(d,a,c[a]);else k(k.P+k.F*(Gt||y),e,c);return c},Kt=function(t){return function(e,n){var r,o,i=String(F(e)),u=C(n),c=i.length;return u<0||u>=c?t?"":void 0:(r=i.charCodeAt(u))<55296||r>56319||u+1===c||(o=i.charCodeAt(u+1))<56320||o>57343?t?i.charAt(u):r:t?i.slice(u,u+2):o-56320+(r-55296<<10)+65536}}(!0);Rt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Kt(e,n),this._i+=t.length,{value:t,done:!1})});var Vt=function(t,e){return{value:e,done:!!t}};Rt(Array,"Array",function(t,e){this._t=L(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Vt(1)):"keys"==e?Vt(0,n):"values"==e?Vt(0,t[n]):Vt(0,[n,t[n]])},"values");wt.Arguments=wt.Array;for(var Wt=Lt("toStringTag"),qt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Bt=0;Bt<qt.length;Bt++){var Ht=qt[Bt],Jt=u[Ht],Ut=Jt&&Jt.prototype;Ut&&!Ut[Wt]&&S(Ut,Wt,Ht),wt[Ht]=wt.Array}var Yt={f:Lt},Qt=Yt.f("iterator"),Xt=r(function(t){t.exports={default:Qt,__esModule:!0}});n(Xt);var Zt=r(function(t){var e=W("meta"),n=g.f,r=0,o=Object.isExtensible||function(){return!0},i=!p(function(){return o(Object.preventExtensions({}))}),u=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!l(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!j(t,e)){if(!o(t))return"F";if(!n)return"E";u(t)}return t[e].i},getWeak:function(t,n){if(!j(t,e)){if(!o(t))return!0;if(!n)return!1;u(t)}return t[e].w},onFreeze:function(t){return i&&c.NEED&&o(t)&&!j(t,e)&&u(t),t}}}),$t=g.f,te=function(t){var e=c.Symbol||(c.Symbol={});"_"==t.charAt(0)||t in e||$t(e,t,{value:Yt.f(t)})},ee=function(t){var e=Q(t),n=X.f;if(n)for(var r,o=n(t),i=Z.f,u=0;o.length>u;)i.call(t,r=o[u++])&&e.push(r);return e},ne=Array.isArray||function(t){return"Array"==E(t)},re=Y.concat("length","prototype"),oe={f:Object.getOwnPropertyNames||function(t){return U(t,re)}},ie=oe.f,ue={}.toString,ce="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ae=function(t){try{return ie(t)}catch(t){return ce.slice()}},fe={f:function(t){return ce&&"[object Window]"==ue.call(t)?ae(t):ie(L(t))}},le=Zt.KEY,se=ut.f,pe=g.f,ye=fe.f,de=u.Symbol,he=u.JSON,ve=he&&he.stringify,be=Lt("_hidden"),me=Lt("toPrimitive"),_e={}.propertyIsEnumerable,ge=R("symbol-registry"),Oe=R("symbols"),Se=R("op-symbols"),we=Object.prototype,je="function"==typeof de&&!!X.f,Pe=u.QObject,ke=!Pe||!Pe.prototype||!Pe.prototype.findChild,Me=y&&p(function(){return 7!=Ft(pe({},"a",{get:function(){return pe(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=se(we,e);r&&delete we[e],pe(t,e,n),r&&t!==we&&pe(we,e,r)}:pe,Ee=function(t){var e=Oe[t]=Ft(de.prototype);return e._k=t,e},Te=je&&"symbol"==typeof de.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof de},Fe=function(t,e,n){return t===we&&Fe(Se,e,n),s(t),e=m(e,!0),s(n),j(Oe,e)?(n.enumerable?(j(t,be)&&t[be][e]&&(t[be][e]=!1),n=Ft(n,{enumerable:O(0,!1)})):(j(t,be)||pe(t,be,O(1,{})),t[be][e]=!0),Me(t,e,n)):pe(t,e,n)},Le=function(t,e){s(t);for(var n,r=ee(e=L(e)),o=0,i=r.length;i>o;)Fe(t,n=r[o++],e[n]);return t},xe=function(t){var e=_e.call(this,t=m(t,!0));return!(this===we&&j(Oe,t)&&!j(Se,t))&&(!(e||!j(this,t)||!j(Oe,t)||j(this,be)&&this[be][t])||e)},De=function(t,e){if(t=L(t),e=m(e,!0),t!==we||!j(Oe,e)||j(Se,e)){var n=se(t,e);return!n||!j(Oe,e)||j(t,be)&&t[be][e]||(n.enumerable=!0),n}},Ce=function(t){for(var e,n=ye(L(t)),r=[],o=0;n.length>o;)j(Oe,e=n[o++])||e==be||e==le||r.push(e);return r},Ae=function(t){for(var e,n=t===we,r=ye(n?Se:L(t)),o=[],i=0;r.length>i;)!j(Oe,e=r[i++])||n&&!j(we,e)||o.push(Oe[e]);return o};je||(St((de=function(){if(this instanceof de)throw TypeError("Symbol is not a constructor!");var t=W(arguments.length>0?arguments[0]:void 0),e=function(n){this===we&&e.call(Se,n),j(this,be)&&j(this[be],t)&&(this[be][t]=!1),Me(this,t,O(1,n))};return y&&ke&&Me(we,t,{configurable:!0,set:e}),Ee(t)}).prototype,"toString",function(){return this._k}),ut.f=De,g.f=Fe,oe.f=fe.f=Ce,Z.f=xe,X.f=Ae,Yt.f=function(t){return Ee(Lt(t))}),k(k.G+k.W+k.F*!je,{Symbol:de});for(var Ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ze=0;Ne.length>ze;)Lt(Ne[ze++]);for(var Ge=Q(Lt.store),Ie=0;Ge.length>Ie;)te(Ge[Ie++]);k(k.S+k.F*!je,"Symbol",{for:function(t){return j(ge,t+="")?ge[t]:ge[t]=de(t)},keyFor:function(t){if(!Te(t))throw TypeError(t+" is not a symbol!");for(var e in ge)if(ge[e]===t)return e},useSetter:function(){ke=!0},useSimple:function(){ke=!1}}),k(k.S+k.F*!je,"Object",{create:function(t,e){return void 0===e?Ft(t):Le(Ft(t),e)},defineProperty:Fe,defineProperties:Le,getOwnPropertyDescriptor:De,getOwnPropertyNames:Ce,getOwnPropertySymbols:Ae});var Re=p(function(){X.f(1)});k(k.S+k.F*Re,"Object",{getOwnPropertySymbols:function(t){return X.f($(t))}}),he&&k(k.S+k.F*(!je||p(function(){var t=de();return"[null]"!=ve([t])||"{}"!=ve({a:t})||"{}"!=ve(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(l(e)||void 0!==t)&&!Te(t))return ne(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Te(e))return e}),r[1]=e,ve.apply(he,r)}}),de.prototype[me]||S(de.prototype,me,de.prototype.valueOf),Ct(de,"Symbol"),Ct(Math,"Math",!0),Ct(u.JSON,"JSON",!0),te("asyncIterator"),te("observable");var Ke=c.Symbol,Ve=r(function(t){t.exports={default:Ke,__esModule:!0}});n(Ve);var We=r(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(Xt),o=n(Ve),i="function"==typeof o.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};e.default="function"==typeof o.default&&"symbol"===i(r.default)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":i(t)}});n(We);var qe=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(We);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,n.default)(e))&&"function"!=typeof e?t:e}})),Be=function(t,e){if(s(t),!l(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},He={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=f(Function.call,ut.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return Be(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:Be};k(k.S,"Object",{setPrototypeOf:He.set});var Je=c.Object.setPrototypeOf,Ue=r(function(t){t.exports={default:Je,__esModule:!0}});n(Ue),k(k.S,"Object",{create:Ft});var Ye=c.Object,Qe=function(t,e){return Ye.create(t,e)},Xe=r(function(t){t.exports={default:Qe,__esModule:!0}});n(Xe);var Ze,$e,tn,en,nn,rn,on=n(r(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(Ue),o=n(Xe),i=n(We);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,i.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}})),un=(tn=$e=function(t){function e(){var t,n,r,o;bt(this,e);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return n=r=qe(this,(t=e.__proto__||vt(e)).call.apply(t,[this].concat(u))),r.state={is_show:!1},o=n,qe(r,o)}return on(e,t),Ot(e,[{key:"componentDidMount",value:function(){this.props.player.on("fullscreenchange",this.showGuildOnFullscreen)}},{key:"componentWillUnmount",value:function(){this.props.player.off("fullscreenchange",this.showGuildOnFullscreen)}},{key:"showGuildOnFullscreen",value:function(){var t=this.props.player;document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(this.setState({is_show:!1}),t.removeClass("player-fullscreen"),t.isFullscreen(!1),t.container.setState({is_fullscreen:!1})),t.isFullscreen()?this.setState({is_show:!0}):this.setState({is_show:!1})}},{key:"className",value:function(){var t=[];return this.state.is_show&&t.push("show-guide-fullscreen"),t.join(" ")}},{key:"render",value:function(){if(this.props.player.adSystem)return null;var t=this.className();return i.createElement("div",{className:t})}}]),e}(e.Component),$e.propTypes={player:t.PropTypes.object.isRequired},Ze=tn,function(t,e,n,r,o){var i={};Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null)}(Ze.prototype,"showGuildOnFullscreen",[t.autobind],st(Ze.prototype,"showGuildOnFullscreen"),Ze.prototype),Ze),cn=(rn=nn=function(t){function e(t){bt(this,e);var n=qe(this,(e.__proto__||vt(e)).call(this,t));return n.props.player.on("keydown",n._handleKeyDown),n}return on(e,t),Ot(e,[{key:"_handleKeyDown",value:function(t){var e=this.props,n=e.player,r=e.seekStep,o=e.volumeStep,i=void 0,u=void 0;switch(t.which){case 32:t.preventDefault(),n.paused()?n.play():n.pause();break;case 37:t.preventDefault(),i=n.currentTime()-r,n.currentTime()<=r&&(i=0);try{u=100*i/n.duration(),n.container.controlBar.progressControl.progressSlider.playProgress.update(u)}catch(t){}n.currentTime(i);break;case 39:t.preventDefault(),i=n.currentTime()+r;try{u=100*i/n.duration(),n.container.controlBar.progressControl.progressSlider.playProgress.update(u)}catch(t){}n.currentTime(i);break;case 40:t.preventDefault(),n.muted(!1),n.volume(n.volume()-o);break;case 38:t.preventDefault(),n.muted(!1),n.volume(n.volume()+o);break;case 77:n.muted()?n.muted(!1):n.muted(!0);break;case 70:n.isFullscreen()?n.exitFullscreen():n.requestFullscreen()}}}]),e}(t.Plugin),nn.defaultProps={seekStep:5,volumeStep:.1},en=rn,function(t,e,n,r,o){var i={};Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null)}(en.prototype,"_handleKeyDown",[t.autobind],st(en.prototype,"_handleKeyDown"),en.prototype),en);o.registerPlugin("guidePlugin",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{seekStep:5},n=this;if(t.agent.isMobile)return null;n.one("ready",function(){var t=i.createElement(un,{key:"guidescreen",player:n});n.container.addChild(t,1)}),new cn(ot({player:n},e))})})}();/**
 * sharePlugin - v1.0.1 - 09:54:23 27-09-2018
 * Author: cuongtt
 */

!function(){var e=void 0;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("react"),require("playercore")):"function"==typeof e&&e.amd?e(["react","playercore"],n):n(t.React,t.Kenh14PlayerCore)}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="default"in e?e.default:e,c="default"in t?t.default:t,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=function(t){function i(e){n(this,i);var t=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={hover:!1,copied:!1},t.handleClick=t.handleClick.bind(t),t.onHover=t.onHover.bind(t),t.onOut=t.onOut.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t}return r(i,e.Component),p(i,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){var t=this.state,n=t.hover,o=t.copied;(n||o)&&this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.onOut()}},{key:"handleClick",value:function(e){var t={hover:!1,copied:!0};"Facebook"===this.props.label&&(t={hover:!0}),(this.props.onClick||function(){})(e),this.setState(u({},t))}},{key:"className",value:function(){var e=this.props.className;return["share-toggles",e].join(" ")}},{key:"onHover",value:function(){this.setState({hover:!0})}},{key:"onOut",value:function(){this.setState({hover:!1,copied:!1})}},{key:"render",value:function(){var e=this,t=this.className(),n=this.props.label;return l.createElement("div",{onMouseEnter:this.onHover,onMouseLeave:this.onOut,onClick:this.handleClick,className:t,ref:function(t){e.wrapperRef=t}},this.state.hover?l.createElement("span",{className:"text-label"},n):"",this.state.copied?l.createElement("span",{className:"text-label"},"Copied"):"")}}]),i}();h.propTypes={label:t.PropTypes.string.isRequired,player:t.PropTypes.object.isRequired,className:t.PropTypes.string,onClick:t.PropTypes.func},h.defaultProps={label:"share",className:""};var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=function(t){function n(e){i(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={copySuccess:!1},t._onUserActive=t._onUserActive.bind(t),t._onUserInactive=t._onUserInactive.bind(t),t.handleShareFaceBook=t.handleShareFaceBook.bind(t),t.handleShareLink=t.handleShareLink.bind(t),t.handleShareEmbed=t.handleShareEmbed.bind(t),t}return s(n,e.Component),d(n,[{key:"componentDidMount",value:function(){var e=this.props.player;e.on("player_useractive",this._onUserActive),e.on("player_userinactive",this._onUserInactive)}},{key:"componentWillUnmount",value:function(){var e=this.props.player;e.off("player_useractive",this._onUserActive),e.off("player_userinactive",this._onUserInactive)}},{key:"_onUserActive",value:function(){this.setState({invisible:!1,hidden:!1}),clearTimeout(this.timeoutHidden_)}},{key:"_onUserInactive",value:function(){var e=this;this.setState({invisible:!0}),this.timeoutHidden_=setTimeout(function(){e.setState({hidden:!0})},1e3)}},{key:"className",value:function(){var e=this.props,t=e.className,n=e.site,o=e.player,r=this.state,i=r.invisible,a=r.hidden,s=["share-container",t];return n&&s.push("tn-share-container"),i&&s.push("invisible"),(a||o.height_<200)&&s.push("hidden"),s.join(" ")}},{key:"shareUrl",value:function(){var e,t=this.props.player;try{e=t.options().params.shareUrl||document.location.href||window.top.location.href||document.referrer,window.top!=window.self&&(e=document.referrer?document.referrer:location.href)}catch(e){return}return e}},{key:"handleShareFaceBook",value:function(){var e=this.shareUrl(),t=0,n=0;void 0!==window.screenLeft?(t=window.screenLeft,n=window.screenTop):void 0!==window.screenX&&(t=window.screenX,n=window.screenY);t+=(window.screen.width-600)/2,n+=(window.screen.height-260)/2,window.open("https://www.facebook.com/sharer/sharer.php?u="+e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=260,width=600,top="+n+",left="+t)}},{key:"_isinIframe",value:function(){try{return window.self!==window.top}catch(e){return!1}}},{key:"handleShareLink",value:function(){this.setState({disable:!0});var e=this.shareUrl();this.textInput.value=e,this._copyToClipboard()}},{key:"handleUrl",value:function(){var e=this.props,t=e.player,n=e.allow,o=t.options(),r=o.playerid,i=o.params,a=i.ads,s=i.autoplay,l=i.domain,c=i.mp4,u=i.pathname,p=i.vid,h=i._admParamTvc,d=i._info,f=i._listsuggest,v=i._site,y=void 0;return y="https://adminplayer.sohatv.vn/embed/"+r,void 0!==p&&(y=y+"/?vid="+p),void 0!==a&&(y=y+"&ads="+a),void 0!==s&&(y=y+"&autoplay="+s),void 0!==l&&(y=y+"&domain="+l),void 0!==c&&(y=y+"&mp4="+c),void 0!==u&&(y=y+"&pathname="+u),void 0!==h&&(y=y+"&_admParamTvc="+h),void 0!==d&&(y=y+"&_info="+d),void 0!==f&&(y=y+"&_listsuggest="+f),void 0!==v&&(y=y+"&_site="+v),void 0!==n&&(y=y+"&allow_all="+n),y}},{key:"handleShareEmbed",value:function(){var e=document.getElementById("context-stats").offsetHeight,t="<iframe width="+document.getElementById("context-stats").offsetWidth+" height="+e+" src="+this.handleUrl()+' data-type="video-iframe" frameborder="0" scrolling="no" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" oallowfullscreen="" msallowfullscreen=""></iframe>';this.textInput.value=t,this._copyToClipboard()}},{key:"insertString",value:function(e,t,n){var o=e.indexOf(n);return-1!==o?e.substr(0,o)+t+e.substr(o):"substring not found"}},{key:"_copyToClipboard",value:function(){var e=this,t=this.props.player;this.timeoutCopyClipboard_&&(clearTimeout(this.timeoutCopyClipboard_),delete this.timeoutCopyClipboard_),this.setState({copySuccess:!0});var n=document.getElementById(t.id_+"-input-copy");n.select(),document.execCommand("Copy"),n.blur(),this.timeoutCopyClipboard_=setTimeout(function(){e.setState({copySuccess:!1})},1e3)}},{key:"render",value:function(){var e=this,t=this.props.player,n=this.className();return l.createElement("div",{className:n},l.createElement(h,{player:t,className:"share-fb",label:"Facebook",onClick:this.handleShareFaceBook}),l.createElement(h,{player:t,className:"share-lks",label:"Link",onClick:this.handleShareLink}),l.createElement("input",{id:t.id_+"-input-copy",type:"text",className:"display-copy",ref:function(t){return e.textInput=t}}))}}]),n}();f.propTypes={player:t.PropTypes.object.isRequired,allow:t.PropTypes.bool,className:t.PropTypes.string,showHeader:t.PropTypes.bool,site:t.PropTypes.string,onCloseShare:t.PropTypes.func};c.registerPlugin("sharePlugin",function(e){var t=this,n=e.allow,o=e.site;t.one("ready",function(){var e=l.createElement(f,{key:"shareFrame",site:o,allow:n,player:t});t.container.addChild(e)})})})}();/**
 * vcTrackingPlugin - v1.0.0 - 12:04:52 25-06-2020
 * Author: TuanLDT
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).OpenVV=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var r,i=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(r=0;r<i;r++)if(t.call(n,e[r],r,e))return e[r]}},{}],2:[function(e,t,n){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?i/n:this.isIntersecting?1:0}function r(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function i(){return e.performance&&performance.now&&performance.now()}function o(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function a(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),i=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-i,s=r-n;return a>=0&&s>=0&&{top:n,bottom:r,left:i,right:o,width:a,height:s}}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e,t){for(var n=t;n;){if(n==e)return!0;n=h(n)}return!1}function h(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var d=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(r){var o=r.element,a=l(o),s=this._rootContainsTarget(o),u=r.entry,c=e&&s&&this._computeTargetAndRootIntersection(o,t),h=r.entry=new n({time:i(),target:o,boundingClientRect:a,rootBounds:t,intersectionRect:c});u?e&&s?this._hasCrossedThreshold(u,h)&&this._queuedEntries.push(h):u&&u.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=e.getComputedStyle(n).display){for(var i=l(n),o=h(n),a=!1;!a;){var s=null,c=1==o.nodeType?e.getComputedStyle(o):{};if("none"==c.display)return;if(o==this.root||o==t?(a=!0,s=r):o!=t.body&&o!=t.documentElement&&"visible"!=c.overflow&&(s=l(o)),s&&!(i=u(s,i)))break;o=h(o)}return i}},r.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},r.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},r.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},r.prototype._unregisterInstance=function(){var e=d.indexOf(this);-1!=e&&d.splice(e,1)},e.IntersectionObserver=r,e.IntersectionObserverEntry=n}}(window,document)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.getDetails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{viewportWidth:Math.max(document.body.clientWidth,window.innerWidth)||-1,viewportHeight:Math.max(document.body.clientHeight,window.innerHeight)||-1,elementWidth:e.clientWidth||-1,elementHeight:e.clientHeight||-1,iframeContext:i(),focus:r()}};var r=n.isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(i()===o.CROSS_DOMAIN_IFRAME||(!window.document.hasFocus||window.top.document.hasFocus()))},i=n.iFrameContext=function(){try{if(window.top===window)return o.ON_PAGE;for(var e=window;e.parent!==e;){if(e.parent.document.domain!==e.document.domain)return o.CROSS_DOMAIN_IFRAME;e=e.parent}o.SAME_DOMAIN_IFRAME}catch(e){return o.CROSS_DOMAIN_IFRAME}},o=n.iFrameServingScenarios={ON_PAGE:"on page",SAME_DOMAIN_IFRAME:"same domain iframe",CROSS_DOMAIN_IFRAME:"cross domain iframe"}},{}],4:[function(e,t,n){"use strict";e("array-find")},{"array-find":1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateStrategy=n.validateCriteria=n.validElement=n.validTechnique=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Measurement/MeasurementTechniques/BaseTechnique")),o=(n.validTechnique=function(e){return"function"==typeof e&&Object.getOwnPropertyNames(i.default).reduce(function(t,n){return n&&r(e[t])===r(i.default[t])},!0)},n.validElement=function(e){return e&&e.toString().indexOf("Element")>-1},n.validateCriteria=function(e){var t=e.inViewThreshold,n=e.timeInView,r=!1,i=[];return("number"!=typeof t||t>1)&&(r=!0,i.push("inViewThreshold must be a number equal to or less than 1")),("number"!=typeof n||n<0)&&(r=!0,i.push("timeInView must be a number greater to or equal 0")),{invalid:r,reasons:i.join(" | ")}});n.validateStrategy=function(e){var t=e.autostart,n=e.techniques,r=e.criteria,i=!1,a=[];"boolean"!=typeof t&&(i=!0,a.push("autostart must be boolean")),Array.isArray(n)&&0!==n.length||(i=!0,a.push("techniques must be an array containing atleast on measurement techniques"));var s=o(r);return s.invalid&&(i=!0,a.push(s.reasons)),{invalid:i,reasons:a.join(" | ")}}},{"../Measurement/MeasurementTechniques/BaseTechnique":8}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.START="start",n.STOP="stop",n.CHANGE="change",n.COMPLETE="complete",n.UNMEASUREABLE="unmeasureable",n.INVIEW="inview",n.OUTVIEW="outview"},{}],7:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("../Timing/InViewTimer")),u=e("./Strategies/"),l=e("../Helpers/Validators"),c=r(e("../Environment/Environment")),h=r(e("./Events")),d=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this._listeners={start:[],stop:[],change:[],complete:[],unmeasureable:[]},this._element=t,this._strategy=o({},u.DEFAULT_STRATEGY,r),this._criteriaMet=!1;var a=(0,l.validateStrategy)(this._strategy);if(a.invalid)throw a.reasons;this._technique=this._selectTechnique(this._strategy.techniques),this._technique&&this._addSubscriptions(this._technique),this.unmeasureable?setTimeout(function(){return n._publish(h.UNMEASUREABLE,c.getDetails(n._element))},0):this._strategy.autostart&&this._technique.start()}return a(e,[{key:"start",value:function(){this._technique.start()}},{key:"dispose",value:function(){this._technique&&this._technique.dispose(),this.timer&&this.timer.dispose()}},{key:"onViewableStart",value:function(e){return this._addCallback(e,h.START)}},{key:"onViewableStop",value:function(e){return this._addCallback(e,h.STOP)}},{key:"onViewableChange",value:function(e){return this._addCallback(e,h.CHANGE)}},{key:"onViewableComplete",value:function(e){return this._addCallback(e,h.COMPLETE),this.criteriaMet&&this._techniqueChange(h.COMPLETE,this._technique),this}},{key:"onUnmeasureable",value:function(e){return this._addCallback(e,h.UNMEASUREABLE),this.unmeasureable&&this._techniqueChange(h.UNMEASUREABLE),this}},{key:"_selectTechnique",value:function(e){return e.filter(l.validTechnique).map(this._instantiateTechnique.bind(this)).find(function(e){return!e.unmeasureable})}},{key:"_instantiateTechnique",value:function(e){return new e(this._element,this._strategy.criteria)}},{key:"_addSubscriptions",value:function(e){e&&(e.onInView(this._techniqueChange.bind(this,h.INVIEW,e)),e.onChangeView(this._techniqueChange.bind(this,h.CHANGE,e)),e.onOutView(this._techniqueChange.bind(this,h.OUTVIEW,e)))}},{key:"_techniqueChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,r=this._appendEnvironment(t);switch(e){case h.INVIEW:this._criteriaMet||(this.timer=new s.default(this._strategy.criteria.timeInView),this.timer.elapsed(this._timerElapsed.bind(this,t)),this.timer.start(),n=h.START);break;case h.CHANGE:n=e;break;case h.COMPLETE:this._criteriaMet||(this._criteriaMet=!0,n=e);break;case h.OUTVIEW:this._criteriaMet||(this.timer&&(this.timer.stop(),delete this.timer),n=h.STOP);break;case h.UNMEASUREABLE:n=h.UNMEASUREABLE}n&&this._publish(n,r)}},{key:"_publish",value:function(e,t){Array.isArray(this._listeners[e])&&this._listeners[e].forEach(function(e){return e(t)})}},{key:"_timerElapsed",value:function(e){this._techniqueChange(h.COMPLETE,e)}},{key:"_addCallback",value:function(e,t){if(this._listeners[t]&&"function"==typeof e)this._listeners[t].push(e);else if("function"!=typeof e)throw"Callback must be a function";return this}},{key:"_appendEnvironment",value:function(e){return o({},{percentViewable:void 0===e.percentViewable?-1:e.percentViewable,technique:e.techniqueName||-1,viewable:void 0===e.viewable?-1:e.viewable},c.getDetails(this._element))}},{key:"unmeasureable",get:function(){return!this._technique||this._technique.unmeasureable}}]),e}();n.default=d,t.exports=n.default},{"../Environment/Environment":3,"../Helpers/Validators":5,"../Timing/InViewTimer":15,"./Events":6,"./Strategies/":12}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.listeners={inView:[],outView:[],changeView:[]},this.percentViewable=0}return i(e,[{key:"onInView",value:function(e){return this.addCallback(e,"inView")}},{key:"onChangeView",value:function(e){return this.addCallback(e,"changeView")}},{key:"onOutView",value:function(e){return this.addCallback(e,"outView")}},{key:"addCallback",value:function(e,t){if("function"==typeof e&&this.listeners[t])this.listeners[t].push(e);else if("function"!=typeof e)throw"callback must be function";return this}},{key:"start",value:function(){}},{key:"dispose",value:function(){}},{key:"unmeasureable",get:function(){return!1}},{key:"viewable",get:function(){return!1}},{key:"techniqueName",get:function(){return"BaseTechnique"}}]),e}();n.default=o,t.exports=n.default},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./BaseTechnique")),u=e("../../Helpers/Validators"),l=e("../Strategies/"),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.DEFAULT_STRATEGY.criteria;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(void 0!==n&&e)o.element=e,o.criteria=n,o.inView=!1,o.started=!1,o.notificationLevels=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],-1===o.notificationLevels.indexOf(o.criteria.inViewThreshold)&&o.notificationLevels.push(o.criteria.inViewThreshold);else if(!e)throw"element not provided";return o}return o(t,s.default),a(t,[{key:"start",value:function(){this.observer=new window.IntersectionObserver(this.viewableChange.bind(this),{threshold:this.notificationLevels}),this.observer.observe(this.element)}},{key:"dispose",value:function(){this.observer&&(this.observer.unobserve(element),this.observer.disconnect(element))}},{key:"viewableChange",value:function(e){e&&e.length&&void 0!==e[0].intersectionRatio&&(this.percentViewable=e[0].intersectionRatio,e[0].intersectionRatio<this.criteria.inViewThreshold&&this.started&&this.inView&&(this.inView=!1,this.listeners.outView.forEach(function(e){return e()})),e[0].intersectionRatio>=this.criteria.inViewThreshold&&!this.inView&&(this.started=!0,this.inView=!0,this.listeners.inView.forEach(function(e){return e()})),this.listeners.changeView.forEach(function(e){return e()}))}},{key:"unmeasureable",get:function(){return!window.IntersectionObserver||this.usesPolyfill||!(0,u.validElement)(this.element)}},{key:"viewable",get:function(){return this.inView}},{key:"techniqueName",get:function(){return"IntersectionObserver"}},{key:"usesPolyfill",get:function(){return"number"==typeof window.IntersectionObserver.prototype.THROTTLE_TIMEOUT}}]),t}();n.default=c,t.exports=n.default},{"../../Helpers/Validators":5,"../Strategies/":12,"./BaseTechnique":8}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=r(e("./IntersectionObserver")),l=(r(e("intersection-observer")),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../Environment/Environment"))),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,u.default),s(t,[{key:"unmeasureable",get:function(){return l.iFrameContext()===l.iFrameServingScenarios.CROSS_DOMAIN_IFRAME}},{key:"techniqueName",get:function(){return"IntersectionObserverPolyFill"}}]),t}();n.default=c,t.exports=n.default},{"../../Environment/Environment":3,"./IntersectionObserver":9,"intersection-observer":2}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./IntersectionObserver");Object.defineProperty(n,"IntersectionObserver",{enumerable:!0,get:function(){return r(i).default}});var o=e("./IntersectionObserverPolyfill");Object.defineProperty(n,"IntersectionObserverPolyfill",{enumerable:!0,get:function(){return r(o).default}});var a=e("./BaseTechnique");Object.defineProperty(n,"BaseTechnique",{enumerable:!0,get:function(){return r(a).default}})},{"./BaseTechnique":8,"./IntersectionObserver":9,"./IntersectionObserverPolyfill":10}],12:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.StrategyFactory=n.DEFAULT_STRATEGY=void 0;var i=r(e("../../Helpers/Validators")),o=r(e("../MeasurementTechniques/")),a=r(e("../../Options/ViewabilityCriteria")),s=n.DEFAULT_STRATEGY={autostart:!0,techniques:[o.IntersectionObserver,o.IntersectionObserverPolyfill],criteria:a.MRC_VIDEO};n.StrategyFactory=function(){var e={autostart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.autostart,techniques:arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.techniques,criteria:arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.criteria},t=i.validateStrategy(e);if(t.invalid)throw t.reasons;return e}},{"../../Helpers/Validators":5,"../../Options/ViewabilityCriteria":14,"../MeasurementTechniques/":11}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e("./Helpers/Polyfills.js");var s=i(e("./Measurement/Events")),u=r(e("./Timing/InViewTimer")),l=i(e("./Measurement/Strategies/")),c=(i(e("./Environment/Environment")),r(e("./Measurement/MeasurementExecutor"))),h=i(e("./Options/ViewabilityCriteria")),d=i(e("./Measurement/MeasurementTechniques/")),f=function(){function e(){o(this,e),this.executors=[]}return a(e,[{key:"measureElement",value:function(e,t){var n=new c.default(e,t);return this.executors.push(n),n}},{key:"dispose",value:function(){this.executors.forEach(function(e){return e.dispose()})}}]),e}();n.default=f,f.ViewabilityCriteria=h,f.MeasurementExecutor=c.default,f.MeasurementTechniques=d,f.InViewTimer=u.default,f.Strategies=l,f.Events=s,t.exports=n.default},{"./Environment/Environment":3,"./Helpers/Polyfills.js":4,"./Measurement/Events":6,"./Measurement/MeasurementExecutor":7,"./Measurement/MeasurementTechniques/":11,"./Measurement/Strategies/":12,"./Options/ViewabilityCriteria":14,"./Timing/InViewTimer":15}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MRC_VIDEO={inViewThreshold:.5,timeInView:2e3},n.MRC_DISPLAY={inViewThreshold:.5,timeInView:1e3},n.customCriteria=function(){return{inViewThreshold:arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,timeInView:arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3}}},{}],15:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.duration=t,this.listeners=[],this.completed=!1}return i(e,[{key:"timerComplete",value:function(){this.completed=!0,this.listeners.forEach(function(e){return e()})}},{key:"elapsed",value:function(e){"function"==typeof e&&this.listeners.push(e)}},{key:"start",value:function(){this.endTimer(),this.timer=setTimeout(this.timerComplete.bind(this),this.duration)}},{key:"stop",value:function(){this.endTimer()}},{key:"endTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.listeners.length=0)}},{key:"dispose",value:function(){this.endTimer()}}]),e}();n.default=o,t.exports=n.default},{}]},{},[13])(13)}),function(){var e=void 0;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("OpenVV")):"function"==typeof e&&e.amd?e(["playercore","OpenVV"],n):n(t.Kenh14PlayerCore,t.OpenVV)}(this,function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60);return(isNaN(e)||e===1/0)&&(i=r=n="-"),i=(i<10?"0"+i:i)+":",r=((i||o>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,i+r+n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E="default"in e?e.default:e;t=t&&t.hasOwnProperty("default")?t.default:t;var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function e(t,n){var r,i=[];for(r in t)if(t.hasOwnProperty(r)){var o=n?n+"["+r+"]":r,a=t[r];i.push(null!==a&&"object"===(void 0===a?"undefined":w(a))?e(a,o):encodeURIComponent(o)+"="+encodeURIComponent(a))}return i.join("&")},k=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},P={"afamily.vn":1,"autopro.com.vn":2,"cafef.vn":3,"dantri.com.vn":4,"gamek.vn":5,"genk.vn":6,"kenh14.vn":7,"soha.vn":8,"giadinh.net.vn":9,"nld.com.vn":10,"lazada.vn":11,"bds.rongbay.com":12,"muachung.vn":13,"6giosang.com":14,"m.dantri.com.vn":16,"cafebiz.vn":17,"m.kenh14.vn":18,"vccloud.vn":19,"m.soha.vn":20,"m.gamek.vn":21,"m.genk.vn":22,"m.autopro.com.vn":23,"m.afamily.vn":24,"m.cafebiz.vn":25,"m.cafef.vn":26,"m.giadinh.net.vn":27,"vneconomy.vn":28,"m.vneconomy.vn":29,"analytics.admicro.vn":30,"m.nld.com.vn":31,"nguyenkim.com":32,"publisher-website":35,vc:36,"suckhoedoisong.vn":38,"muare.vn":39,"tratu.soha.vn":40,"socnhi.com":41,"enbac.com":42,"ttvnol.com":43,"linkhay.com":44,"f319.com":45,"vtv.vn":46,"rongbay.com":47,"rongbay.vn":48,"m.vtv.vn":49,"m.linkhay.com":50,"m.enbac.com":51,"plaza.muachung.vn":52,"all.enbac.com":53,"oto.enbac.com":54,"waf.afamily.vn":55,"vntm.kenh14.vn":56,"herewego.kenh14.vn":59,"laodong.com.vn":60,"m.laodong.com.vn":61,"thanhnien.vn":62,"tuoitre.vn":63,"nemo.vn":64,"marketingit.admicro.vn":65,"nextgen.kenh14.vn":66,"quizz.kenh14.vn":67,"phimchat.net":69,"sannhac.com":70,"wechoice.vn":71,"card.sacombank.com.vn":73,"admicro1-3.thanhnien.vn":77,"thanhnien-other.thanhnien.vn":78,"eva.vn":79,"m.eva.vn":80,"m.thanhnien.vn":81,"thethao.thanhnien.vn":82},O={load:1,play:2,replay:3,pause:4,resume:5,fullscreen:6,normalscreen:7,firstQuartile:8,midpoint:9,thirdQuartile:10,endedcontent:11,changeQuality:12,poll:14,close:15,user_change_quality:16,auto_change_quality:17,current_resolution_change:18,error:20,waiting:21,adstart:22,"bit-receive":23,timetostart:24,adpoll:25,pausedAd:26,adviewable:30},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=e.playerconfig.DEFAULT,I={preroll:1,midroll:2,postroll:3,interactive:4},R=0,V=function(t){function a(e){r(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),n=t.props.player,o=t;t.trackStats=t.trackStats.bind(t),t.getStats=t.getStats.bind(t),t._handePollAdStart=t._handePollAdStart.bind(t),t._handePollAdPlay=t._handePollAdPlay.bind(t),t._handlePollAdEnded=t._handlePollAdEnded.bind(t),t._handePauseAd=t._handePauseAd.bind(t),n.on(S.EVENT.VAST_AD_START,t._handePollAdStart),n.on(S.EVENT.VPAID_AD_IMPRESSION,t._handePollAdStart),n.one(S.EVENT.AD_PAUSE_AD,t._handePauseAd),n.on(S.EVENT.AD_RESUME_AD,function(){n.one(S.EVENT.AD_PAUSE_AD,o._handePauseAd)}),n.on(S.EVENT.AD_PLAY,t._handePollAdPlay),n.on(S.EVENT.AD_END,t._handlePollAdEnded);try{window.parent.addEventListener("focus",function(){o.isTabActive=!0})}catch(e){o.isTabActive=!1}try{window.parent.addEventListener("blur",function(){o.isTabActive=!1})}catch(e){o.isTabActive=!1}return t}return o(a,e.Plugin),A(a,[{key:"_handePollAdStart",value:function(){++R;var e=this.props.player;this.pausedAd_=!1,this.trackStatsInterval_=e.setInterval(this.trackStats,this.props.trackInterval),this.getStatsInterval_=e.setInterval(this.getStats,this.props.statsInterval)}},{key:"_handePollAdPlay",value:function(e,t){var n=this.props.player;if(t&&t.ads&&0!==t.ads.length){var r=n.vastAd.adPosition(),i=t.ads[0].id,o="-1";t.campains.length>0&&(o=t.campains[0]?t.campains[0]:"-1");var a="-1";r&&(a=I[r]),this.setState({bid:i,atype:a,cam:o})}}},{key:"_handePauseAd",value:function(){var e=this.props.track,t=this.state,n=t.adDuration,r=t.remainingTime,i=t.bid,o=t.atype,a=t.avdu,s=t.aview,u="-1";r&&n>=r&&(u=(u=n-r).toFixed(1)),e({avdu:a||"-1",bid:i,atype:o,actime:u,aview:s,aidx:R,evt:O.pausedAd})}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.clearInterval(this.trackStatsInterval_),e.clearInterval(this.getStatsInterval_),this.state={}}},{key:"getStats",value:function(){var t=this,r=this.props.player,i=this.state.adDuration,o=r.vastAd.adUnit(),a=!1;try{a=r.vastAd.paused(),this.setState({apaused:a?1:0})}catch(e){}i||o.getAdDuration().then(function(e){t.setState({adDuration:e,avdu:n(e)})}),o.getAdRemainingTime().then(function(e){t.setState({remainingTime:e})});try{var s=r.el_.getBoundingClientRect(),u=1,l=!1;try{window.top!==window.self&&(l=!0)}catch(e){l=!0}if(l&&window.admid)u=window.top.getViewablePercentOfEle(window.admid)/100;else if(l&&window.frameElement.id){var c=window.top.document.getElementById(window.frameElement.id).getBoundingClientRect();c.top<0?u=c.height+c.top>0?(c.height+c.top)/c.height:0:c.top+c.height>window.screen.height&&(u=c.top<window.screen.height?(window.screen.height-c.top)/c.height:0)}else s.top<0?u=s.height+s.top>0?(s.height+s.top)/s.height:0:s.top+s.height>window.screen.height&&(u=s.top<window.screen.height?(window.screen.height-s.top)/s.height:0);u=u.toFixed(2),this.isTabActive||e.agent.isMobile||(u=-1),this.setState({aview:u})}catch(e){}}},{key:"trackStats",value:function(){var e=this.props.track,t=this.props.player,n=Math.ceil(100*t.volume()),r=this.state,i=r.adDuration,o=r.remainingTime,a=r.bid,s=r.atype,u=r.avdu,l=r.aview,c=r.apaused,h=r.cam;if(t.muted()&&(n=0),i&&!c){var d="-1";o&&i>=o&&(d=(d=i-o).toFixed(1)),e({advolume:n,avdu:u||"-1",bid:a,cam:h,atype:s,actime:d,aview:l,aidx:R,evt:O.adpoll})}}}]),a}();V.defaultProps={trackInterval:1e3,statsInterval:200};var M=function(e,t){new V({player:e,track:t})},C=function(e,t){var n=e.options().scriptinfo,r="-1",i="-1";if(n){var o=n.plugins;if(r=n.core.version,o&&0!==o.length){var a=[];o.forEach(function(e){var t=e.name,n=e.version;a.push(t+":"+n)}),i=a.join(";")}}t({pvs:r,pplvs:i,evt:O.load})},D=function(e,t){e.one("play",function(){t({evt:O.play})})},N=e.playerconfig.DEFAULT,x=function(e,t){function n(){e.vastAd||r()}function r(){e.off("play",n),t({evt:O.replay})}e.on(N.EVENT.PLAYER_ENDED_CONTEND,function(){e.off("play",n),e.on("play",n)})},j=e.playerconfig.DEFAULT,U=function(e,t){e.on(j.EVENT.USER_PAUSE,function(){t({evt:O.pause})})},L=e.playerconfig.DEFAULT,F=function(e,t){e.on(L.EVENT.USER_RESUME,function(){t({evt:O.resume})})},q=function(e,t){window.onbeforeunload=function(){var n=e.currentTime();t({evt:O.close,lvt:n})}},B=function(e,t){e.on("fullscreenchange",function(){var n="fullscreen";e.isFullscreen()||(n="normalscreen"),t({evt:O[n]})})},H=function(e,t){function n(e,t){var n=e.time;return t>=n&&t<=n+5e3}function r(e,r){var i=o[e];i.tracked||n(i,r)&&(i.tracked=!0,t({evt:O[e]}))}function i(){if(o){var t=1e3*e.currentTime(),n=o,i=n.firstQuartile,a=n.midpoint,s=n.thirdQuartile;i.tracked||r("firstQuartile",t),a.tracked||r("midpoint",t),s.tracked||r("thirdQuartile",t)}}e.one("loadedmetadata",function(){var t=e.duration();o={firstQuartile:{tracked:!1,time:Math.round(25*t*1e3)/100},midpoint:{tracked:!1,time:Math.round(50*t*1e3)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t*1e3)/100}}}),e.one("play",function(){e.on("timeupdate",i)});var o=void 0},Y=e.playerconfig.DEFAULT,W=function(e,t){e.one(Y.EVENT.PLAYER_ENDED_CONTEND,function(){t({evt:O.endedcontent})})},G=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q=e.playerconfig.DEFAULT,z={preroll:1,midroll:2,postroll:3,interactive:4},K=function(n){function r(e){a(this,r);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),n=t.props.player;return t._handleAdStart=t._handleAdStart.bind(t),t._handleAdPlay=t._handleAdPlay.bind(t),n.on(Q.EVENT.VAST_AD_START,t._handleAdStart),n.on(Q.EVENT.VPAID_AD_IMPRESSION,t._handleAdStart),n.on(Q.EVENT.AD_PLAY,t._handleAdPlay),t}return u(r,e.Plugin),G(r,[{key:"_handleAdPlay",value:function(e,t){var n=this.props.player;if(t&&t.ads&&0!==t.ads.length){var r=n.vastAd.adPosition(),i=t.ads[0].id,o="-1";t.campains.length>0&&(o=t.campains[0]?t.campains[0]:"-1");var a="-1";r&&(a=z[r]),this.setState({bid:i,atype:a,cam:o})}}},{key:"_handleAdStart",value:function(){var e=this.props,n=e.player,r=e.track,i=this,o=document.getElementById(""+n.id_),a=new t,s=[t.MeasurementTechniques.IntersectionObserver],u={inViewThreshold:.5,timeInView:5e3},l=t.Strategies.StrategyFactory(!0,s,u);a.measureElement(o,l).onViewableStart(function(){}).onViewableComplete(function(){var e=i.state,t=e.bid,o=e.atype,a=e.cam,s=Math.ceil(100*n.volume());n.muted()&&(s=0),r({advolume:s,bid:t,cam:a,atype:o,evt:O.adviewable})})}}]),r}();K.defaultProps={trackInterval:1e3,statsInterval:200};var $=function(e,t){new K({player:e,track:t})},J=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),X=e.playerconfig.DEFAULT,Z={0:0,144:1,240:2,360:3,480:4,720:5,1080:6},ee=0,te=function(t){function n(e){l(this,n);var t=c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),r=t.props.player;return t._handePollAdStart=t._handePollAdStart.bind(t),t._handlePollAdEnded=t._handlePollAdEnded.bind(t),t._handleTimeUpdate=t._handleTimeUpdate.bind(t),t.startPoll=t.startPoll.bind(t),t.stopPoll=t.stopPoll.bind(t),t._updatePoll=t._updatePoll.bind(t),r.on("play",t.startPoll),r.on("pause",t.stopPoll),r.on("ended",t.stopPoll),r.on("timeupdate",t._handleTimeUpdate),r.on(X.EVENT.AD_START,t._handePollAdStart),r.on(X.EVENT.AD_END,t._handlePollAdEnded),t}return h(n,e.Plugin),J(n,[{key:"_handePollAdStart",value:function(){var e=this.props.player;e.off("play",this.startPoll),e.off("timeupdate",this._handleTimeUpdate),this.stopPoll()}},{key:"_handlePollAdEnded",value:function(){var e=this.props.player;e.on("timeupdate",this._handleTimeUpdate),e.on("play",this.startPoll)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player,t=void 0;try{t=e.tech_.el_.videoHeight}catch(e){return}this.state.last_video_height!==t&&this.setState({last_video_height:t})}},{key:"startPoll",value:function(){this.pollInterval&&this.stopPoll(),this.pollInterval=setInterval(this._updatePoll,this.props.pollInterval)}},{key:"stopPoll",value:function(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)}},{key:"dispose",value:function(){var e=this.props.player;this.stopPoll(),e.off("play",this.startPoll),e.off("pause",this.stopPoll),e.off("ended",this.stopPoll),e.off("timeupdate",this._handleTimeUpdate),e.off(X.EVENT.AD_START,this._handePollAdStart),e.off(X.EVENT.AD_END,this._handlePollAdEnded)}},{key:"_updatePoll",value:function(){var e=this.props,t=e.track,n=e.player,r=this.currentQuality(),i=Z[r],o=0,a=0;try{var s=n.buffered(),u=n.currentTime();o=(o=s.end(s.length-1)-u)>=0?Math.floor(o):0}catch(e){}try{a=n.tech_.el_.webkitDroppedFrameCount?n.tech_.el_.webkitDroppedFrameCount:n.tech_.el_.getVideoPlaybackQuality().droppedVideoFrames}catch(e){}ee>=parseInt(n.duration()/3)?this.dispose():(ee++,t({evt:O.poll,cqua:i,bft:o,drf:a}))}},{key:"currentQuality",value:function(){var e=this.state.last_video_height;return e>=1080?1080:e>=720?720:e>=480?480:e>=360?360:e>=240?240:144}}]),n}();te.defaultProps={pollInterval:6e3};var ne=function(e,t){new te({player:e,track:t})},re=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ie=e.playerconfig.DEFAULT,oe={preroll:1,midroll:2,postroll:3,interactive:4},ae=function(t){function n(e){d(this,n);var t=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),r=t.props.player;return t.aidx=0,t.trackStartAd=t.trackStartAd.bind(t),t._handleReplay=t._handleReplay.bind(t),r.on(ie.EVENT.VAST_AD_START,t.trackStartAd),r.on(ie.EVENT.VPAID_AD_IMPRESSION,t.trackStartAd),r.on(ie.EVENT.PLAYER_REPLAY_CONTEND,t._handleReplay),r.on(ie.EVENT.USER_REPLAY_CONTENT,t._handleReplay),t}return p(n,e.Plugin),re(n,[{key:"trackStartAd",value:function(){++this.aidx;var e=this.props,t=e.player,n=e.track,r=t.vastAd.vastResponse(),i=t.vastAd.adPosition(),o=r.ads[0].id,a="-1";r.campains.length>0&&(a=r.campains[0]?r.campains[0]:"-1");var s="-1";i&&(s=oe[i]),n({evt:O.adstart,bid:o,cam:a,atype:s,aidx:this.aidx})}},{key:"_handleReplay",value:function(){this.aidx=0}}]),n}(),se=function(e,t){new ae({player:e,track:t})},ue=e.playerconfig.DEFAULT,le=function(e,t){function n(){if(a.length){for(var n=0,r=0,o=0,s=0,u=0,l=a.length;a.length;){var c=a.shift();n+=c.bitreceive,r+=c.roundTrip,o+=c.apb,s=c.tbf,u=c.trq}var h=n;r>1e3&&(h=1e3*h/r);var d=0,f=0;try{var p=e.buffered(),v=e.currentTime();d=(d=p.end(p.length-1)-v)>=0?Math.floor(d):0}catch(e){}try{f=e.tech_.el_.webkitDroppedFrameCount?e.tech_.el_.webkitDroppedFrameCount:e.tech_.el_.getVideoPlaybackQuality().droppedVideoFrames}catch(e){}var y=f-i;i=f,t({bft:d,nbf:l,size:Math.ceil(n/8),tbf:s,trq:u,drf:y,apb:Math.round(o),evt:O["bit-receive"],bw:Math.round(h)})}}function r(e,t){var r=t.data,i=r.stats,o=r.frag,s=8*i.total,u=i.tbuffered-i.trequest;a.push({bitreceive:s,roundTrip:u,tbf:Math.ceil(i.tbuffered),trq:Math.ceil(i.trequest),apb:o.duration}),n()}var i=0;e.on("loadedmetadata",function(){o&&o.off(ue.EVENT.HLS_FRAG_BUFFERED,r),(o=e.tech_).on(ue.EVENT.HLS_FRAG_BUFFERED,r)});var o=void 0,a=[]},ce=function(e,t){var n=void 0,r=void 0;e.one("play",function(){n=Date.now()}),e.one("playing",function(){r=Date.now();var e=0;n&&r&&(e=(e=r-n)>=0?e:0),t({tts:e,evt:O.timetostart})})},he=e.playerconfig.DEFAULT,de=function(e,t){e.on(he.EVENT.PLAYER_ERROR,function(e,n){var r="-1";switch(n.code){case he.ERROR.ERROR_100.code:r=1;break;default:r=n.code}t({evt:O.error,err:r})}),e.one("play",function(){e.setTimeout(function(){var n=e.currentTime();e.paused()||0!==n||t({evt:O.error,err:2})},1e4)})},fe=function(e,t){e.on("waiting",function(){var n=e.currentTime().toFixed(1);t({ctime:n,evt:O.waiting})})},pe=e.playerconfig.DEFAULT,ve=function(e,t){function n(e,t){t({vlm:e})}var r,i;e.on("ready",function(){r=Math.ceil(100*e.volume()),e.muted()&&(r=0)}),e.on(pe.EVENT.USER_CHANGE_MUTE,function(o,a){r=Math.ceil(100*e.volume()),a?(i=r+":0",r=0):i="0:"+r,n(i,t)}),e.on(pe.EVENT.TRACKING_VOLUME,function(e,o){r!==o?(i=r+":"+o,r=o,n(i,t)):r=o})},ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),me=e.playerconfig.DEFAULT,_e=function(t){function n(e){v(this,n);var t=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.state={last_currentTime:0};var r=t.props.player;return t.pdu=0,t._handeAdStart=t._handeAdStart.bind(t),t._handleRestorePlayback=t._handleRestorePlayback.bind(t),t.handleCalculatePdu=t.handleCalculatePdu.bind(t),t.handleUpdateFlagPdu=t.handleUpdateFlagPdu.bind(t),t._handleReplay=t._handleReplay.bind(t),r.on("timeupdate",t.handleCalculatePdu),r.on("seeking",t.handleUpdateFlagPdu),r.on(me.EVENT.AD_START,t._handeAdStart),r.on(me.EVENT.AD_RESTORED_PLAYBACK,t._handleRestorePlayback),r.on(me.EVENT.PLAYER_REPLAY_CONTEND,t._handleReplay),r.on(me.EVENT.USER_REPLAY_CONTENT,t._handleReplay),t}return m(n,e.Plugin),ye(n,[{key:"_handleReplay",value:function(){this.pdu=0,this.setState({last_currentTime:0})}},{key:"_handeAdStart",value:function(){var e=this.props.player;e.off("timeupdate",this.handleCalculatePdu),e.off("seeking",this.handleUpdateFlagPdu)}},{key:"_handleRestorePlayback",value:function(){var e=this.props.player;e.on("timeupdate",this.handleCalculatePdu),e.on("seeking",this.handleUpdateFlagPdu)}},{key:"handleCalculatePdu",value:function(){var e=this.props.player,t=this.state.last_currentTime,n=e.currentTime();if(this.setState({last_currentTime:n}),n<=t)this.setState({last_currentTime:n});else{var r=n-t;r>2||(this.pdu+=r,this.updatePDU())}}},{key:"handleUpdateFlagPdu",value:function(){var e=this,t=this.props.player;t.off("timeupdate",this.handleCalculatePdu),t.one("seeked",function(){var n=t.currentTime();e.setState({last_currentTime:n}),t.on("timeupdate",e.handleCalculatePdu)})}},{key:"updatePDU",value:function(){this.props.updatePDU(Math.round(this.pdu))}}]),n}(),be=function(e,t){new _e({player:e,updatePDU:t})},ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),we=e.playerconfig.DEFAULT,Te=function(t){function r(e){_(this,r);var t=b(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));t.waitTrack=[];var n=t,i=t.props,o=i.player,a=i.defaultParams,s=i.ref,u=i.onlyAds,l=void 0!==u&&u,c=o.options().params,h=c.pid||k(),d=s?decodeURIComponent(s):document.referrer?document.referrer:location.href,f=document.location.href;/adminplayer\.sohatv\.vn/.test(f)&&(f=d),window.top!=window.self&&(f=d);var p=f.match(/(http[s]?:\/\/)?([^\/\s]+)(\/.*)/),v="-1",y="-1",m="-1";p&&p.length&&(v=p[3],y=p[2],m=P[y]||"-1");var g=l?0:o.options().params.live?2:1,E=c.vtype||"-1",w=c.key||"-1";return o.options().params.live&&(d+="&vid="+o.options().params.v),t.state={params:ge({key:w,dmn:y,dmnid:m,path:v,vtype:E,vtarget:g,ref:d,vid:c.vid||c.v||c.file||c.mp4||c.m3u8||"-1",bw:"-1",pid:h,vdu:"-1",ctime:"-1",guid:"-1",ptype:1,pdu:0},a)},t.track_poll=0,t.updatePDU=t.updatePDU.bind(t),t.track=t.track.bind(t),t._handleLoadedmetadata=t._handleLoadedmetadata.bind(t),t._handleTimeUpdate=t._handleTimeUpdate.bind(t),t._handleLastBitrate=t._handleLastBitrate.bind(t),t._handleReplay=t._handleReplay.bind(t),o.on("loadedmetadata",t._handleLoadedmetadata),o.one("play",function(){o.on("timeupdate",n._handleTimeUpdate)}),o.on(we.EVENT.PLAYER_ENDED_CONTEND,function(){o.off("play",n._handleReplay),o.on("play",n._handleReplay)}),M(o,t.track),$(o,t.track),C(o,t.track),D(o,t.track),x(o,t.track),U(o,t.track),F(o,t.track),q(o,t.track),B(o,t.track),H(o,t.track),W(o,t.track),ne(o,t.track),se(o,t.track),le(o,t.track),ce(o,t.track),de(o,t.track),fe(o,t.track),ve(o,t.track),be(o,t.updatePDU),t}return g(r,e.Plugin),Ee(r,[{key:"getDefaultProps",value:function(){return{track_url:"//lg1.logging.admicro.vn/video_track?",defaultParams:{}}}}]),Ee(r,[{key:"_handleReplay",value:function(){if(!this.props.player.vastAd){var e=this.state.params;e.pid=k(),e.pdu=0,e.ptype=2}}},{key:"updatePDU",value:function(e){this.state.params.pdu=e}},{key:"_trackWaitEvent",value:function(){for(var e=this.waitTrack;e.length;){var t=e.shift();this.track(t)}}},{key:"track",value:function(e){var t=this.props.player,n=e.evt;if(!(14===n&&++this.track_poll>=parseInt(t.duration()/3))){if(!this.isFirstPlay&&20!==e.evt)switch(n){case O.play:this.isFirstPlay=!0,setTimeout(this._trackWaitEvent.bind(this),100);break;case O.load:break;default:return void this.waitTrack.push(e)}var r=this.state.params,i=this.props.track_url,o=ge({},r,e),a=T(o);(new Image).src=i+a}}},{key:"_handleLoadedmetadata",value:function(){var e=this.props.player,t=this.state.params,r=e.duration();"-1"===t.vdu&&r>0&&r!==1/0&&(t.vdu=n(r)),this.tech_&&this.tech_.off(we.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate),this.tech_=e.tech_,this.tech_.on(we.EVENT.HLS_FRAG_BUFFERED,this._handleLastBitrate)}},{key:"_handleTimeUpdate",value:function(){var e=this.props.player;if(!e.vastAd){var t=this.state.params,n=e.currentTime();t.ctime=n.toFixed(1)}}},{key:"_handleLastBitrate",value:function(e,t){var n=t.data,r=this.state.params,i=Math.round(8*n.stats.total*1e3/(n.stats.tbuffered-n.stats.trequest));r.bw=i}}]),r}(),ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};E.registerPlugin("vcTrackingPlugin",function(e){new Te(ke({},e,{player:this}))})})}();/**
 * replayCountDown - v1.0.0 - 15:53:10 18-06-2018
 * Author: 
 */

!function(){var e=void 0;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],n):n(t.Kenh14PlayerCore,t.React)}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r="default"in e?e.default:e,o="default"in t?t.default:t,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e.playerconfig.DEFAULT,u=function(e){function r(e){n(this,r);var t=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));t.state={isReplay:!1};var a=t.props.player;return t.handleEnded=t.handleEnded.bind(t),t.handleClick=t.handleClick.bind(t),t.handlePlay=t.handlePlay.bind(t),t.replay=t.replay.bind(t),t.oriPause=a.pause.bind(a),t}return a(r,t.Component),l(r,[{key:"componentDidMount",value:function(){var e=this.props.player,t=this;e.options().params.postroll?(e.on(s.EVENT.AD_ENDED_POSTROLL,this.handleEnded),e.on("postrollignore",function(){e.off(s.EVENT.AD_ENDED_POSTROLL,t.handleEnded),e.on(s.EVENT.PLAYER_ENDED_CONTEND,t.handleEnded)})):e.on(s.EVENT.PLAYER_ENDED_CONTEND,this.handleEnded),e.on("play",this.handlePlay)}},{key:"getRectRatioInview",value:function(){var e=this.props.player;try{var t=e.el_.getBoundingClientRect(),n=1;return t.top<0?n=t.height+t.top>0?(t.height+t.top)/t.height:0:t.top+t.height>window.screen.height&&(n=t.top<window.screen.height?(window.screen.height-t.top)/t.height:0),n=n.toFixed(2)}catch(e){}}},{key:"isInview",value:function(){var e=this.getRectRatioInview();return!(!e||e<.6)}},{key:"handleEnded",value:function(){if(this.isInview()&&!this.oriPlay){var e=this.props.player;this.oriPause_=this.oriPause;var t=this;this.oriPlay=function(){clearTimeout(t.countDownTimeout_),t.setState({isReplay:!1}),e.trigger(s.EVENT.PLAYER_REPLAY_CONTEND),e.currentTime(0),e.pause=this.oriPause_,e.play(),delete this.oriPlay,delete this.oriPause_},e.pause=function(){clearTimeout(t.countDownTimeout_),t.setState({isReplay:!1})},this.setState({isReplay:!0}),this.countDownTimeout_=setTimeout(this.replay,1800)}}},{key:"handlePlay",value:function(){var e=this.props.player;this.state.isReplay&&(e.currentTime(0),e.trigger(s.EVENT.PLAYER_REPLAY_CONTEND),clearTimeout(this.countDownTimeout_),this.setState({isReplay:!1}),e.pause=this.oriPause_,delete this.oriPlay,delete this.oriPause_)}},{key:"replay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isInview()||e)&&this.oriPlay()}},{key:"className",value:function(){var e=this.props.className;return[e].join(" ")}},{key:"handleClick",value:function(){this.replay(!0)}},{key:"render",value:function(){if(!this.state.isReplay)return null;var e=this.className();return o.createElement("div",{className:"Kenh14Player-replay-countdown",onClick:this.handleClick},o.createElement("div",{className:e},o.createElement("div",{className:"label"},"Tự động phát lại"),o.createElement("div",{className:"line-mask line-mask-0"},o.createElement("div",{className:"line"})),o.createElement("div",{className:"line-mask line-mask-1"},o.createElement("div",{className:"line"})),o.createElement("div",{className:"replay"})))}}]),r}();u.propTypes={player:e.PropTypes.object.isRequired,className:e.PropTypes.string},u.defaultProps={className:"replay-countdown"};r.registerPlugin("replayCountDown",function(){var e=this;!0===e.options().params.replay&&e.one("ready",function(){var t=o.createElement(u,{key:"replayCountDown",player:e});e.container.addChild(t)})})})}();/**
 * scrollPlugin - v0.0.1 - 15:35:37 08-01-2020
 * Author: TungTT
 */

!function(){var e=void 0;!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("playercore")):"function"==typeof e&&e.amd?e(["playercore"],t):t(i.Kenh14PlayerCore)}(this,function(e){"use strict";function i(){document.removeEventListener("click",i),l=!0}function t(){g.map(function(e){try{e.pause()}catch(e){}})}function n(e){g.map(function(i){try{i.id_!==e&&i.pause()}catch(e){}})}var o="default"in e?e.default:e,r=e.playerconfig.DEFAULT,d=void 0,a=!1,c=void 0,l=!1,u=void 0,s=void 0,p=void 0,f=void 0;document.addEventListener("click",i),window.performance?0==performance.navigation.type&&document.referrer&&(l=!0):document.referrer&&(l=!0);var g=[],h=!1;try{window.top!==window.self&&(h=!0)}catch(e){h=!0}o.registerPlugin("scrollPlugin",function(){function i(){if(C){if(H){if(H.clientHeight&&m)return void o.pause();if(!H.clientHeight&&!m)return void o.pause()}if(L){if(L.clientHeight&&!B)return void o.pause();if(!L.clientHeight&&B)return void o.pause()}var e=void 0,i=void 0;try{e=(i=o.el_.getBoundingClientRect()).top,c.id===o.id_&&(c.position||(c.position=e),a=e>c.position,c.position=e)}catch(e){return}e>window.screen.height/2-i.height&&e<window.screen.height/2&&(d=o.id_),e>0&&e+i.height<window.innerHeight&&(u.id_===o.id_&&(d=o.id_),a||p.id_!==o.id_||(d=o.id_));try{if(h&&window.frameElement.id){var t=window.top.document.getElementById(window.frameElement.id).getBoundingClientRect();t.top<0?t.height+t.top<0&&(d=""):t.top+t.height>window.screen.height&&t.top<window.screen.height&&(d="")}}catch(e){}if(o.id_==d)if(e+i.height/2<0||e+i.height/2>window.innerHeight){if(y)return;o.pause(),d=null,w=!1}else{if(o.trigger("player:viewactive"),w||y)return;l||(o.muted(!0),o.trigger(r.EVENT.USER_CHANGE_MUTE,!0)),n(o.id_),o.play()}else y||(w=!1,o.pause())}}var o=this,v=o.options().params;if(v.scrollenable);else if(e.agent.isMobile||!1===v.scrollplay||"false"===v.scrollplay)return;g.push(o);var m=!0;v.autoplay&&(d=o.id_);var y=!1,w=!1,E=o.el_.getBoundingClientRect();u||(u=o,s=E.top),p||(p=o,f=E.top),E.top<s&&(u=o,s=E.top),E.top>f&&(p=o,f=E.top),o.on("user:pause",function(){y=!0}),o.on("site:pause",function(){w=!0}),o.on("play",function(){y=!1,w=!1}),c||(c={id:o.id_}),o.on("play",function(){var e=document.getElementById("overlay-animation");e.classList.add("playing"),o.setTimeout(function(){e.classList.remove("playing")},200)});var _=document.getElementsByClassName("light-box-content"),H=void 0;_&&_[0]&&((H=_[0]).addEventListener("scroll",i),H.clientHeight&&(t(),m=!1));var L=document.getElementById("admCrollNative"),B=!1;L&&(L.addEventListener("scroll",i),L.clientHeight&&(t(),B=!0)),window.addEventListener("scroll",i),setTimeout(i,0);var C=!1;o.on("ready",function(){C=!0})})})}();/**
 * kinghubAdmicroADSPlugin - v1.0.0 - 13:06:59 05-03-2020
 * Author: theanh_htp135
 */

!function(){var n=void 0;!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("playercore")):"function"==typeof n&&n.amd?n(["playercore"],e):e(o.Kenh14PlayerCore)}(this,function(n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=(function(){function n(n){this.value=n}function o(o){function e(a,i){try{var r=o[a](i),d=r.value;d instanceof n?Promise.resolve(d.value).then(function(n){e("next",n)},function(n){e("throw",n)}):t(r.done?"return":"normal",r.value)}catch(n){t("throw",n)}}function t(n,o){switch(n){case"return":a.resolve({value:o,done:!0});break;case"throw":a.reject(o);break;default:a.resolve({value:o,done:!1})}(a=a.next)?e(a.key,a.arg):i=null}var a,i;this._invoke=function(n,o){return new Promise(function(t,r){var d={key:n,arg:o,resolve:t,reject:r,next:null};i?i=i.next=d:(a=i=d,e(n,o))})},"function"!=typeof o.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(n){return this._invoke("next",n)},o.prototype.throw=function(n){return this._invoke("throw",n)},o.prototype.return=function(n){return this._invoke("return",n)}}(),""),t=0,a=!1,i=0,r=-1,d="",c=-1,h=-1;try{void 0!==window._chkPrLink&&(a=window._chkPrLink)}catch(n){}try{void 0!==window.admtvcPgid&&(d=window.admtvcPgid())}catch(n){}var s=void 0;try{s=top.document.URL}catch(n){s=window.location!=window.parent.location?document.referrer:document.location.href}n.registerPlugin("kinghubAdmicroADSPlugin",function(n){function v(n){for(var o=window.location.search.substring(1).split("&"),e=0;e<o.length;e++){var t=o[e].split("=");if(t[0]==n)return t[1]}return!1}var u=this;if("undefined"!=u.mediaInfo.vast&&""!=u.mediaInfo.vast&&void 0!=u.mediaInfo.vast)return decodeURIComponent(u.mediaInfo.vast);var p=!1;try{window.top!==window.self&&window.top.location!==window.self.location&&(p=!0)}catch(n){p=!0}h=n.position;var l=[];l.dantri=5939,l.kenh14=5938,l.genk=5940,l.gamek=475198,l.afamily=5942,l.autopro=5944,l.cafef=5943,l.linkhay=5941,l.giadinh=5945,l[71]=2657,l.sohanews=5818,l.soha=5818,l.channelvn=2657,l.cafebiz=5943,l.vcmedia="vcmedia",l.thegioivanhoa=6703,l.phim14=7692,l["beta.autopro"]=5944,l.vtv=23260,l.ttvn=25438,l.thanhnien=37079,l.docbao=7493,l.thethaovanhoa=502991,l.anninhthudo=16834,l.bongda24h=32159,l.bongdanet=11227,l.laodong=10698,l.vtc=6300,l.tuoitre=488052,l.webtretho=501452,l.toquoc=512260,l.thethao247=514470,l.sport5=508721;var m=[];m.webtretho=501451,m.kenh14=2656,m.dantri=2657,m.autopro=2760,m.afamily=2763,m.genk=2658,m.gamek=475197,m.cafef=2661,m.cafebiz=2661,m.giadinh=2971,m.libero=4298,m.nld=2790,m.phapluattp=2787,m.phapluattp=2787,m.sannhac=2762,m.socnhi=3034,m.sohanews=2761,m.soha=2761,m.suckhoedoisong=2972,m.vneconomy=3385,m["beta.autopro"]=2760,m.vtv=6301,m.ttvn=25437,m.thanhnien=37079,m.docbao=7493,m.thethaovanhoa=502990,m.anninhthudo=16834,m.bongda24h=32159,m.bongdanet=11227,m.laodong=10698,m.ole=42329,m.go=42341,m.tintuc=42331,m.lichthidau=42334,m.docbaogiay=42337,m.vntinnhanh=42338,m.tuoitre=488051,m.ale=42340,m.bongda=42333,m.vtc=6300,m.sggp=475266,m.saigondautu=477879,m.sggpnews=477878,m.toquoc=512259,m.thethao247=514469,m.sport5=508720;var f=new function(){this.creatInfo=function(){var n=location.hostname;if(p)try{n=s.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2]}catch(o){n=location.ancestorOrigins[0]}n=n.replace("http://",""),n=n.replace("https://",""),n=n.replace("http://www",""),n=n.replace("https://www",""),n=n.replace(".com",""),n=n.replace(".vn",""),n=n.replace(".net",""),n=n.replace(".org",""),n=n.replace(".info","");var o=(n=n.replace(".edu","")).split(".");o.length>1&&(n=o[1]),this.getZoneID=function(n){var o=document.domain;return u.mediaInfo.isMobile?"worldcup.dantri.com.vn"==o?"493141":"worldcup.kenh14.vn"==o?"493143":"worldcup.soha.vn"==o?"493145":"worldcup.vtv.vn"==o?"493147":"worldcup.tienphong.vn"==o?"493149":"herewego.kenh14.vn"==o?"500992":l[n]?l[n]:"0":"herewego.kenh14.vn"==o?"500991":"worldcup.dantri.com.vn"==o?"493140":"worldcup.kenh14.vn"==o?"493142":"worldcup.soha.vn"==o?"493144":"worldcup.vtv.vn"==o?"493146":"worldcup.tienphong.vn"==o?"493148":m[n]?m[n]:"0"},void 0!==u.mediaInfo._admParamTvc&&""!=u.mediaInfo._admParamTvc?this.admParam=u.mediaInfo._admParamTvc:this.admParam="0;0;0;0",this.zoneId=this.getZoneID(n),void 0!==u.mediaInfo.tag&&""!=u.mediaInfo.tag&&(this.tag=u.mediaInfo.tag),void 0!==u.mediaInfo.vid&&""!=u.mediaInfo.vid?this.videoID=u.mediaInfo.vid:this.videoID=u.mediaInfo.file,void 0!==u.mediaInfo.domain&&""!=u.mediaInfo.domain?this.domain=u.mediaInfo.domain:this.domain=s.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2],void 0!==u.mediaInfo.pathname&&""!=u.mediaInfo.pathname?this.pathname=u.mediaInfo.pathname:this.pathname=s.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[3],this.domainPath=s.split("//")[1]}};if(u.mediaInfo.pid&&(r=u.mediaInfo.pid),"undefined"==u.mediaInfo.replay||!u.mediaInfo.replay||0!=i||u.mediaInfo.boxVideoID){if(0!=i||!u.mediaInfo.nopre)return function(){function n(){return void 0!==u.mediaInfo.vast?(i={url:decodeURIComponent(u.mediaInfo.vast)}).url:0==a?(p=p.split(";"),0==(s=p[0])&&(s=-1),m&&(s=549606),0!=v("_bid")&&(s=v("_bid")),"herewego.kenh14.vn"==location.hostname?null:("wechoice.vn"==location.hostname&&(s=547775),-1!=location.href.indexOf("vtv.vn/trong-nuoc")?null:(i={url:"//sspapi.admicro.vn/ssp_request/video?u="+encodeURIComponent(f.domainPath)+"&z="+f.zoneId+"&p=1&w=650&h=300"+d+"&pid="+r+"&tags="+t+"&adstype="+h+"&vtype="+c+"&vid="+encodeURIComponent(u.mediaInfo.vid)+"&bannerlimit="+l+"&bannerid="+s+"&ord="+Date.now()}).url)):void 0}var i,s,p="";f.creatInfo();var l=5;p=f.admParam,""!=e&&null!=e&&(p=e),void 0!=o(u.options().params.vtype)&&null!=u.options().params.vtype&&""!=u.options().params.vtype&&(c=u.options().params.vtype),f.tag||void 0!==f.tag?t=f.tag:(t=0,u.on("updateMediaInfo",function(){t=u.mediaInfo.tag}));var m=!1;return void 0!==u.mediaInfo.isads&&"false"==u.mediaInfo.isads?"":u.mediaInfo.isMobile?(p=p.split(";"),0==(s=p[0])&&(s=-1),m&&(s=549606),0!=a?void(t=0):(0!=v("_bid")&&(s=v("_bid")),"herewego.kenh14.vn"==location.hostname?null:("wechoice.vn"==location.hostname&&(s=547775),-1!=location.href.indexOf("vtv.vn/trong-nuoc")?null:(i={url:"//sspapi.admicro.vn/ssp_request/video?u="+encodeURIComponent(f.domainPath)+"&z="+f.zoneId+"&p=1&w=650&h=300"+d+"&pid="+r+"&tags="+t+"&adstype="+h+"&vtype="+c+"&vid="+encodeURIComponent(u.mediaInfo.vid)+"&bannerlimit="+l+"&bannerid="+s+"&ord="+Date.now()},void 0!==u.mediaInfo.vast&&(i={url:decodeURIComponent(u.mediaInfo.vast)}),i.url)))):n()}();i=1}else i=1})})}();/**
 * resizePlugin - v1.0.0 - 09:45:56 02-10-2018
 * Author: cuongtt
 */

!function(){var e=void 0;!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore")):"function"==typeof e&&e.amd?e(["playercore"],n):n(i.Kenh14PlayerCore)}(this,function(e){"use strict";(e=e&&e.hasOwnProperty("default")?e.default:e).registerPlugin("resizePlugin",function(){var e=this;e.options().params.minimal&&e.addClass("Kenh14Player-minimal")})})}();/**
 * locationPlugin - v1.0.0 - 16:17:50 25-06-2019
 * Author: 
 */

!function(){var t=void 0;!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore")):"function"==typeof t&&t.amd?t(["playercore"],n):n(e.Kenh14PlayerCore)}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return null==t?"":""+t}function i(t,e,n){t.forEach(function(t){e[t]&&(n[t]=e[t])})}function a(t,e,n){function o(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}for(var i="string"!=typeof e?[].concat(e):e.split(".");i.length>1;){if(r())return{};var a=o(i.shift());!t[a]&&n&&(t[a]=new n),t=t[a]}return r()?{}:{obj:t,k:o(i.shift())}}function s(t,e,n){var o=a(t,e,Object);o.obj[o.k]=n}function l(t,e,n,o){var r=a(t,e,Object),i=r.obj,s=r.k;i[s]=i[s]||[],o&&(i[s]=i[s].concat(n)),o||i[s].push(n)}function u(t,e){var n=a(t,e),o=n.obj,r=n.k;if(o)return o[r]}function c(t,e,n){for(var o in e)o in t?"string"==typeof t[o]||t[o]instanceof String||"string"==typeof e[o]||e[o]instanceof String?n&&(t[o]=e[o]):c(t[o],e[o],n):t[o]=e[o];return t}function p(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function f(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return J[t]}):t}function h(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}return t}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):h(t,e))}function v(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}return t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):v(t,e))}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t){return t.charAt(0).toUpperCase()+t.slice(1)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(){var t={};return et.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:nt[e.fc]}})}),t}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}return t}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):P(t,e))}function L(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}function N(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}return t}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):N(t,e))}function U(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};return t[1]&&(e.defaultValue=t[1]),t[2]&&(e.tDescription=t[2]),e},interpolation:{escapeValue:!0,format:function(t,e,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}}}function D(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t}function H(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}return t}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):H(t,e))}function K(){}var q="default"in t?t.default:t,B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},z={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){var o;console&&console[t]&&(o=console)[t].apply(o,n(e))}},$=new(function(){function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.init(n,o)}return t.prototype.init=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||z,this.options=e,this.debug=e.debug},t.prototype.setDebug=function(t){this.debug=t},t.prototype.log=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)},t.prototype.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)},t.prototype.error=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")},t.prototype.deprecate=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)},t.prototype.forward=function(t,e,n,o){return o&&!this.debug?null:("string"==typeof t[0]&&(t[0]=""+n+this.prefix+" "+t[0]),this.logger[e](t))},t.prototype.create=function(e){return new t(this.logger,B({prefix:this.prefix+":"+e+":"},this.options))},t}()),W=function(){function t(){o(this,t),this.observers={}}return t.prototype.on=function(t,e){var n=this;t.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})},t.prototype.off=function(t,e){var n=this;this.observers[t]&&this.observers[t].forEach(function(){if(e){var o=n.observers[t].indexOf(e);o>-1&&n.observers[t].splice(o,1)}else delete n.observers[t]})},t.prototype.emit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.observers[t]&&[].concat(this.observers[t]).forEach(function(t){t.apply(void 0,n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(e){var o;e.apply(e,(o=[t]).concat.apply(o,n))})},t}(),J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},G=function(t){function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};g(this,e);var r=d(this,t.call(this));return r.data=n||{},r.options=o,r}return y(e,t),e.prototype.addNamespaces=function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)},e.prototype.removeNamespaces=function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)},e.prototype.getResource=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).keySeparator||this.options.keySeparator;void 0===o&&(o=".");var r=[t,e];return n&&"string"!=typeof n&&(r=r.concat(n)),n&&"string"==typeof n&&(r=r.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(r=t.split(".")),u(this.data,r)},e.prototype.addResource=function(t,e,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[t,e];n&&(a=a.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=e,e=(a=t.split("."))[1]),this.addNamespaces(e),s(this.data,a,o),r.silent||this.emit("added",t,e,n,o)},e.prototype.addResources=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"==typeof n[r]&&this.addResource(t,e,r,n[r],{silent:!0});o.silent||this.emit("added",t,e,n)},e.prototype.addResourceBundle=function(t,e,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(o=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var l=u(this.data,a)||{};o?c(l,n,r):l=_({},l,n),s(this.data,a,l),i.silent||this.emit("added",t,e,n)},e.prototype.removeResourceBundle=function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)},e.prototype.hasResourceBundle=function(t,e){return void 0!==this.getResource(t,e)},e.prototype.getResourceBundle=function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?_({},this.getResource(t,e)):this.getResource(t,e)},e.prototype.toJSON=function(){return this.data},e}(W),X={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,o,r){var i=this;return t.forEach(function(t){i.processors[t]&&(e=i.processors[t].process(e,n,o,r))}),e}},Y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z=function(t){function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(this,e);var r=m(this,t.call(this));return i(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],n,r),r.options=o,r.logger=$.create("translator"),r}return x(e,t),e.prototype.changeLanguage=function(t){t&&(this.language=t)},e.prototype.exists=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res},e.prototype.extractFromKey=function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var o=e.keySeparator||this.options.keySeparator||".",r=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var i=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(i[0])>-1)&&(r=i.shift()),t=i.join(o)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}},e.prototype.translate=function(t,e){var n=this;if("object"!==(void 0===e?"undefined":Q(e))&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),void 0===t||null===t||""===t)return"";"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=[t]);var o=e.keySeparator||this.options.keySeparator||".",r=this.extractFromKey(t[t.length-1],e),i=r.key,a=r.namespaces,s=a[a.length-1],l=e.lng||this.language,u=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(u){var c=e.nsSeparator||this.options.nsSeparator;return s+c+i}return i}var p=this.resolve(t,e),f=p&&p.res,h=p&&p.usedKey||i,g=Object.prototype.toString.apply(f),d=["[object Number]","[object Function]","[object RegExp]"],y=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,v="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(f&&v&&d.indexOf(g)<0&&(!y||"[object Array]"!==g)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,f,e):"key '"+i+" ("+this.language+")' returned an object instead of string.";if(e.keySeparator||this.options.keySeparator){var b="[object Array]"===g?[]:{};for(var m in f)if(Object.prototype.hasOwnProperty.call(f,m)){var x=""+h+o+m;b[m]=this.translate(x,Y({},e,{joinArrays:!1,ns:a})),b[m]===x&&(b[m]=f[m])}f=b}}else if(y&&"[object Array]"===g)(f=f.join(y))&&(f=this.extendTranslation(f,t,e));else{var w=!1,O=!1;this.isValidLookup(f)||void 0===e.defaultValue||(w=!0,f=e.defaultValue),this.isValidLookup(f)||(O=!0,f=i);var j=e.defaultValue&&e.defaultValue!==f&&this.options.updateMissing;if(O||w||j){this.logger.log(j?"updateKey":"missingKey",l,s,i,j?e.defaultValue:f);var S=[],k=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&k&&k[0])for(var P=0;P<k.length;P++)S.push(k[P]);else"all"===this.options.saveMissingTo?S=this.languageUtils.toResolveHierarchy(e.lng||this.language):S.push(e.lng||this.language);var R=function(t,o){n.options.missingKeyHandler?n.options.missingKeyHandler(t,s,o,j?e.defaultValue:f,j,e):n.backendConnector&&n.backendConnector.saveMissing&&n.backendConnector.saveMissing(t,s,o,j?e.defaultValue:f,j,e),n.emit("missingKey",t,s,o,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&e.count?S.forEach(function(t){n.pluralResolver.getPluralFormsOfKey(t,i).forEach(function(e){return R([t],e)})}):R(S,i))}f=this.extendTranslation(f,t,e),O&&f===i&&this.options.appendNamespaceToMissingKey&&(f=s+":"+i),O&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f},e.prototype.extendTranslation=function(t,e,n){var o=this;n.interpolation&&this.interpolator.init(Y({},n,{interpolation:Y({},this.options.interpolation,n.interpolation)}));var r=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(r=Y({},this.options.interpolation.defaultVariables,r)),t=this.interpolator.interpolate(t,r,n.lng||this.language),!1!==n.nest&&(t=this.interpolator.nest(t,function(){return o.translate.apply(o,arguments)},n)),n.interpolation&&this.interpolator.reset();var i=n.postProcess||this.options.postProcess,a="string"==typeof i?[i]:i;return void 0!==t&&null!==t&&a&&a.length&&!1!==n.applyPostProcessor&&(t=X.handle(a,t,e,n,this)),t},e.prototype.resolve=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=void 0,r=void 0;return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!e.isValidLookup(o)){var i=e.extractFromKey(t,n),a=i.key;r=a;var s=i.namespaces;e.options.fallbackNS&&(s=s.concat(e.options.fallbackNS));var l=void 0!==n.count&&"string"!=typeof n.count,u=void 0!==n.context&&"string"==typeof n.context&&""!==n.context,c=n.lngs?n.lngs:e.languageUtils.toResolveHierarchy(n.lng||e.language);s.forEach(function(t){e.isValidLookup(o)||c.forEach(function(r){if(!e.isValidLookup(o)){var i=a,s=[i],c=void 0;l&&(c=e.pluralResolver.getSuffix(r,n.count)),l&&u&&s.push(i+c),u&&s.push(i+=""+e.options.contextSeparator+n.context),l&&s.push(i+=c);for(var p=void 0;p=s.pop();)e.isValidLookup(o)||(o=e.getResource(r,t,p,n))}})})}}),{res:o,usedKey:r}},e.prototype.isValidLookup=function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)},e.prototype.getResource=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.resourceStore.getResource(t,e,n,o)},e}(W),tt=function(){function t(e){w(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=$.create("languageUtils")}return t.prototype.getScriptPartFromCode=function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),this.formatLanguageCode(e.join("-")))},t.prototype.getLanguagePartFromCode=function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])},t.prototype.formatLanguageCode=function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(t){return t.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=O(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=O(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=O(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t},t.prototype.isWhitelisted=function(t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1},t.prototype.getFallbackCodes=function(t,e){if(!t)return[];if("string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t.default),n||[]},t.prototype.toResolveHierarchy=function(t,e){var n=this,o=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],i=function(t){t&&(n.isWhitelisted(t)?r.push(t):n.logger.warn("rejecting non-whitelisted language code: "+t))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(t))):"string"==typeof t&&i(this.formatLanguageCode(t)),o.forEach(function(t){r.indexOf(t)<0&&i(n.formatLanguageCode(t))}),r},t}(),et=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],nt={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}},ot=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(this,t),this.languageUtils=e,this.options=n,this.logger=$.create("pluralResolver"),this.rules=S()}return t.prototype.addRule=function(t,e){this.rules[t]=e},t.prototype.getRule=function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]},t.prototype.needsPlural=function(t){var e=this.getRule(t);return e&&e.numbers.length>1},t.prototype.getPluralFormsOfKey=function(t,e){var n=this,o=[],r=this.getRule(t);return r?(r.numbers.forEach(function(r){var i=n.getSuffix(t,r);o.push(""+e+i)}),o):o},t.prototype.getSuffix=function(t,e){var n=this,o=this.getRule(t);if(o){var r=o.noAbs?o.plurals(e):o.plurals(Math.abs(e)),i=o.numbers[r];this.options.simplifyPluralSuffix&&2===o.numbers.length&&1===o.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_"+i.toString():a():"v2"===this.options.compatibilityJSON||2===o.numbers.length&&1===o.numbers[0]?a():2===o.numbers.length&&1===o.numbers[0]?a():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: "+t),""},t}(),rt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},it=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.logger=$.create("interpolator"),this.init(e,!0)}return t.prototype.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1]&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t},this.escape=t.interpolation&&t.interpolation.escape||f),t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.prefix=e.prefix?p(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?p(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?p(e.nestingPrefix):e.nestingPrefixEscaped||p("$t("),this.nestingSuffix=e.nestingSuffix?p(e.nestingSuffix):e.nestingSuffixEscaped||p(")"),this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.resetRegExp()},t.prototype.reset=function(){this.options&&this.init(this.options)},t.prototype.resetRegExp=function(){var t=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(t,"g");var e=""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(e,"g");var n=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(n,"g")},t.prototype.interpolate=function(t,e,n){function o(t){return t.replace(/\$/g,"$$$$")}var i=this,a=void 0,s=void 0,l=void 0,c=function(t){if(t.indexOf(i.formatSeparator)<0)return u(e,t);var o=t.split(i.formatSeparator),r=o.shift().trim(),a=o.join(i.formatSeparator).trim();return i.format(u(e,r),a,n)};for(this.resetRegExp(),l=0;(a=this.regexpUnescape.exec(t))&&(s=c(a[1].trim()),t=t.replace(a[0],s),this.regexpUnescape.lastIndex=0,!(++l>=this.maxReplaces)););for(l=0;a=this.regexp.exec(t);){if("string"!=typeof(s=c(a[1].trim()))&&(s=r(s)),!s)if("function"==typeof this.options.missingInterpolationHandler){var p=this.options.missingInterpolationHandler(t,a);s="string"==typeof p?p:""}else this.logger.warn("missed to pass in variable "+a[1]+" for interpolating "+t),s="";if(s=o(this.escapeValue?this.escape(s):s),t=t.replace(a[0],s),this.regexp.lastIndex=0,++l>=this.maxReplaces)break}return t},t.prototype.nest=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0,i=void 0,a=rt({},n);for(a.applyPostProcessor=!1;o=this.nestingRegexp.exec(t);){if((i=e(function(t,e){if(t.indexOf(",")<0)return t;var n=t.split(",");t=n.shift();var o=n.join(",");o=(o=this.interpolate(o,a)).replace(/'/g,'"');try{a=JSON.parse(o),e&&(a=rt({},e,a))}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}.call(this,o[1].trim(),a),a))&&o[0]===t&&"string"!=typeof i)return i;"string"!=typeof i&&(i=r(i)),i||(this.logger.warn("missed to resolve "+o[1]+" for nesting "+t),i=""),t=t.replace(o[0],i),this.regexp.lastIndex=0}return t},t}(),at=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},st=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),lt=function(t){function e(n,o,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};R(this,e);var a=C(this,t.call(this));return a.backend=n,a.store=o,a.languageUtils=r.languageUtils,a.options=i,a.logger=$.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,i.backend,i),a}return E(e,t),e.prototype.queueLoad=function(t,e,n){var o=this,r=[],i=[],a=[],s=[];return t.forEach(function(t){var n=!0;e.forEach(function(e){var a=t+"|"+e;o.store.hasResourceBundle(t,e)?o.state[a]=2:o.state[a]<0||(1===o.state[a]?i.indexOf(a)<0&&i.push(a):(o.state[a]=1,n=!1,i.indexOf(a)<0&&i.push(a),r.indexOf(a)<0&&r.push(a),s.indexOf(e)<0&&s.push(e)))}),n||a.push(t)}),(r.length||i.length)&&this.queue.push({pending:i,loaded:{},errors:[],callback:n}),{toLoad:r,pending:i,toLoadLanguages:a,toLoadNamespaces:s}},e.prototype.loaded=function(t,e,n){var o=this,r=t.split("|"),i=st(r,2),a=i[0],s=i[1];e&&this.emit("failedLoading",a,s,e),n&&this.store.addResourceBundle(a,s,n),this.state[t]=e?-1:2,this.queue.forEach(function(n){l(n.loaded,[a],s),L(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(o.emit("loaded",n.loaded),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.queue=this.queue.filter(function(t){return!t.done})},e.prototype.read=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=arguments[5];return t.length?this.backend[n](t,e,function(s,l){s&&l&&o<5?setTimeout(function(){r.read.call(r,t,e,n,o+1,2*i,a)},i):a(s,l)}):a(null,{})},e.prototype.load=function(t,e,n){var o=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();var r=at({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var i=this.queueLoad(t,e,n);if(!i.toLoad.length)return i.pending.length||n(),null;r.allowMultiLoading&&this.backend.readMulti?this.read(i.toLoadLanguages,i.toLoadNamespaces,"readMulti",null,null,function(t,e){t&&o.logger.warn("loading namespaces "+i.toLoadNamespaces.join(", ")+" for languages "+i.toLoadLanguages.join(", ")+" via multiloading failed",t),!t&&e&&o.logger.log("successfully loaded namespaces "+i.toLoadNamespaces.join(", ")+" for languages "+i.toLoadLanguages.join(", ")+" via multiloading",e),i.toLoad.forEach(function(n){var r=n.split("|"),i=st(r,2),a=i[0],s=i[1],l=u(e,[a,s]);if(l)o.loaded(n,t,l);else{var c="loading namespace "+s+" for language "+a+" via multiloading failed";o.loaded(n,c),o.logger.error(c)}})}):i.toLoad.forEach(function(t){o.loadOne(t)})},e.prototype.reload=function(t,e){var n=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var o=at({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),o.allowMultiLoading&&this.backend.readMulti?this.read(t,e,"readMulti",null,null,function(o,r){o&&n.logger.warn("reloading namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",o),!o&&r&&n.logger.log("successfully reloaded namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading",r),t.forEach(function(t){e.forEach(function(e){var i=u(r,[t,e]);if(i)n.loaded(t+"|"+e,o,i);else{var a="reloading namespace "+e+" for language "+t+" via multiloading failed";n.loaded(t+"|"+e,a),n.logger.error(a)}})})}):t.forEach(function(t){e.forEach(function(e){n.loadOne(t+"|"+e,"re")})})},e.prototype.loadOne=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t.split("|"),r=st(o,2),i=r[0],a=r[1];this.read(i,a,"read",null,null,function(o,r){o&&e.logger.warn(n+"loading namespace "+a+" for language "+i+" failed",o),!o&&r&&e.logger.log(n+"loaded namespace "+a+" for language "+i,r),e.loaded(t,o,r)})},e.prototype.saveMissing=function(t,e,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.backend&&this.backend.create&&this.backend.create(t,e,n,o,null,at({},i,{isUpdate:r})),t&&t[0]&&this.store.addResource(t[0],e,n,o)},e}(W),ut=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ct=function(t){function e(n,o,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};T(this,e);var a=A(this,t.call(this));return a.cache=n,a.store=o,a.services=r,a.options=i,a.logger=$.create("cacheConnector"),a.cache&&a.cache.init&&a.cache.init(r,i.cache,i),a}return M(e,t),e.prototype.load=function(t,e,n){var o=this;if(!this.cache)return n&&n();var r=ut({},this.cache.options,this.options.cache),i="string"==typeof t?this.services.languageUtils.toResolveHierarchy(t):t;r.enabled?this.cache.load(i,function(t,e){if(t&&o.logger.error("loading languages "+i.join(", ")+" from cache failed",t),e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))for(var a in e[r])if(Object.prototype.hasOwnProperty.call(e[r],a)&&"i18nStamp"!==a){var s=e[r][a];s&&o.store.addResourceBundle(r,a,s)}n&&n()}):n&&n()},e.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},e}(W),pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ht=new(function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments[1];V(this,e);var r=I(this,t.call(this));if(r.options=D(n),r.services={},r.logger=$,r.modules={external:[]},o&&!r.isInitialized&&!n.isClone){var i;if(!r.options.initImmediate)return i=r.init(n,o),I(r,i);setTimeout(function(){r.init(n,o)},0)}return r}return F(e,t),e.prototype.init=function(){function t(t){return t?"function"==typeof t?new t:t:null}var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments[1];if("function"==typeof n&&(o=n,n={}),this.options=ft({},U(),this.options,D(n)),this.format=this.options.interpolation.format,o||(o=K),!this.options.isClone){this.modules.logger?$.init(t(this.modules.logger),this.options):$.init(null,this.options);var r=new tt(this.options);this.store=new G(this.options.resources,this.options);var i=this.services;i.logger=$,i.resourceStore=this.store,i.resourceStore.on("added removed",function(t,e){i.cacheConnector.save()}),i.languageUtils=r,i.pluralResolver=new ot(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),i.interpolator=new it(this.options),i.backendConnector=new lt(t(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];e.emit.apply(e,[t].concat(o))}),i.backendConnector.on("loaded",function(t){i.cacheConnector.save()}),i.cacheConnector=new ct(t(this.modules.cache),i.resourceStore,i,this.options),i.cacheConnector.on("*",function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];e.emit.apply(e,[t].concat(o))}),this.modules.languageDetector&&(i.languageDetector=t(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.translator=new Z(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];e.emit.apply(e,[t].concat(o))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}});var a=function(){e.changeLanguage(e.options.lng,function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),o(t,n)})};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),this},e.prototype.loadResources=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;if(this.options.resources)e(null);else{if(this.language&&"cimode"===this.language.toLowerCase())return e();var n=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach(function(t){n.indexOf(t)<0&&n.push(t)})};this.language?o(this.language):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(t){return o(t)}),this.options.preload&&this.options.preload.forEach(function(t){return o(t)}),this.services.cacheConnector.load(n,this.options.ns,function(){t.services.backendConnector.load(n,t.options.ns,e)})}},e.prototype.reloadResources=function(t,e){t||(t=this.languages),e||(e=this.options.ns),this.services.backendConnector.reload(t,e)},e.prototype.use=function(t){return"backend"===t.type&&(this.modules.backend=t),"cache"===t.type&&(this.modules.cache=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"postProcessor"===t.type&&X.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this},e.prototype.changeLanguage=function(t,e){var n=this,o=function(t,o){n.translator.changeLanguage(o),o&&(n.emit("languageChanged",o),n.logger.log("languageChanged",o)),e&&e(t,function(){return n.t.apply(n,arguments)})},r=function(t){t&&(n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.translator.language||n.translator.changeLanguage(t),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(t)),n.loadResources(function(e){o(e,t)})};t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(t):r(this.services.languageDetector.detect())},e.prototype.getFixedT=function(t,e){var n=this,o=function t(e,o){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var s=ft({},o);return"object"!==(void 0===o?"undefined":pt(o))&&(s=n.options.overloadTranslationOptionHandler([e,o].concat(i))),s.lng=s.lng||t.lng,s.lngs=s.lngs||t.lngs,s.ns=s.ns||t.ns,n.t(e,s)};return"string"==typeof t?o.lng=t:o.lngs=t,o.ns=e,o},e.prototype.t=function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)},e.prototype.exists=function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)},e.prototype.setDefaultNamespace=function(t){this.options.defaultNS=t},e.prototype.loadNamespaces=function(t,e){var n=this;if(!this.options.ns)return e&&e();"string"==typeof t&&(t=[t]),t.forEach(function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)}),this.loadResources(e)},e.prototype.loadLanguages=function(t,e){"string"==typeof t&&(t=[t]);var n=this.options.preload||[],o=t.filter(function(t){return n.indexOf(t)<0});if(!o.length)return e();this.options.preload=n.concat(o),this.loadResources(e)},e.prototype.dir=function(t){return t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr":"rtl"},e.prototype.createInstance=function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1])},e.prototype.cloneInstance=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,r=ft({},this.options,n,{isClone:!0}),i=new e(r);return["store","services","language"].forEach(function(e){i[e]=t[e]}),i.translator=new Z(i.services,i.options),i.translator.on("*",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];i.emit.apply(i,[t].concat(n))}),i.init(r,o),i.translator.options=i.options,i},e}(W)),gt=(ht.changeLanguage.bind(ht),ht.cloneInstance.bind(ht),ht.createInstance.bind(ht),ht.dir.bind(ht),ht.exists.bind(ht),ht.getFixedT.bind(ht),ht.init.bind(ht),ht.loadLanguages.bind(ht),ht.loadNamespaces.bind(ht),ht.loadResources.bind(ht),ht.off.bind(ht),ht.on.bind(ht),ht.setDefaultNamespace.bind(ht),ht.t.bind(ht),ht.use.bind(ht),t.playerconfig.DEFAULT);q.registerPlugin("locationPlugin",function(t){function e(t){o.reset(),o.src=function(){return null},o.on("play",function(){o.pause(),o.vastAd&&(o.vastAd=null)}),o.pause(),o.options().params.ads=!1,o.trigger(gt.EVENT.PLAYER_ERROR,{code:100,msg:ht.t(t)})}function n(){a&&s&&p&&(c&&(u=c.indexOf(a)),(l<0||u<0)&&(ht.exists(a)||(a="en"),e(a)))}ht.init({lng:"en",resources:{en:{translation:{en:"This video is not available in your country",vn:"Video này không khả dụng ở quốc gia của bạn"}}}});var o=this,r=t.url;void 0===r&&(r="https://adminplayer.sohatv.vn/geoip/country");var i=o.options().params.location,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,p=void 0;o.on("updateMediaInfo",function(){o.mediaInfo.location&&(c=o.mediaInfo.location.toLowerCase()),p=!0,n()});var f=new XMLHttpRequest;f.responseType="json",f.open("GET",r,!0),f.onload=function(){if(a=f.response.data.country.iso_code.toLowerCase(),i){if(null===f.response.data)return e("en");l=i.indexOf(a)}n()},f.onerror=function(){},f.send(null),o.one("ready",function(){s=!0,n()})})})}();/**
 * countdownPlugin - v1.0.0 - 12:09:42 04-05-2020
 * Author: tungtm
 */

!function(){var e=void 0;!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],t):t(n.Kenh14PlayerCore,n.React)}(this,function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var a="default"in e?e.default:e,s="default"in n?n.default:n,l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),d="Kenh14Player",u=e.playerconfig.DEFAULT,c=function(a){function c(e){t(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));n.state={secondsRemaining:3,countdowned:!1,isCountdowning:!1};var i=n.props.player;return n.countdownRemaining=n.countdownRemaining.bind(n),n.onHover=n.onHover.bind(n),n.onOutHover=n.onOutHover.bind(n),n.handleClick=n.handleClick.bind(n),n.handlePlay=n.handlePlay.bind(n),n.handleResize=n.handleResize.bind(n),n.dispose=n.dispose.bind(n),n.oriPause=i.pause.bind(i),n.oriPlay=i.play.bind(i),n.isCountdowning_=!1,n}return i(c,n.Component),r(c,[{key:"componentWillMount",value:function(){var e=this.props.player,n=this;e.on("play",this.handlePlay),e.on("timeupdate",this.handlePlay),e.one(u.EVENT.AD_START,this.dispose),window.addEventListener("resize",this.handleResize),e.play=function(){n.state.countdowned?n.onCountdownSucess():n.countdownRemaining()},e.pause=function(){n.oriPause(),n.clearCountdown()},e.options().params.autoplay&&this.countdownRemaining()}},{key:"dispose",value:function(){var e=this.props.player;clearInterval(this.checkPlay),e.off("play",this.handlePlay),e.off("timeupdate",this.handlePlay),e.vastAd||(e.play=this.oriPlay,e.pause=this.oriPause),e.removeClass("player-play-countdown"),this.setState({countdowned:!0})}},{key:"handleResize",value:function(){this.setState({resize:!0})}},{key:"componentWillUnmount",value:function(){clearInterval(this.checkPlay)}},{key:"handlePlay",value:function(){var n=this.props.noCountDown;this.state.countdowned||this.props.player.paused()||(e.agent.isMobile||n?this.setState({countdowned:!0}):this.countdownRemaining())}},{key:"clearCountdown",value:function(){clearInterval(this.checkPlay),this.isCountdowning_=!1,this.setState({isCountdowning:!1,secondsRemaining:3})}},{key:"countdownRemaining",value:function(){if(this.oriPause(),!this.isCountdowning_){var e=this,n=this.props.noCountDown;this.isCountdowning_=!0,this.props.player.addClass("player-play-countdown"),this.checkPlay=setInterval(function(){e.setState({secondsRemaining:e.state.secondsRemaining-1}),0===e.state.secondsRemaining&&e.onCountdownSucess()},500),this.setState({isCountdowning:!0}),n&&this.onCountdownSucess()}}},{key:"onHover",value:function(){this.countdownRemaining()}},{key:"onOutHover",value:function(){this.clearCountdown()}},{key:"onCountdownSucess",value:function(){var e=this.props.player;clearInterval(this.checkPlay),e.off("play",this.handlePlay),e.off("timeupdate",this.handlePlay),e.play=this.oriPlay,e.pause=this.oriPause,e.removeClass("player-play-countdown"),e.play(),this.setState({countdowned:!0})}},{key:"handleClick",value:function(){this.onCountdownSucess()}},{key:"render",value:function(){var n=this.props.noCountDown;if(this.state.countdowned)return null;var t=this.props.player,o=void 0,i=void 0,a=void 0,r=void 0;if(e.agent.isMobile||n)o="none";else{var u=this.state.isCountdowning;o=u?"block":"none",i=u?"none":"block",a=u?"0.6":"",r=u?"black":""}var c=t.el_.getBoundingClientRect().height/2-15,p=t.el_.getBoundingClientRect().width,h=c;p>1e3&&(h+=.05*(p-1e3));var y={};return e.agent.isMobile||t.options().params.autoplay||n||(y={onMouseEnter:this.onHover,onMouseLeave:this.onOutHover}),s.createElement("div",l({},y,{className:d+"-countdown",onClick:this.handleClick}),s.createElement("div",{className:d+"-countdown-background",style:{background:r,opacity:a}}),s.createElement("div",{className:d+"-loading-vid-icon",style:{display:i,top:c}},s.createElement("div",{className:d+"-countdown-play-icon",style:{borderTopWidth:t.el_.getBoundingClientRect().width/28.5,borderTopStyle:"solid",borderTopColor:"transparent",borderBottomWidth:t.el_.getBoundingClientRect().width/28.5,borderBottomStyle:"solid",borderBottomColor:"transparent",borderLeftWidth:t.el_.getBoundingClientRect().width/18,borderLeftStyle:"solid",borderLeftColor:"white"}})),s.createElement("div",{className:d+"-loading-vid-countdown quickspin",style:{display:o}},s.createElement("div",{className:d+"-countdown-label",style:{fontSize:t.el_.getBoundingClientRect().height/28.5,top:t.el_.getBoundingClientRect().height/2-t.el_.getBoundingClientRect().height/9}},"Tự động phát sau"),s.createElement("div",{className:d+"-countdown-circle",style:{boxShadow:"inset 0 0 0 "+t.el_.getBoundingClientRect().width/160+"px rgba(255, 255, 255, 0.1)",top:c}}),s.createElement("div",{className:d+"-countdown-spin",style:{top:c}},s.createElement("div",{className:d+"-countdown-line-mask",style:{transformOrigin:t.el_.getBoundingClientRect().width/13.33+"px "+t.el_.getBoundingClientRect().width/13.33+"px"}},s.createElement("div",{className:d+"-countdown-line",style:{width:t.el_.getBoundingClientRect().width/6.67,height:t.el_.getBoundingClientRect().width/6.67,boxShadow:"inset 0 0 0 "+t.el_.getBoundingClientRect().width/160+"px rgba(255, 255, 255, 0.5)"}}))),s.createElement("div",{className:d+"-countdown-number",style:{fontSize:t.el_.getBoundingClientRect().width/16.67,top:h}},this.state.secondsRemaining)))}}]),c}();c.propTypes={player:e.PropTypes.object.isRequired,className:e.PropTypes.string,noCountDown:e.PropTypes.bool};a.registerPlugin("countdownPlugin",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,t=e.noCountDown,o=e.skipLabel,i=n.options().params.label;i&&o.includes(i)||n.on("ready",function(){if(!(n.el_.getBoundingClientRect().width<=200)){var e=s.createElement(c,{key:"countdown",player:n,noCountDown:t});n.container.addChild(e,2)}})})})}();/**
 * kinghubAdmicroAPIPlugin - v1.0.0 - 14:22:09 21-03-2018
 * Author: theanh_htp135
 */

!function(){var n=void 0;!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(require("playercore")):"function"==typeof n&&n.amd?n(["playercore"],o):o(e.Kenh14PlayerCore)}(this,function(n){"use strict";(n=n&&n.hasOwnProperty("default")?n.default:n).registerPlugin("kinghubAdmicroAPIPlugin",function(){var n=this,e=!1,o=!1,i=!1,t=new function(){this.sendLog=function(e){var o,i=0;o="vtv.vn"==n.mediaInfo.domain&&n.mediaInfo.isMobile?"m.vtv.vn":n.mediaInfo.domain;var t=e+";",a="0;0;0;0;0;0;0;"+(i=n.mediaInfo.vid&&"0"!=n.mediaInfo.vid?n.mediaInfo.vid:n.mediaInfo.file)+";0;"+(o||null);a+="|"+(n.mediaInfo.tag?n.mediaInfo.tag:0)+";"+location.pathname,(new Image).src="//lg1.logging.admicro.vn/tk?p="+encodeURIComponent(t+a)}};t.sendLog("2");n.on(["play","playing"],function e(){n.off(["play","playing"],e),t.sendLog("-1")}),n.on("timeupdate",function(){!e&&n.currentTime()>=3&&(e=!0,t.sendLog("11")),!o&&n.currentTime()>=20&&(o=!0,t.sendLog("20")),!i&&n.currentTime()/n.duration()>.5&&(i=!0,t.sendLog("12"))}),n.on("endedcontent",function(){t.sendLog("21")})})})}();/**
 * pauseOtherPlugin - v1.0.0 - 11:44:19 30-11-2018
 * Author: TuanLDT - thanhtuan.pfiev@gmail.com
 */

!function(){var e=void 0;!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("playercore")):"function"==typeof e&&e.amd?e(["playercore"],t):t(n.Kenh14PlayerCore)}(this,function(e){"use strict";function n(e){t.map(function(n){try{n.id_!==e&&n.pause()}catch(e){}})}var t=[];("default"in e?e.default:e).registerPlugin("pauseOtherPlugin",function(){var i=this;e.agent.isMobile&&(t.push(i),i.on("play",function(){n(i.id_)}))})})}();/**
 * timelineThumbPlugin - v1.0.0 - 15:15:54 12-03-2020
 * Author: tungtm
 */

!function(){var e=void 0;!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(require("playercore"),require("react")):"function"==typeof e&&e.amd?e(["playercore","react"],i):i(t.Kenh14PlayerCore,t.React)}(this,function(e,t){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var i=Math.floor(e%60),o=Math.floor(e/60%60),n=Math.floor(e/3600),r=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(n=o=i="-"),n=n>0||s>0?n+":":"",o=((n||r>=10)&&o<10?"0"+o:o)+":",i=i<10?"0"+i:i,n+o+i}var o,n,r="default"in e?e.default:e,s="default"in t?t.default:t,a=(function(){function e(e){this.value=e}function t(t){function i(n,r){try{var s=t[n](r),a=s.value;a instanceof e?Promise.resolve(a.value).then(function(e){i("next",e)},function(e){i("throw",e)}):o(s.done?"return":"normal",s.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?i(n.key,n.arg):r=null}var n,r;this._invoke=function(e,t){return new Promise(function(o,s){var a={key:e,arg:t,resolve:o,reject:s,next:null};r?r=r.next=a:(n=r=a,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=e.playerconfig.DEFAULT,p=(n=o=function(e){function t(e){a(this,t);var i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state={show:!0},i._updateMouseTime=i._updateMouseTime.bind(i),i._isShow=i._isShow.bind(i),i._checkRowImg=i._checkRowImg.bind(i),i}return u(t,e),h(t,[{key:"componentWillMount",value:function(){var e=this.props.player;this.width=160,this.haveImgSize=!1,e.on(l.EVENT.MOUSE_TIME_UPDATE,this._updateMouseTime),e.on(l.EVENT.MOUSE_DOWN_TIME_UPDATE,this._isShow)}},{key:"_isShow",value:function(e,t){t.isMouseDown?this.setState({show:!1}):this.setState({show:!0})}},{key:"_updateMouseTime",value:function(e,t){var i=this.props.player,o=i.options().params.vid,n=o.slice(0,o.indexOf("/")),r=o.slice(o.indexOf("/"));this.s_=parseInt(t.time/30),i.options_.params.vidMps?this.srcImg_="//"+n+"/timeline_thumb/s_"+(this.s_+r)+".jpg":this.srcImg_="//hls.mediacdn.vn/"+n+"/timeline_thumb/s_"+(this.s_+r)+".jpg",this.haveImgSize||(this.haveImgSize=!0,this.getImgSize(this.srcImg_,t)),this.timeImg_=t.time-30*this.s_,this._checkRowImg(t)}},{key:"getImgSize",value:function(e,t){var i=this,o=new Image;o.onload=function(){var e=o.height,n=o.width;i.heightImg_=i.width/(n/5/(e/3)),i.heightImg_>90&&(i.heightImg_=90,i.width=i.heightImg_*(n/5/(e/3))),i._checkRowImg(t),i.setState({hei:3*i.heightImg_}),i.setState({wid:5*i.width}),i.setState({width:i.width})},o.src=e}},{key:"_checkRowImg",value:function(e){var t=parseInt(this.timeImg_/10);if(this.heightImg_)if(0===t){var i=this.heightImg_*t;this._getPositionImg(i,e)}else if(1===t){var o=this.heightImg_*t;this._getPositionImg(o,e)}else{var n=this.heightImg_*t;this._getPositionImg(n,e)}}},{key:"_getPositionImg",value:function(e,t){var o=this.props.player.currentDimension("width"),n=t.percent*o,r=void 0,s=void 0,a=void 0;n>=79&&n<=o-79?(r=t.percent*o-79+80-this.width/2+"px",a=t.percent*o-79+"px"):n<79?(r=80-this.width/2+"px",a="0px"):n>o-79&&(r=o-160+80-this.width/2+"px",a=o-160+"px");var h=parseInt(this.timeImg_%10),u=parseInt(h/2),c=i(t.time,t.duration);0===u?(s="-0px",this._setPostionImg(s,"-"+e+"px",r,c,a)):1===u?(s="-"+this.width+"px",this._setPostionImg(s,"-"+e+"px",r,c,a)):2===u?(s="-"+2*this.width+"px",this._setPostionImg(s,"-"+e+"px",r,c,a)):3===u?(s="-"+3*this.width+"px",this._setPostionImg(s,"-"+e+"px",r,c,a)):(s="-"+4*this.width+"px",this._setPostionImg(s,"-"+e+"px",r,c,a))}},{key:"_setPostionImg",value:function(e,t,i,o,n){this.setState({srcImg:this.srcImg_,widthImg:e,heightImg:t,left:i,mouseTime:o,height:this.heightImg_,positionBackGround:n})}},{key:"MoveThumb",value:function(){this.setState({srcImg:!1})}},{key:"render",value:function(){if(!this.state.srcImg||!this.state.show)return null;var e=this.state.srcImg,t=this.state,i=t.widthImg,o=t.width,n=t.heightImg,r=t.left,a=t.mouseTime,h=t.height,u=t.hei,c=t.wid,l=t.positionBackGround,p="url("+e+") "+i+" "+n+" / "+c+"px "+u+"px";return s.createElement("div",{className:"Kenh14Player-timeline"},s.createElement("div",{className:"timelineThumb",onMouseMove:this.MoveThumb.bind(this),style:{background:p,left:r,height:h+"px",top:-h-12+"px",width:o+"px"}},s.createElement("div",{className:"timeMouseDisplay"},s.createElement("div",{className:"tooltip-image"}),s.createElement("span",{className:"tooltip-text"},a))),s.createElement("div",{className:"backgroundImage",onMouseMove:this.MoveThumb.bind(this),style:{backgroundColor:"#f1f1f1",left:l,height:h+"px",top:-h-12+"px"}}),s.createElement("div",{className:"border-timeline",onMouseMove:this.MoveThumb.bind(this),style:{left:l,height:h+"px",top:-h-12+"px"}}))}}]),t}(t.Component),o.propTypes={player:e.PropTypes.object.isRequired},n),m=e.playerconfig.DEFAULT;r.registerPlugin("timelineThumbPlugin",function(){var t=this,i=t.options().params;if(!e.agent.isMobile&&!i.live){var o=!1;t.on("ready",function(){var e=t.currentDimension("width"),i=t.currentDimension("height");if(e<300||i<300)o=!0;else{var n=s.createElement(p,{key:"timelineThumb",player:t});t.container.controlBar.progressControl.progressSlider.addChild(n,3)}}),t.on(m.EVENT.MOUSE_TIME_UPDATE,function(){"none"!==window.ReactDOM.findDOMNode(t.container.controlBar.progressControl.progressSlider.mouseTimeDisplay).style.display&&(o||(window.ReactDOM.findDOMNode(t.container.controlBar.progressControl.progressSlider.mouseTimeDisplay).style.display="none"))})}})})}();/**
 * itvcPostMessage - v1.0.0 - 10:04:54 25-09-2018
 * Author: TuanLDT
 */

!function(){var e=void 0;!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("playercore")):"function"==typeof e&&e.amd?e(["playercore"],t):t(n.Kenh14PlayerCore)}(this,function(e){"use strict";(e=e&&e.hasOwnProperty("default")?e.default:e).registerPlugin("itvcPostMessage",function(){function e(e){try{var a=e[e.message?"message":"data"];if(-1===a.indexOf(t))return;if(-1===a.indexOf("closebannerExpand"))return;n.vastAd.adUnit().containerEl.children[0].children[0].contentWindow.postMessage("admCloseExpand","*"),n.vastAd.adUnit().collapseAd()}catch(e){}}var n=this,t=n.id_;window.addEventListener?window.addEventListener("message",function(n){e(n)},!1):window.attachEvent&&window.attachEvent("onmessage",function(n){e(n)})})})}();/**
 * adsVastPlugin - v1.2.11 - 15:06:08 04-06-2020
 * Author: tungtm
 */

!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).OpenVV=t()}}(function(){return function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t,e,n){if("function"==typeof Array.prototype.find)return t.find(e,n);n=n||this;var o,i=t.length;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(o=0;o<i;o++)if(e.call(n,t[o],o,t))return t[o]}},{}],2:[function(t,e,n){!function(t,e){"use strict";function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,i=o.width*o.height;this.intersectionRatio=n?i/n:this.isIntersecting?1:0}function o(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=r(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function i(){return t.performance&&performance.now&&performance.now()}function r(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function s(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function a(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function c(t,e){var n=Math.max(t.top,e.top),o=Math.min(t.bottom,e.bottom),i=Math.max(t.left,e.left),r=Math.min(t.right,e.right),s=r-i,a=o-n;return s>=0&&a>=0&&{top:n,bottom:o,left:i,right:r,width:s,height:a}}function u(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(t,e){for(var n=e;n;){if(n==t)return!0;n=h(n)}return!1}function h(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}if(!("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)){var d=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections()}},o.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},o.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},o.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(t,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(t,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(o){var r=o.element,s=u(r),a=this._rootContainsTarget(r),c=o.entry,l=t&&a&&this._computeTargetAndRootIntersection(r,e),h=o.entry=new n({time:i(),target:r,boundingClientRect:s,rootBounds:e,intersectionRect:l});c?t&&a?this._hasCrossedThreshold(c,h)&&this._queuedEntries.push(h):c&&c.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,o){if("none"!=t.getComputedStyle(n).display){for(var i=u(n),r=h(n),s=!1;!s;){var a=null,l=1==r.nodeType?t.getComputedStyle(r):{};if("none"==l.display)return;if(r==this.root||r==e?(s=!0,a=o):r!=e.body&&r!=e.documentElement&&"visible"!=l.overflow&&(a=u(r)),a&&!(i=c(a,i)))break;r=h(r)}return i}},o.prototype._getRootRect=function(){var t;if(this.root)t=u(this.root);else{var n=e.documentElement,o=e.body;t={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},o.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},o.prototype._rootIsInDom=function(){return!this.root||l(e,this.root)},o.prototype._rootContainsTarget=function(t){return l(this.root||e,t)},o.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},o.prototype._unregisterInstance=function(){var t=d.indexOf(this);-1!=t&&d.splice(t,1)},t.IntersectionObserver=o,t.IntersectionObserverEntry=n}}(window,document)},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.getDetails=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{viewportWidth:Math.max(document.body.clientWidth,window.innerWidth)||-1,viewportHeight:Math.max(document.body.clientHeight,window.innerHeight)||-1,elementWidth:t.clientWidth||-1,elementHeight:t.clientHeight||-1,iframeContext:i(),focus:o()}};var o=n.isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(i()===r.CROSS_DOMAIN_IFRAME||(!window.document.hasFocus||window.top.document.hasFocus()))},i=n.iFrameContext=function(){try{if(window.top===window)return r.ON_PAGE;for(var t=window;t.parent!==t;){if(t.parent.document.domain!==t.document.domain)return r.CROSS_DOMAIN_IFRAME;t=t.parent}r.SAME_DOMAIN_IFRAME}catch(t){return r.CROSS_DOMAIN_IFRAME}},r=n.iFrameServingScenarios={ON_PAGE:"on page",SAME_DOMAIN_IFRAME:"same domain iframe",CROSS_DOMAIN_IFRAME:"cross domain iframe"}},{}],4:[function(t,e,n){"use strict";t("array-find")},{"array-find":1}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateStrategy=n.validateCriteria=n.validElement=n.validTechnique=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){return t&&t.__esModule?t:{default:t}}(t("../Measurement/MeasurementTechniques/BaseTechnique")),r=(n.validTechnique=function(t){return"function"==typeof t&&Object.getOwnPropertyNames(i.default).reduce(function(e,n){return n&&o(t[e])===o(i.default[e])},!0)},n.validElement=function(t){return t&&t.toString().indexOf("Element")>-1},n.validateCriteria=function(t){var e=t.inViewThreshold,n=t.timeInView,o=!1,i=[];return("number"!=typeof e||e>1)&&(o=!0,i.push("inViewThreshold must be a number equal to or less than 1")),("number"!=typeof n||n<0)&&(o=!0,i.push("timeInView must be a number greater to or equal 0")),{invalid:o,reasons:i.join(" | ")}});n.validateStrategy=function(t){var e=t.autostart,n=t.techniques,o=t.criteria,i=!1,s=[];"boolean"!=typeof e&&(i=!0,s.push("autostart must be boolean")),Array.isArray(n)&&0!==n.length||(i=!0,s.push("techniques must be an array containing atleast on measurement techniques"));var a=r(o);return a.invalid&&(i=!0,s.push(a.reasons)),{invalid:i,reasons:s.join(" | ")}}},{"../Measurement/MeasurementTechniques/BaseTechnique":8}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.START="start",n.STOP="stop",n.CHANGE="change",n.COMPLETE="complete",n.UNMEASUREABLE="unmeasureable",n.INVIEW="inview",n.OUTVIEW="outview"},{}],7:[function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(t("../Timing/InViewTimer")),c=t("./Strategies/"),u=t("../Helpers/Validators"),l=o(t("../Environment/Environment")),h=o(t("./Events")),d=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this._listeners={start:[],stop:[],change:[],complete:[],unmeasureable:[]},this._element=e,this._strategy=r({},c.DEFAULT_STRATEGY,o),this._criteriaMet=!1;var s=(0,u.validateStrategy)(this._strategy);if(s.invalid)throw s.reasons;this._technique=this._selectTechnique(this._strategy.techniques),this._technique&&this._addSubscriptions(this._technique),this.unmeasureable?setTimeout(function(){return n._publish(h.UNMEASUREABLE,l.getDetails(n._element))},0):this._strategy.autostart&&this._technique.start()}return s(t,[{key:"start",value:function(){this._technique.start()}},{key:"dispose",value:function(){this._technique&&this._technique.dispose(),this.timer&&this.timer.dispose()}},{key:"onViewableStart",value:function(t){return this._addCallback(t,h.START)}},{key:"onViewableStop",value:function(t){return this._addCallback(t,h.STOP)}},{key:"onViewableChange",value:function(t){return this._addCallback(t,h.CHANGE)}},{key:"onViewableComplete",value:function(t){return this._addCallback(t,h.COMPLETE),this.criteriaMet&&this._techniqueChange(h.COMPLETE,this._technique),this}},{key:"onUnmeasureable",value:function(t){return this._addCallback(t,h.UNMEASUREABLE),this.unmeasureable&&this._techniqueChange(h.UNMEASUREABLE),this}},{key:"_selectTechnique",value:function(t){return t.filter(u.validTechnique).map(this._instantiateTechnique.bind(this)).find(function(t){return!t.unmeasureable})}},{key:"_instantiateTechnique",value:function(t){return new t(this._element,this._strategy.criteria)}},{key:"_addSubscriptions",value:function(t){t&&(t.onInView(this._techniqueChange.bind(this,h.INVIEW,t)),t.onChangeView(this._techniqueChange.bind(this,h.CHANGE,t)),t.onOutView(this._techniqueChange.bind(this,h.OUTVIEW,t)))}},{key:"_techniqueChange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,o=this._appendEnvironment(e);switch(t){case h.INVIEW:this._criteriaMet||(this.timer=new a.default(this._strategy.criteria.timeInView),this.timer.elapsed(this._timerElapsed.bind(this,e)),this.timer.start(),n=h.START);break;case h.CHANGE:n=t;break;case h.COMPLETE:this._criteriaMet||(this._criteriaMet=!0,n=t);break;case h.OUTVIEW:this._criteriaMet||(this.timer&&(this.timer.stop(),delete this.timer),n=h.STOP);break;case h.UNMEASUREABLE:n=h.UNMEASUREABLE}n&&this._publish(n,o)}},{key:"_publish",value:function(t,e){Array.isArray(this._listeners[t])&&this._listeners[t].forEach(function(t){return t(e)})}},{key:"_timerElapsed",value:function(t){this._techniqueChange(h.COMPLETE,t)}},{key:"_addCallback",value:function(t,e){if(this._listeners[e]&&"function"==typeof t)this._listeners[e].push(t);else if("function"!=typeof t)throw"Callback must be a function";return this}},{key:"_appendEnvironment",value:function(t){return r({},{percentViewable:void 0===t.percentViewable?-1:t.percentViewable,technique:t.techniqueName||-1,viewable:void 0===t.viewable?-1:t.viewable},l.getDetails(this._element))}},{key:"unmeasureable",get:function(){return!this._technique||this._technique.unmeasureable}}]),t}();n.default=d,e.exports=n.default},{"../Environment/Environment":3,"../Helpers/Validators":5,"../Timing/InViewTimer":15,"./Events":6,"./Strategies/":12}],8:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(){o(this,t),this.listeners={inView:[],outView:[],changeView:[]},this.percentViewable=0}return i(t,[{key:"onInView",value:function(t){return this.addCallback(t,"inView")}},{key:"onChangeView",value:function(t){return this.addCallback(t,"changeView")}},{key:"onOutView",value:function(t){return this.addCallback(t,"outView")}},{key:"addCallback",value:function(t,e){if("function"==typeof t&&this.listeners[e])this.listeners[e].push(t);else if("function"!=typeof t)throw"callback must be function";return this}},{key:"start",value:function(){}},{key:"dispose",value:function(){}},{key:"unmeasureable",get:function(){return!1}},{key:"viewable",get:function(){return!1}},{key:"techniqueName",get:function(){return"BaseTechnique"}}]),t}();n.default=r,e.exports=n.default},{}],9:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(t("./BaseTechnique")),c=t("../../Helpers/Validators"),u=t("../Strategies/"),l=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.DEFAULT_STRATEGY.criteria;o(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(void 0!==n&&t)r.element=t,r.criteria=n,r.inView=!1,r.started=!1,r.notificationLevels=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],-1===r.notificationLevels.indexOf(r.criteria.inViewThreshold)&&r.notificationLevels.push(r.criteria.inViewThreshold);else if(!t)throw"element not provided";return r}return r(e,a.default),s(e,[{key:"start",value:function(){this.observer=new window.IntersectionObserver(this.viewableChange.bind(this),{threshold:this.notificationLevels}),this.observer.observe(this.element)}},{key:"dispose",value:function(){this.observer&&(this.observer.unobserve(element),this.observer.disconnect(element))}},{key:"viewableChange",value:function(t){t&&t.length&&void 0!==t[0].intersectionRatio&&(this.percentViewable=t[0].intersectionRatio,t[0].intersectionRatio<this.criteria.inViewThreshold&&this.started&&this.inView&&(this.inView=!1,this.listeners.outView.forEach(function(t){return t()})),t[0].intersectionRatio>=this.criteria.inViewThreshold&&!this.inView&&(this.started=!0,this.inView=!0,this.listeners.inView.forEach(function(t){return t()})),this.listeners.changeView.forEach(function(t){return t()}))}},{key:"unmeasureable",get:function(){return!window.IntersectionObserver||this.usesPolyfill||!(0,c.validElement)(this.element)}},{key:"viewable",get:function(){return this.inView}},{key:"techniqueName",get:function(){return"IntersectionObserver"}},{key:"usesPolyfill",get:function(){return"number"==typeof window.IntersectionObserver.prototype.THROTTLE_TIMEOUT}}]),e}();n.default=l,e.exports=n.default},{"../../Helpers/Validators":5,"../Strategies/":12,"./BaseTechnique":8}],10:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=o(t("./IntersectionObserver")),u=(o(t("intersection-observer")),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("../../Environment/Environment"))),l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,c.default),a(e,[{key:"unmeasureable",get:function(){return u.iFrameContext()===u.iFrameServingScenarios.CROSS_DOMAIN_IFRAME}},{key:"techniqueName",get:function(){return"IntersectionObserverPolyFill"}}]),e}();n.default=l,e.exports=n.default},{"../../Environment/Environment":3,"./IntersectionObserver":9,"intersection-observer":2}],11:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./IntersectionObserver");Object.defineProperty(n,"IntersectionObserver",{enumerable:!0,get:function(){return o(i).default}});var r=t("./IntersectionObserverPolyfill");Object.defineProperty(n,"IntersectionObserverPolyfill",{enumerable:!0,get:function(){return o(r).default}});var s=t("./BaseTechnique");Object.defineProperty(n,"BaseTechnique",{enumerable:!0,get:function(){return o(s).default}})},{"./BaseTechnique":8,"./IntersectionObserver":9,"./IntersectionObserverPolyfill":10}],12:[function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0}),n.StrategyFactory=n.DEFAULT_STRATEGY=void 0;var i=o(t("../../Helpers/Validators")),r=o(t("../MeasurementTechniques/")),s=o(t("../../Options/ViewabilityCriteria")),a=n.DEFAULT_STRATEGY={autostart:!0,techniques:[r.IntersectionObserver,r.IntersectionObserverPolyfill],criteria:s.MRC_VIDEO};n.StrategyFactory=function(){var t={autostart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.autostart,techniques:arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.techniques,criteria:arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.criteria},e=i.validateStrategy(t);if(e.invalid)throw e.reasons;return t}},{"../../Helpers/Validators":5,"../../Options/ViewabilityCriteria":14,"../MeasurementTechniques/":11}],13:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();t("./Helpers/Polyfills.js");var a=i(t("./Measurement/Events")),c=o(t("./Timing/InViewTimer")),u=i(t("./Measurement/Strategies/")),l=(i(t("./Environment/Environment")),o(t("./Measurement/MeasurementExecutor"))),h=i(t("./Options/ViewabilityCriteria")),d=i(t("./Measurement/MeasurementTechniques/")),p=function(){function t(){r(this,t),this.executors=[]}return s(t,[{key:"measureElement",value:function(t,e){var n=new l.default(t,e);return this.executors.push(n),n}},{key:"dispose",value:function(){this.executors.forEach(function(t){return t.dispose()})}}]),t}();n.default=p,p.ViewabilityCriteria=h,p.MeasurementExecutor=l.default,p.MeasurementTechniques=d,p.InViewTimer=c.default,p.Strategies=u,p.Events=a,e.exports=n.default},{"./Environment/Environment":3,"./Helpers/Polyfills.js":4,"./Measurement/Events":6,"./Measurement/MeasurementExecutor":7,"./Measurement/MeasurementTechniques/":11,"./Measurement/Strategies/":12,"./Options/ViewabilityCriteria":14,"./Timing/InViewTimer":15}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MRC_VIDEO={inViewThreshold:.5,timeInView:2e3},n.MRC_DISPLAY={inViewThreshold:.5,timeInView:1e3},n.customCriteria=function(){return{inViewThreshold:arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,timeInView:arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3}}},{}],15:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(e){o(this,t),this.duration=e,this.listeners=[],this.completed=!1}return i(t,[{key:"timerComplete",value:function(){this.completed=!0,this.listeners.forEach(function(t){return t()})}},{key:"elapsed",value:function(t){"function"==typeof t&&this.listeners.push(t)}},{key:"start",value:function(){this.endTimer(),this.timer=setTimeout(this.timerComplete.bind(this),this.duration)}},{key:"stop",value:function(){this.endTimer()}},{key:"endTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.listeners.length=0)}},{key:"dispose",value:function(){this.endTimer()}}]),t}();n.default=r,e.exports=n.default},{}]},{},[13])(13)}),function(){var t=void 0;!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react"),require("OpenVV")):"function"==typeof t&&t.amd?t(["playercore","react","OpenVV"],n):n(e.Kenh14PlayerCore,e.React,e.OpenVV)}(this,function(t,e,n){"use strict";function o(t){var e=t.duration,n=t.durationValue,o=t.durationLogical,i=n.match(/\d+/g).map(Number);if(i.length>2)return!0;switch(i.sort(function(t,e){return t-e}),o){case">=":if(e>=i[0])return!0;break;case">":if(e>i[0])return!0;break;case"<=":if(e<=i[0])return!0;break;case"<":if(e<i[0])return!0;break;case"range":if(e>=i[0]&&e<i[1])return!0}return!1}function i(t,e,n,o,i){var r={};return Object.keys(o).forEach(function(t){r[t]=o[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}function r(t,e){var n,o;return t.indexOf(":")>-1?o=60*+(n=t.split(":"))[0]*60+60*+n[1]+ +n[2]:t.indexOf("%")>-1?o=+(n=t.split("%"))[0]/100*e:+t<1?o=+t*e:+t>1&&(o=+t),o}function s(t,e,n,o,i){var r={};return Object.keys(o).forEach(function(t){r[t]=o[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}var a="default"in t?t.default:t,c="default"in e?e.default:e;n=n&&n.hasOwnProperty("default")?n.default:n;var u,l,h,d,p,f,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=(function(){function t(t){this.value=t}function e(e){function n(i,r){try{var s=e[i](r),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(s.done?"return":"normal",s.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):r=null}var i,r;this._invoke=function(t,e){return new Promise(function(o,s){var a={key:t,arg:e,resolve:o,reject:s,next:null};r?r=r.next=a:(i=r=a,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},k=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},g=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},j=function(t){return new Promise(function(e,n){a.xhr(b({timeout:5e3},t),function(t,o,i){200===o.statusCode?e(i):n(t)})})},_=new(function(){function e(){v(this,e)}return y(e,[{key:"initAd",value:function(t){var e=t.player,n=t.adTagUrl,o=t.adTagXML,i=t.vastResponse,r=t.ima,s=t.type,a=t.skipoffset,c=t.preLoaded,u=this,l=e.play,h=!1;e.play=function(){h||(h=!0,e.play=l,u._initAd({player:e,adTagUrl:n,adTagXML:o,vastResponse:i,ima:r,type:s,skipoffset:a,preLoaded:c}))},e.play()}},{key:"_initAd",value:function(e){var n=e.player,o=e.adTagUrl,i=e.adTagXML,r=e.vastResponse,s=e.ima,a=e.type,c=e.skipoffset,u=e.preLoaded;n.vastAd||new t.Vast({player:n,adTagUrl:o,adTagXML:i,vastResponse:r,ima:s,type:a,skipoffset:c,preLoaded:u})}},{key:"getVastRespone",value:function(e){var n=e.adTagUrl,o=e.adTagXML,i=e.isPackageAds;return t.Vast.getVASTResponse({adTagUrl:n,adTagXML:o,isPackageAds:i})}}]),e}()),E=function(e,n,o){var i=e.options_.params,r=n.skipoffset,s=n.tag,a=i.ima,c=s;e.one("timeupdate",function(){_.getVastRespone({adTagUrl:c,isPackageAds:o.isPackageAds}).then(function(n){var o=void 0,s=void 0,c=!0;if((i.noAdsLoad||t.agent.isIOS)&&(c=!1),"string"==typeof n)o=n;else{if("object"!==(void 0===n?"undefined":m(n)))return;s=n}_.initAd({player:e,adTagUrl:o,vastResponse:s,ima:a,skipoffset:r,type:"preroll",preLoaded:c})}).catch(function(t){})})},w={IDLE:"IDLE",PREPARE:"PREPARE",RUNNING:"RUNNING",SUCCESS:"SUCCESS"},T=t.playerconfig.DEFAULT,A=function(t){function e(t){v(this,e);var n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.defaultProps={number:-1},n.state={count:0,postrollstate:w.IDLE,prepareSuccess:!0,contentEnded:!1};var o=n.props,i=o.player,r=o.preLoaded;return n.isPreparePost=!1,n.handleContentEnded=n.handleContentEnded.bind(n),n.checkDurationIsGreat=n.checkDurationIsGreat.bind(n),n.checkToStartPostroll=n.checkToStartPostroll.bind(n),n._handlePreparePostrollSucess=n._handlePreparePostrollSucess.bind(n),i.on(T.EVENT.PLAYER_ENDED_CONTEND,n.handleContentEnded),i.on("durationchange",n.checkDurationIsGreat),i.on("play",n.checkDurationIsGreat),i.on("loadedmetadata",n.checkDurationIsGreat),i.on("preparePostrollSuccess",n._handlePreparePostrollSucess),r&&(i.on("timeupdate",n.checkToStartPostroll),n.setState({prepareSuccess:!1})),n}return k(e,t),y(e,[{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off("durationchange",this.checkDurationIsGreat),t.off("play",this.checkDurationIsGreat),t.off("loadedmetadata",this.checkDurationIsGreat),t.off("timeupdate",this.checkToStartPostroll),t.off(T.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),t.off("preparePostrollSuccess",this._handlePreparePostrollSucess)}},{key:"dispose",value:function(){var t=this.props.player;t.off("durationchange",this.checkDurationIsGreat),t.off("play",this.checkDurationIsGreat),t.off("loadedmetadata",this.checkDurationIsGreat),t.off("timeupdate",this.checkToStartPostroll),t.off(T.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),t.off("preparePostrollSuccess",this._handlePreparePostrollSucess)}},{key:"_handlePreparePostrollSucess",value:function(){this.setState({prepareSuccess:!0}),this.PreparePostroll()}},{key:"checkToStartPostroll",value:function(){var t=this.props.player;this.isPreparePost||t.currentTime()+6>=t.duration()&&(this.isPreparePost=!0,this.preparePostroll())}},{key:"preparePostroll",value:function(){function t(t){o.trigger("preparePostrollVast"),_.initAd({player:o,skipoffset:c,adTagUrl:a,vastResponse:t,type:"postroll",preLoaded:i})}var e=this.props,n=e.infoAd,o=e.player,i=e.preLoaded,r=e.vastResponse,s=e.rules,a=n.tag,c=n.skipoffset;if(!r)return _.getVastRespone({adTagUrl:a,isPackageAds:s.isPackageAds}).then(function(e){t(e)}).catch(function(){});t(r)}},{key:"checkDurationIsGreat",value:function(){var t=this.props.player.duration();Number.isNaN(t)}},{key:"PreparePostroll",value:function(){var t=this.props,e=t.player,n=t.preLoaded,o=this,i=this.state,r=i.prepareSuccess,s=i.contentEnded;!r&&n||!s||(this.setState({postrollstate:w.RUNNING}),e.one(T.EVENT.AD_END,function(){o.setState({postrollstate:w.SUCCESS}),e.one("play",function(){o.setState({postrollstate:w.IDLE}),e.currentTime(0)}),e.trigger(T.EVENT.AD_ENDED_POSTROLL)}),n?e.trigger(T.EVENT.AD_ORDER_START_POSTROLL):this.startPostroll())}},{key:"startPostroll",value:function(){var t=this.props,e=t.infoAd,n=t.player,o=t.vastResponse,i=e.tag,r=e.skipoffset;_._initAd({player:n,skipoffset:r,vastResponse:o,adTagUrl:i,type:"postroll",preLoaded:!1})}},{key:"handleContentEnded",value:function(){var t=this.state,e=t.count,n=t.postrollstate,o=this.props,i=o.player,r=o.number;if("IDLE"===n){if(this.setState({count:++e,contentEnded:!0}),e>r&&r>=0)return i.off(T.EVENT.PLAYER_ENDED_CONTEND,this.handleContentEnded),void(i.play=this.oriPlay);this.PreparePostroll()}}}]),e}(t.Plugin),P=function(e,n,i){var r=i.rules,s=i.vastResponse;e.one("play",function(){e.one("timeupdate",function(){var i=e.duration(),a=e.options(),c=a.params,u=a.plugins,l=!1;o({duration:i,durationValue:n.durationValue,durationLogical:n.durationLogical})&&(c.noAdsLoad||t.agent.isIOS||(l=!0),u.AdsPlayerPlugin||(l=!1),new A({player:e,infoAd:n,preLoaded:l,vastResponse:s,rules:r}))})})},I=t.playerconfig.DEFAULT,O={IDLE:"IDLE",PREPAIRING:"PREPAIRING",RUNNING:"RUNNING",DISPOSE:"DISPOSE"},R=(h=l=function(t){function e(t){v(this,e);var n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={left:null,dispose:!1},n.midrollState_=O.IDLE,n}return k(e,t),y(e,[{key:"componentDidMount",value:function(){var t=this.props.player;this.prepareSuccess=!1,t.on("timeupdate",this.checkToStartMidroll),t.on("ignoreEventAds",this.handleStopOrResume),t.on(I.EVENT.AD_END,this.handleStopOrResume),t.on(I.EVENT.AD_START,this.stopHandleEvent),t.on(I.EVENT.AD_ORDER_START_MIDROLL,this.stopHandleEvent),this.updatePosition()}},{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off("timeupdate",this.checkToStartMidroll),t.off("ignoreEventAds",this.handleStopOrResume),t.off(I.EVENT.AD_END,this.handleStopOrResume),t.off(I.EVENT.AD_START,this.stopHandleEvent)}},{key:"updatePosition",value:function(){var t=this.props,e=t.seconds,n=t.duration,o=e/n,i=100*o+"%",r=o*n;this.setState({left:i,starttime:r})}},{key:"dispose",value:function(){var t=this.props.player;t.off("timeupdate",this.checkToStartMidroll),t.off("ignoreEventAds",this.handleStopOrResume),t.off(I.EVENT.AD_END,this.handleStopOrResume),t.off(I.EVENT.AD_START,this.stopHandleEvent),t.off(I.EVENT.AD_ORDER_START_MIDROLL,this.stopHandleEvent),this.setState({dispose:!0}),this.currentTime_&&(this.props.isCounting=!1,this.props.checkAdStart={adStart:!1,currentTime:this.currentTime_})}},{key:"stopHandleEvent",value:function(){this.props.player.off("timeupdate",this.checkToStartMidroll)}},{key:"resumeHandleEvent",value:function(){this.stopHandleEvent();var t=this,e=this.props.player;e.one("timeupdate",function(){e.on("timeupdate",t.checkToStartMidroll)})}},{key:"handleStopOrResume",value:function(){this.midrollState_===O.IDLE?this.resumeHandleEvent():this.dispose()}},{key:"checkToStartMidroll",value:function(){this.midrollPrepare(),this.midrollCountDown()}},{key:"_handleGetVastResponse",value:function(t){this.midrollState_===O.PREPAIRING&&(this.vastResponse=t)}},{key:"_getVastResponse",value:function(){function t(t){r&&_.initAd({player:i,skipoffset:o,adTagUrl:n,vastResponse:t,type:"midroll",preLoaded:r}),i.one(I.EVENT.AD_ORDER_START_MIDROLL,function(){_.initAd({player:i,skipoffset:o,adTagUrl:n,vastResponse:t,type:"midroll",preLoaded:r})})}var e=this.props,n=e.adTagUrl,o=e.skipoffset,i=e.player,r=e.preLoaded,s=e.vastResponse,a=e.rules,c=this;return s?(this._handleGetVastResponse(s),void t(s)):Promise.resolve().then(function(){return _.getVastRespone({adTagUrl:n,isPackageAds:a.isPackageAds})}).then(function(e){c._handleGetVastResponse(e),t(e)}).catch(function(){c.dispose()})}},{key:"midrollPrepare",value:function(){var t=this.props,e=t.player,n=t.isCounting,o=t.checkAdStart,i=this;if(this.midrollState_===O.IDLE){var r=this.state.starttime;if(e.currentTime()+6>=r){if(n)return;if(o.currentTime>r&&o.adStart)return void this.dispose();n=!0,e.trigger("prepareMidrollVast",1),e.one("prepareMidrollVastSuccess",function(){i.prepareSuccess=!0}),this.midrollState_=O.PREPAIRING,this._getVastResponse()}}}},{key:"midrollCountDown",value:function(){var t=this.props,e=t.player,n=t.preLoaded;if(this.midrollState_===O.PREPAIRING&&this.vastResponse&&(!n||this.prepareSuccess)){var o=this.state.starttime,i=e.currentTime(),r=Math.round(o-i);r=r>=0&&r<=5?r:null,i>o&&(this.currentTime_=i,this.stopHandleEvent(),e.trigger(I.EVENT.AD_ORDER_START_MIDROLL,this.vastResponse)),0===r&&(this.midrollState_=O.RUNNING,this.currentTime_=i,this.stopHandleEvent(),e.trigger(I.EVENT.AD_ORDER_START_MIDROLL,this.vastResponse)),this.setState({timeToStart:r})}}},{key:"_startMidroll",value:function(){var t=this.props,e=t.skipoffset,n=t.player,o=void 0,i=void 0;if("string"==typeof this.vastResponse)o=this.vastResponse;else{if("object"!==m(this.vastResponse))return;i=this.vastResponse}_.initAd({player:n,skipoffset:e,adTagUrl:o,vastResponse:i,type:"midroll"})}},{key:"render",value:function(){var t=this.state,e=t.left,n=t.dispose,o=t.timeToStart;return n||o<=0||!e?null:c.createElement("div",null,c.createElement("div",{className:"midroll-marker",style:{left:e}}),"number"==typeof o?c.createElement("div",{className:"countdown-midroll"},"Quảng cáo sau: ",c.createElement("span",null,o,"s")):"")}}]),e}(e.Component),l.propTypes={player:t.PropTypes.object.isRequired,adTagUrl:t.PropTypes.string,checkAdStart:t.PropTypes.object,duration:t.PropTypes.number,isCounting:t.PropTypes.bool,preLoaded:t.PropTypes.bool,rules:t.PropTypes.object,seconds:t.PropTypes.number,skipoffset:t.PropTypes.number,vastResponse:t.PropTypes.array},u=h,i(u.prototype,"stopHandleEvent",[t.autobind],Object.getOwnPropertyDescriptor(u.prototype,"stopHandleEvent"),u.prototype),i(u.prototype,"resumeHandleEvent",[t.autobind],Object.getOwnPropertyDescriptor(u.prototype,"resumeHandleEvent"),u.prototype),i(u.prototype,"handleStopOrResume",[t.autobind],Object.getOwnPropertyDescriptor(u.prototype,"handleStopOrResume"),u.prototype),i(u.prototype,"checkToStartMidroll",[t.autobind],Object.getOwnPropertyDescriptor(u.prototype,"checkToStartMidroll"),u.prototype),i(u.prototype,"midrollPrepare",[t.autobind],Object.getOwnPropertyDescriptor(u.prototype,"midrollPrepare"),u.prototype),i(u.prototype,"midrollCountDown",[t.autobind],Object.getOwnPropertyDescriptor(u.prototype,"midrollCountDown"),u.prototype),u),S=t.playerconfig.DEFAULT,M=(f=p=function(t){function e(t){v(this,e);var n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={renderMidroll:!0},n.isCounting=!1,n.checkAdStart={adStart:!1},n.props.player.on(S.EVENT.PLAYER_ENDED_CONTEND,n._handleEnded),n}return k(e,t),y(e,[{key:"componentDidMount",value:function(){var t=this.props.player;t.on("durationchange",this._checkDuration),t.on("loadedmetadata",this._checkDuration),this._checkDuration()}},{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off("durationchange",this._checkDuration),t.off("loadedmetadata",this._checkDuration)}},{key:"_checkDuration",value:function(){var t=this.props.player,e=t.duration();!e||e<40||Number.isNaN(e)||0===e||(t.off("loadedmetadata",this._checkDuration),t.off("durationchange",this._checkDuration),this.setState({duration:e}),this._updatePosition(e))}},{key:"_updatePosition",value:function(t){var e=this.props.infoAd,n=[];Object.keys(e).map(function(e){r(e,t)});for(var i in e){var s=e[i],a=s.skipoffset,c=s.tag,u=s.durationLogical,l=s.durationValue,h=s.repeat,d=s.repeatTime,p=s.vastResponse,f=r(i,t);if(o({duration:t,durationValue:l,durationLogical:u})&&(n.push([a,c,f,!0,p]),h))for(var m=f+d;m<t;m+=d)n.push([a,c,m,!1,p])}n.sort(function(t,e){return t[2]-e[2]}),this._sortAdsRule(n)}},{key:"_sortAdsRule",value:function(t){var e=this.props.rules,n=this.state.duration,o=e.timeBetweenAds||0,i=e.startOn||1,r=void 0;H.havePreroll&&(r=o),t.map(function(e,s){if(e[2]<i)delete t[s];else if(0!==s||H.havePreroll){if(e[2]<=r)return void delete t[s];if(t[s][3])r=e[2]+o;else if(void 0!==t[s+1])if(t[s+1][3]){if(t[s+1][2]-e[2]<o)return void delete t[s];r=e[2]+o}else r=e[2]+o;else if(H.havePostroll&&n-e[2]<o)return void delete t[s]}else r=e[2]+o}),this.setState({sortInfoAd:t})}},{key:"_reRenderMidroll",value:function(){this.setState({renderMidroll:!0})}},{key:"_handleEnded",value:function(){var t=this.props.player;t.off("play",this._reRenderMidroll),t.one("play",this._reRenderMidroll),this.setState({renderMidroll:!1})}},{key:"render",value:function(){var t=this.props,e=t.player,n=t.preLoaded,o=t.rules,i=this,r=this.state,s=r.renderMidroll,a=r.duration,u=r.sortInfoAd;return s&&a&&u?c.createElement("div",{className:"midroll-display"},u.map(function(t,r){return c.createElement(R,{key:r,seconds:t[2],adTagUrl:t[1],skipoffset:t[0],vastResponse:t[4],player:e,duration:a,isCounting:i.isCounting,checkAdStart:i.checkAdStart,preLoaded:n,rules:o})})):null}}]),e}(e.Component),p.propTypes={player:t.PropTypes.object.isRequired,infoAd:t.PropTypes.object,preLoaded:t.PropTypes.bool,rules:t.PropTypes.object},d=f,s(d.prototype,"_checkDuration",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"_checkDuration"),d.prototype),s(d.prototype,"_reRenderMidroll",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"_reRenderMidroll"),d.prototype),s(d.prototype,"_handleEnded",[t.autobind],Object.getOwnPropertyDescriptor(d.prototype,"_handleEnded"),d.prototype),d),D=function(e,n,o){var i=e.options(),r=i.params,s=i.plugins,a=!1;t.agent.isIOS||r.noAdsLoad||(a=!0),s.AdsPlayerPlugin||(a=!1);var u=c.createElement(M,{key:"MidrollDisplay",infoAd:n,player:e,rules:o,preLoaded:a});e.container.controlBar.progressControl.progressSlider.addChild(u)},V=new(function(){function t(){v(this,t)}return y(t,[{key:"getLinkAds",value:function(t,e){var n=!1,o=-1,i="",r=-1,s=-1;void 0!==window._chkPrLink&&(n=window._chkPrLink),void 0!==window.admtvcPgid&&(i=window.admtvcPgid());var a=[];a.dantri=5939,a.kenh14=5938,a.genk=5940,a.gamek=475198,a.afamily=5942,a.autopro=5944,a.cafef=5943,a.linkhay=5941,a.giadinh=5945,a[71]=2657,a.sohanews=5818,a.soha=5818,a.channelvn=2657,a.cafebiz=5943,a.vcmedia="vcmedia",a.thegioivanhoa=6703,a.phim14=7692,a["beta.autopro"]=5944,a.vtv=23260,a.ttvn=25438,a.thanhnien=37079,a.docbao=7493,a.thethaovanhoa=502991,a.anninhthudo=16834,a.bongda24h=32159,a.bongdanet=11227,a.laodong=10698,a.vtc=6300,a.tuoitre=488052,a.webtretho=501452,a.toquoc=512260,a.channelvn=5944,a.thethao247=514470,this.arrZoneIDMobile=a;var c=[];c.webtretho=501451,c.kenh14=2656,c.dantri=2657,c.autopro=2760,c.afamily=2763,c.genk=2658,c.gamek=475197,c.cafef=2661,c.cafebiz=2661,c.giadinh=2971,c.libero=4298,c.nld=2790,c.phapluattp=2787,c.phapluattp=2787,c.sannhac=2762,c.socnhi=3034,c.sohanews=2761,c.soha=2761,c.suckhoedoisong=2972,c.vneconomy=3385,c["beta.autopro"]=2760,c.vtv=6301,c.ttvn=25437,c.thanhnien=37079,c.docbao=7493,c.thethaovanhoa=502990,c.anninhthudo=16834,c.bongda24h=32159,c.bongdanet=11227,c.laodong=10698,c.ole=42329,c.go=42341,c.tintuc=42331,c.lichthidau=42334,c.docbaogiay=42337,c.vntinnhanh=42338,c.tuoitre=488051,c.ale=42340,c.bongda=42333,c.vtc=6300,c.sggp=475266,c.saigondautu=477879,c.sggpnews=477878,c.toquoc=512259,c.channelvn=5944,c.thethao247=514469,this.arrZoneID=c;var u=e.sspid||this.createZoneId(t),l="0;0;0;0",h=0,d=t.mediaInfo.domain,p=t.mediaInfo.vid,f=t.mediaInfo.pathname,v=void 0,y=void 0;s=e.position;var b=void 0;try{b=top.document.URL}catch(t){b=document.referrer?document.referrer:location.href}var k=!1;try{window.top!==window.self&&window.top.location!==window.self.location&&(k=!0)}catch(t){k=!0}if(void 0===f&&""==f&&(f=b.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[3]),k)try{d=b.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2]}catch(t){d=location.ancestorOrigins[0]}if(void 0!==t.mediaInfo._admParamTvc&&""!=t.mediaInfo._admParamTvc&&(l=t.mediaInfo._admParamTvc),void 0!==t.mediaInfo.tag&&""!=t.mediaInfo.tag&&(h=t.mediaInfo.tag),void 0===t.mediaInfo.vid&&""==t.mediaInfo.vid&&(p=t.mediaInfo.file),t.mediaInfo.pid&&(o=t.mediaInfo.pid),void 0!=m(t.options().params.vtype)&&null!=t.options().params.vtype&&""!=t.options().params.vtype&&(r=t.options().params.vtype),h&&void 0!==h||t.on("updateMediaInfo",function(){h=t.mediaInfo.tag}),0==n)return l=l.split(";"),0==(y=l[0])&&(y=-1),0!=this.getQueryVariable("_bid")&&(y=this.getQueryVariable("_bid")),v=this.createLinkSpp({domain:d,pathname:f,zoneID:u,pgid:i,pid:o,tag:h,adstype:s,vtype:r,vid:p,bannerid:y}),void 0!==t.mediaInfo.vast&&(v=decodeURIComponent(t.mediaInfo.vast)),encodeURIComponent(v)}},{key:"createZoneId",value:function(t){var e=location.hostname.replace("http://",""),n=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("https://","")).replace("http://www.","")).replace("https://www.","")).replace(".com","")).replace(".vn","")).replace(".net","")).replace(".org","")).replace(".info","")).replace(".edu","")).split(".");return n.length>1&&(e=n[1]),t.mediaInfo.isMobile?this.arrZoneIDMobile[e]?this.arrZoneIDMobile[e]:"0":this.arrZoneID[e]?this.arrZoneID[e]:"0"}},{key:"createLinkSpp",value:function(t){var e=t.domain,n=t.pathname,o=t.zoneID,i=t.pgid,r=t.pid,s=t.tag,a=t.adstype,c=t.vtype,u=t.vid,l=t.bannerid;return"https://sspapi.admicro.vn/ssp_request/video?u="+encodeURIComponent(e+n)+"&z="+o+"&p=1&w=650&h=300"+i+"&pid="+r+"&tags="+s+"&adstype="+a+"&vtype="+c+"&vid="+encodeURIComponent(u)+"&bannerlimit=5&bannerid="+l}},{key:"getQueryVariable",value:function(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t)return o[1]}return!1}}]),t}()),z=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},C={view:100,start:101,midpoint:102,firstQuartile:103,thirdQuartile:104,complete:105,mute:106,unmute:107,pause:108,rewind:109,resume:110,fullscreen:111,expand:112,collapse:113,close:114,click:115},L=function t(e,n){var o,i=[];for(o in e)if(e.hasOwnProperty(o)){var r=n?n+"["+o+"]":o,s=e[o];i.push(null!==s&&"object"===(void 0===s?"undefined":m(s))?t(s,r):encodeURIComponent(r)+"="+encodeURIComponent(s))}return i.join("&")},N=t.playerconfig.DEFAULT,x=function(t){function e(t){v(this,e);var n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o=n.props,i=o.adRequest,r=o.ref,s=o.player;n.props.track_url=i.rules.log+"?";var a=i.advertising.adscheduleid,c=r?decodeURIComponent(r):document.referrer?document.referrer:location.href,u=document.location.href;/adminplayer\.sohatv\.vn/.test(u)&&(u=c),window.top!=window.self&&(u=c);var l=u.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/),h="-1";l&&l.length&&(h=l[2]);var d;return localStorage.hasOwnProperty("userId")?d=localStorage.getItem("userId"):(d=z(),localStorage.setItem("userId",d)),n.state={params:{zid:a,lsn:d,dmn:h,i:localStorage.userId}},n.track({cov:C.view}),n._handleAdStart=n._handleAdStart.bind(n),n._handleTrackQuartiles=n._handleTrackQuartiles.bind(n),n._handleTrackFullscreen=n._handleTrackFullscreen.bind(n),n._handlePauseAds=n._handlePauseAds.bind(n),n._handleResumeAds=n._handleResumeAds.bind(n),n._handleSkipAds=n._handleSkipAds.bind(n),n._handleVolumeAds=n._handleVolumeAds.bind(n),n._handleClickAds=n._handleClickAds.bind(n),n._handleEndContentAds=n._handleEndContentAds.bind(n),n._handleAdEnded=n._handleAdEnded.bind(n),s.on(N.EVENT.VAST_AD_START,n._handleAdStart),s.on(N.EVENT.VPAID_AD_START,n._handleAdStart),s.on(N.EVENT.AD_END,n._handleAdEnded),s.on(N.EVENT.AD_PAUSE_AD,n._handlePauseAds),s.on(N.EVENT.AD_RESUME_AD,n._handleResumeAds),s.on(N.EVENT.AD_SKIP,n._handleSkipAds),s.on(N.EVENT.VPAID_AD_SKIPPED,n._handleSkipAds),s.on(N.EVENT.VAST_AD_CLICK_THRU,n._handleClickAds),s.on(N.EVENT.VPAID_AD_CLICK_THRU,n._handleClickAds),n}return k(e,t),y(e,[{key:"_handleAdEnded",value:function(){var t=this.props.player;t.off("timeupdate",this._handleTrackQuartiles),t.off("fullscreenchange",this._handleTrackFullscreen),t.off("advolumechange",this._handleVolumeAds),t.off("advideoend",this._handleEndContentAds)}},{key:"_handleAdStart",value:function(){var t=this.props.player,e=this,o=document.getElementById(""+t.tech_.options_.techId),i=new n,r=[n.MeasurementTechniques.IntersectionObserver],s={inViewThreshold:.5,timeInView:2e3},a=n.Strategies.StrategyFactory(!0,r,s);i.measureElement(o,a).onViewableStart(function(){}).onViewableComplete(function(){e.track({cov:C.start})}),t.vastAd.adUnit().getAdDuration().then(function(t){e.setState({quartiles:{firstQuartile:{tracked:!1,time:Math.round(25*t*1e3)/100},midpoint:{tracked:!1,time:Math.round(50*t*1e3)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t*1e3)/100}}})}),t.on("timeupdate",this._handleTrackQuartiles),t.on("fullscreenchange",this._handleTrackFullscreen),t.on("advolumechange",this._handleVolumeAds),t.one("advideoend",this._handleEndContentAds)}},{key:"_handleEndContentAds",value:function(){this.track({cov:C.complete})}},{key:"_handleVolumeAds",value:function(){var t=this.props.player,e=this,n=void 0;t.vastAd.adUnit().getAdVolume().then(function(o){"VAST"===t.vastAd.adUnit().type?o&&!t.muted()?n="unmute":(0===o||t.muted())&&(n="mute"):n=o?"unmute":"mute",e.track({cov:C[n]})})}},{key:"_handleClickAds",value:function(){this.track({cov:C.click})}},{key:"_handleSkipAds",value:function(){this.track({cov:C.close})}},{key:"_handlePauseAds",value:function(){this.track({cov:C.pause})}},{key:"_handleResumeAds",value:function(){this.track({cov:C.resume})}},{key:"_handleTrackFullscreen",value:function(){this.props.player.isFullscreen()&&this.track({cov:C.fullscreen})}},{key:"_canBeTracked",value:function(t,e){var n=t.time;return e>=n&&e<=n+5e3}},{key:"_trackQuartile",value:function(t,e){var n=this.state.quartiles[t];n.tracked||this._canBeTracked(n,e)&&(n.tracked=!0,this.track({cov:C[t]}))}},{key:"_handleTrackQuartiles",value:function(){var t=this.props.player,e=this.state.quartiles;if(e){var n=1e3*t.currentTime(),o=e.firstQuartile,i=e.midpoint,r=e.thirdQuartile;o.tracked||this._trackQuartile("firstQuartile",n),i.tracked||this._trackQuartile("midpoint",n),r.tracked||this._trackQuartile("thirdQuartile",n)}}},{key:"track",value:function(t){var e=this.state.params,n=this.props.track_url,o=b({},e,t),i=L(o);(new Image).src=n+i}}]),e}(t.Plugin),q=a.getComponent("Player"),U={PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll"},H=new(function(){function t(){v(this,t),this.havePreroll=!1,this.havePostroll=!1,this.rules={log:"https://lg1.logging.admicro.vn/tvccms",positionOnSite:"1",timeBetweenAds:0}}return y(t,[{key:"getInfoAd",value:function(t,e){this.player_=t,this.adRequest_=e,this.classifiedAds()}},{key:"classifiedAds",value:function(){var t=this.adRequest_,e=this.player_,n=t.advertising,o=t.rules;this.rules=o,this.rules.isPackageAds=!0,new x({player:e,adRequest:t}),this.scheduleAds(n.schedule)}},{key:"scheduleAds",value:function(t){var e=this.player_,n=void 0,o=void 0,i={},r=0,s=this;for(var a in t){var c=t[a],u=c.sspid,l=c.isAddLinkSSP;if("start"===t[a].offset)(n=t[a]).tag=n.tag+this.createTagMacros({position:r,isAddLinkSSP:l,sspid:u});else if("end"===t[a].offset)(o=t[a]).tag=o.tag+this.createTagMacros({position:r,isAddLinkSSP:l,sspid:u});else{i[t[a].offset]={};var h=t[a],d=h.tag,p=h.skipoffset,f=h.repeat,m=h.repeatTime,v=h.durationLogical,y=h.durationValue,b=h.sspid;d+=this.createTagMacros({position:r,isAddLinkSSP:l,sspid:b}),i[t[a].offset]={tag:d,skipoffset:p,repeatTime:m,repeat:f,durationLogical:v,durationValue:y}}r++}s._createPreroll(e,n,!0),s._createMidroll(e,i),s._createPostroll(e,o)}},{key:"createTagMacros",value:function(t){var e=this.player_,n=e.mediaInfo.domain,o=e.mediaInfo.pathname,i=t.isAddLinkSSP,r=t.position,s=t.sspid;void 0===e.mediaInfo.domain&&""==e.mediaInfo.domain&&(n=location.hostname),void 0===e.mediaInfo.pathname&&""==e.mediaInfo.pathname&&(o=location.pathname);var a=V.getLinkAds(e,{position:r,sspid:s});i||(a="");var c=void 0===window._ADM_Channel?"":window._ADM_Channel;return"&domain="+encodeURIComponent(n+o)+"&link="+a+"&category="+c+this._admtvcPgid()}},{key:"_admtvcPgid",value:function(){try{var t=!1;"undefined"!=typeof _ADM_Channel&&-1!=window._ADM_Channel.indexOf("detail")&&(t=!0);var e=document.location.pathname;if(!t&&55<e.length&&(t=!0),void 0!==window.ADS_CHECKER){var n=window.ADS_CHECKER.getCookie("__RC");return n=""!=n&&101<parseInt(n)?101:n,"&pgid="+window.__admloadPageId+"&dgid="+window.__admloadPageIdc+"&l="+n+"&loc="+n+"&uid="+window.ADM_AdsTracking.get("__uid")+"&isdetail="+(t?"1":"0")}if("undefined"!=typeof ADM_CHECKER)return n=window.ADM_CHECKER.getCookie("__RC"),n=""!=n&&101<parseInt(n)?101:n,"&pgid="+window.__m_admPageloadid+"&dgid="+window.__admloadPageRdIdc+"&l="+n+"&loc="+n+"&uid="+window.ADM_CHECKER.__uid+"&isdetail="+(t?"1":"0")}catch(t){return""}}},{key:"_createPreroll",value:function(t,e,n){if(e&&!t.options().params.nopre){var i=e.durationValue,r=e.durationLogical;!o({duration:t.duration(),durationValue:i,durationLogical:r})&&n||(this.havePreroll=!0,E(t,e,this.rules))}}},{key:"_createMidroll",value:function(t,e){var n=this,o=t.options().params.preLoadVast;if(Object.keys(e).length){var i=[];if(o){for(var r in e)e[r].offset=r,i.push(this._getVastResponse(e[r]));return Promise.all(i.map(function(t){return t.catch(function(){return[]})})).then(function(e){var o={};if(e.length){if(e.map(function(t){void 0!==t&&(o[t.offset]=t)}),!Object.keys(o).length||0===Object.keys(o).length)return;D(t,o,n.rules)}})}D(t,e,this.rules)}}},{key:"_getVastResponse",value:function(t){var e=this;return Promise.resolve().then(function(){return _.getVastRespone({adTagUrl:t.tag,isPackageAds:e.rules.isPackageAds})}).then(function(e){return t.vastResponse=e,t}).catch(function(){})}},{key:"_createPostroll",value:function(t,e){var n=this,o=t.options().params,i=o.preLoadVast,r=o.postroll;if(e&&r)return this.havePostroll=!0,i?_.getVastRespone({adTagUrl:e.tag,isPackageAds:this.rules.isPackageAds}).then(function(o){P(t,e,{rules:n.rules,vastResponse:o})}).catch(function(){}):P(t,e,{rules:this.rules,vastResponse:void 0})}},{key:"createDefaultAds",value:function(t){var e=t.options().params,n=e.ima,o=e.vast,i=e.midroll,r={durationLogical:">=",durationValue:"20",skipoffset:0,tag:o||n},s=this;this.rules.isPackageAds=!1;var a=r,c=r;a.tag=this._getVastInAdmicro(t,{type:U.PREROLL,position:0}),c.tag=this._getVastInAdmicro(t,{type:U.POSTROLL,position:10}),this._createPreroll(t,a,!1),this._createPostroll(t,c);var u={};if(i){if("string"==typeof i){var l=i.match(/(0\.\d+)/g),h=i.match(/(\d+)(?=s)/g);for(i=[];l&&l.length;){var d=l.shift();i.push({position:d})}for(;h&&h.length;){var p=h.shift();i.push({position:p})}}if(!i.length)return null;i.map(function(e){r.tag=s._getVastInAdmicro(t,{type:U.MIDROLL}),u[e.position]=r}),this._createMidroll(t,u)}}},{key:"_getVastInAdmicro",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.options().params;return q.prototype.kinghubAdmicroADSPlugin?q.prototype.kinghubAdmicroADSPlugin.call(t,e):n.vast?n.vast:void 0}}]),t}()),F=function(t){var e=t.player,n=t.domain,o=[{domain:"autopro.com.vn",pc:"https://static.contineljs.com/cms/arf-autopro.com.vn-jqp0j9py-1.json",mb:"https://static.contineljs.com/cms/arf-autopro.com.vn-jqp0j9py-2.json"},{domain:"genk.vn",pc:"https://static.contineljs.com/cms/arf-genk.vn-judhsgoi-1.json",mb:"https://static.contineljs.com/cms/arf-genk.vn-judhsgoi-2.json"},{domain:"gamek.vn",pc:"https://static.contineljs.com/cms/arf-gamek.vn-judhswul-1.json",mb:"https://static.contineljs.com/cms/arf-gamek.vn-judhswul-2.json"},{domain:"kenh14.vn",pc:"https://static.sourcetobin.com/cms/arf-kenh14.vn-k3nrhg9h-1.json",mb:"https://static.sourcetobin.com/cms/arf-kenh14.vn-k3nrhg9h-2.json"},{domain:"soha.vn",pc:"https://static.contineljs.com/cms/arf-soha.vn-k3nri53c-1.json",mb:"https://static.contineljs.com/cms/arf-soha.vn-k3nri53c-2.json"},{domain:"cafef.vn",pc:"https://static.contineljs.com/cms/arf-cafef.vn-k3nrjeki-1.json",mb:"https://static.contineljs.com/cms/arf-cafef.vn-k3nrjeki-2.json"},{domain:"cafebiz.vn",pc:"https://static.contineljs.com/cms/arf-cafebiz.vn-k3jjoi4o-1.json",mb:"https://static.contineljs.com/cms/arf-cafebiz.vn-k3jjoi4o-2.json"},{domain:"afamily.vn",pc:"https://static.contineljs.com/cms/arf-afamily.vn-k3nrk7yw-1.json",mb:"https://static.contineljs.com/cms/arf-afamily.vn-k3nrk7yw-2.json"},{domain:"vtv.vn",pc:"https://static.contineljs.com/cms/arf-vtv.vn-k7nixzek-1.json",mb:"https://static.contineljs.com/cms/arf-vtv.vn-k7nixzek-2.json"},{domain:"nld.com.vn",pc:"https://static.contineljs.com/cms/arf-nld.com.vn-k7nizl6n-1.json",mb:"https://static.contineljs.com/cms/arf-nld.com.vn-k7nizl6n-2.json"},{domain:"giadinh.net.vn",pc:"https://static.contineljs.com/cms/arf-giadinh.net.vn-k7nj1734-1.json",mb:"https://static.contineljs.com/cms/arf-giadinh.net.vn-k7nj1734-2.json"},{domain:"thethaovanhoa.vn",pc:"https://static.contineljs.com/cms/arf-thethaovanhoa.vn-juwc8z6a-k3txyr2z.json",mb:"https://static.contineljs.com/cms/arf-thethaovanhoa.vn-juwc8z6a-k3txyr2z.json"}].find(function(t){return n.search(t.domain)>=0});return void 0===o?null:e.mediaInfo.isMobile?o.mb:o.pc},G=function(t){var e=t.player,n=t.pathname,o=[{path:"/thoi-su/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um6lyz.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unovg0.json"},{path:"/the-gioi/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7un6kpt.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unpb8p.json"},{path:"/tai-chinh-kinh-doanh/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um9tak.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unpzb9.json"},{path:"/kinh-doanh/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um9tak.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unpzb9.json"},{path:"/doi-song/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7umbxt3.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unr9ts.json"},{path:"/van-hoa/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7umee7w.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unrksu.json"},{path:"/gioi-tre/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7un7zi2.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unrzhr.json"},{path:"/giao-duc/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7un8mqs.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unsd1n.json"},{path:"/the-thao/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7una4uh.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unsrp1.json"},{path:"/suc-khoe/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unats1.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unt5y0.json"},{path:"/cong-nghe/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unbg70.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unth2c.json"},{path:"/xe/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unc337.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7untsye.json"},{path:"/game/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7uncp90.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unu418.json"},{path:"/toi-viet/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7und9v4.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unuh63.json"},{path:"/chinh-tri/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7une3en.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unutw4.json"},{path:"/e-magazine/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7ung3jn.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unnod0.json"},{path:"/magazine/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unewre.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unmgpn.json"},{path:"/video/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7um2iwk.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7unojvi.json"}].find(function(t){return n.search(t.path)>=0});return void 0===o&&(o={path:"/",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7ultuac.json",mb:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k7uno6uc.json"}),e.mediaInfo.isMobile?o.mb:o.pc},B=function(t){var e=t.domain,n=t.player,o=t.channel,i=[{channel:"home",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uszbrl.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuovr3.json"},{channel:"binh-duong",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut5hr2.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uupvep.json"},{channel:"ban-doc-lam-bao",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut68sk.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuqddk.json"},{channel:"can-biet",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut6y1x.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uurcev.json"},{channel:"cong-nghe",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut7onl.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9v38e74.json"},{channel:"du-lich",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut8bup.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuruu0.json"},{channel:"gia-that",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9ut9lco.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uusjd3.json"},{channel:"giai-tri",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utabo2.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uutd8b.json"},{channel:"giao-duc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utj6an.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uutvbx.json"},{channel:"khoa-hoc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utk6vv.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuuejm.json"},{channel:"kinh-doanh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utmmrx.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuuux5.json"},{channel:"video",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utowf3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuvkj7.json"},{channel:"media",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utowf3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuvkj7.json"},{channel:"mekong-xanh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utqe9v.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuw6oa.json"},{channel:"nha-dat",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utt383.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuy6q9.json"},{channel:"nhip-song-tre",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utv1ph.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuytxj.json"},{channel:"phap-luat",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utvq99.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuzggh.json"},{channel:"search",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utxi8x.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv001j.json"},{channel:"suc-khoe",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uty8nk.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv0hez.json"},{channel:"the-gioi",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utz1oj.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv0yth.json"},{channel:"the-thao",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9utzyrv.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv7k8a.json"},{channel:"thoi-su",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uu0qh3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uv8kid.json"},{channel:"thu-gian",pc:"https://static.contineljs.com/cms/arf-thanhnien.vn-k7nj1yv7-k9uubko7.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uva54a.json"},{channel:"tuyen-sinh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uufbsx.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uvanp1.json"},{channel:"van-hoa",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uug9ii.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uvhz3m.json"},{channel:"xe",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuh8d4.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uvik5g.json"}];"tv.tuoitre.vn"==e?i=[{channel:"home",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9860pp3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k98855nv.json"},{channel:"tin-nong/tin-nong-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9862xgh.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987up1o.json"},{channel:"tin-nong-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9862xgh.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987up1o.json"},{channel:"channel/tin-nong-24h-40",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9862xgh.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987up1o.json"},{channel:"giai-tri/giai-tri-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9869e4h.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987wkfo.json"},{channel:"giai-tri-24h",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9869e4h.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987wkfo.json"},{channel:"tin-nong",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986afg3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987yuki.json"},{channel:"dac-sac",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986beya.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987zbh4.json"},{channel:"the-gioi-muon-mau",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986c8l0.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987zwdi.json"},{channel:"chuyen-doi-thuong",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986d34u.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9880ef7.json"},{channel:"ban-co-biet",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986dwcd.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9880w20.json"},{channel:"the-thao",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986ew1m.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9882az7.json"},{channel:"giai-tri",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986g7ci.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9882t6c.json"},{channel:"hai-huoc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986hdtf.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9883wk4.json"}]:"cuoi.tuoitre.vn"==e&&(i=[{channel:"biem-hoa",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986rmkm.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9884le7.json"},{channel:"home",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986sayg.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987suyb.json"},{channel:"tin-tuc",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986tefp.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9885xtl.json"},{channel:"doi-cuoi",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986usph.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9886yux.json"},{channel:"giai-tri",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987er4n.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9887nmp.json"},{channel:"truyen-tranh",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987ffva.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9888au4.json"},{channel:"zoi-tre",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987giym.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9888pzt.json"},{channel:"video",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986u4p7.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9886fp4.json"},{channel:"post-video",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986u4p7.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9886fp4.json"}]);var r=i.find(function(t){return o.search(t.channel)>=0});if(void 0===r)switch(e){case"tuoitre.vn":r={path:"/",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uszbrl.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9uuovr3.json"};break;case"tv.tuoitre.vn":r={path:"/",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k9860pp3.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k98855nv.json"};break;case"cuoi.tuoitre.vn":r={path:"/",pc:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k986sayg.json",mb:"https://static.sourcetobin.com/cms/arf-tuoitre.vn-jy9syzdm-k987suyb.json"}}return n.mediaInfo.isMobile?r.mb:r.pc},Q=a.getComponent("Player");a.registerPlugin("adsVastPlugin",function(){function t(t,e){t&&e&&H.getInfoAd(o,t)}function e(){var n=o.duration();n&&(o.off("durationchange",e),t(i,r=n))}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this,i=void 0,r=void 0,s=void 0,a=void 0,c=void 0,u=!1,l=o.options(),h=l.params,d=l.plugins;a=o.mediaInfo.domain,c=o.mediaInfo.pathname;var p=void 0;try{p=top.document.URL}catch(t){p=document.referrer?document.referrer:location.href}var f=!1;try{window.top!==window.self&&window.top.location!==window.self.location&&(f=!0)}catch(t){f=!0}if(void 0===c&&""==c)try{c=top.document.URL}catch(t){c=p.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[3]}if(f)try{a=p.match(/(http[s]?:\/\/)?([^\s]+)(\/.*)/)[2]}catch(t){a=location.ancestorOrigins[0]}try{void 0!==window._chkPrLink&&(u=top._chkPrLink)}catch(t){}if(!1!==h.ads&&(d.kinghubAdmicroADSPlugin||!Q.prototype.kinghubAdmicroADSPlugin)){if(a.indexOf("tuoitre.vn")>=0){var m=decodeURIComponent(top._ADM_Channel);s=B({domain:a,channel:m,player:o})}else s=a.indexOf("thanhnien.vn")>=0?G({pathname:c,player:o}):F({domain:a,player:o});if(o.on("durationchange",e),n.jsonAd)return i=JSON.parse(n.jsonAd),void t(i,r);o.one("ready",function(){h.vast||h.ima?H.createDefaultAds(o):s&&!u&&j({url:s,method:"GET"}).then(function(e){t(i=JSON.parse(e),r)})})}})})}();/**
 * AdsPlayerPlugin - v1.4.7 - 16:23:22 15-07-2020
 * Author: tungtm
 */

!function(){var t=void 0;!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof t&&t.amd?t(["playercore","react"],n):n(e.Kenh14PlayerCore,e.React)}(this,function(t,e){"use strict";function n(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function r(){}function i(t){return null===t}function o(t){return void 0!==t}function a(t){return"object"===(void 0===t?"undefined":ot(t))}function u(t){return"function"==typeof t}function s(t){return"number"==typeof t}function l(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t){return"string"==typeof t}function d(t){return c(t)&&0===t.length}function f(t){return c(t)&&0!==t.length}function p(t){return Array.prototype.slice.call(t)}function h(t,e,n){var r,i;if(t)if(u(t))for(r in t)"prototype"===r||"length"===r||"name"===r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(l(t)){var o="object"!==(void 0===t?"undefined":ot(t));for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==h)t.forEach(e,n,t);else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);return t}function v(t){var e,n,r;for(n=1;n<arguments.length;n++){e=arguments[n];for(r in e)e.hasOwnProperty(r)&&(a(t[r])&&!i(t[r])&&a(e[r])?t[r]=v({},t[r],e[r]):t[r]=e[r])}return t}function g(t){return t.charAt(0).toUpperCase()+t.slice(1)}function y(t){return t.charAt(0).toLowerCase()+t.slice(1)}function _(t,e){var n=[];return t.forEach(function(t,r){var i=e(t,r);o(i)&&n.push(i)}),n}function A(t,e){var n=t+"";if(e=s(e)?e:0,t=s(t)?t:parseInt(t,10),s(t)&&!isNaN(t)){for(n=t+"";n.length<e;)n="0"+n;return n}return"NaN"}function m(t,e){var n=(new Date).getTime()-(e+1);return function(){var r=(new Date).getTime();r-n>=e&&(n=r,t.apply(this,arguments))}}function E(t){return s(t)&&(t+=""),!!c(t)&&ht.test(t.trim())}function T(){var t=k(navigator);return-1!==t&&t<10}function k(t){var e=-1;if("Microsoft Internet Explorer"==t.appName){var n=t.userAgent,r=new RegExp("MSIE ([0-9]{1,}\\.[0-9]{0,})").exec(n);null!==r&&(e=parseFloat(r[1]))}return e}function b(){}function P(t,e,n){var r=document.createElement("iframe");return r.src=e||"about:blank",r.marginWidth="0",r.marginHeight="0",r.frameBorder="0",r.width="100%",r.height="100%",I(r),n&&(r.style.zIndex=n),r.setAttribute("SCROLLING","NO"),t.innerHTML="",t.appendChild(r),r}function I(t){t&&(t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.margin="0px",t.style.padding="0px",t.style.border="none",t.style.width="100%",t.style.height="100%")}function R(t,e){return Object.keys(e).forEach(function(n){var r="object"==typeof r?JSON.stringify(e[n]):e[n];t=t.replace(new RegExp("{{"+n+"}}","g"),r)}),t}function V(t,e){var n=t.contentWindow&&t.contentWindow.document;return!!n&&(n.write(e),!0)}function w(t,e,n){}function S(t,e,n){Object.defineProperty(t,e,{writable:!1,configurable:!1,value:n})}function D(){this._subscribers={}}function L(t,e,n,r){this._isValid=Rt(t),this._isValid&&(this._creative=t,this._el=e,this._videoEl=n,this._iframe=r,this._subscribers=new It,At.setFullSizeStyle(e),O.call(this))}function O(){if(St.forEach(function(t){this._creative.subscribe(N.bind(this,t),t)}.bind(this)),this._creative.subscribe(C.bind(this),wt),this._videoEl){var t=this._iframe.contentDocument.documentElement,e=this._videoEl;t.addEventListener("click",function(n){n.target===t&&e.click()})}}function C(t,e,n){this._subscribers.triggerSync(wt,{url:t,id:e,playerHandles:n})}function N(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}function U(t,e,n,r){t?t(n,r):n&&e.trigger(Vt,n)}function M(t,e,n,r){n=n||{},this._id=Lt(),this._destroyed=!1,this._frameContainer=At.createElementInEl(t,"div"),this._videoEl=e,this._vpaidOptions=r||{timeout:1e4},this._templateConfig={template:n.template||Ot,extraOptions:n.extraOptions||{}}}function x(t){var e=this[t];e&&e.parentNode&&(e.parentNode.removeChild(e),delete this[t])}function j(){z.call(this),delete this._adUnit}function F(){z.call(this),B.call(this)}function z(){x.call(this,"_frame"),W.call(this)}function W(){this._onLoad&&(window.removeEventListener("message",this._onLoad),delete this._onLoad)}function B(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function H(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}function q(){return"null"===window.location.origin?window.location.ancestorOrigins[0]:window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function G(t,e){e.forEach(function(e){t.push(e)})}function K(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function $(t,e){return e={exports:{}},t(e,e.exports),e.exports}function X(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function Q(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function Y(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function Z(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function J(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function tt(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var et,nt,rt="default"in t?t.default:t,it="default"in e?e.default:e,ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at=(function(){function t(t){this.value=t}function e(e){function n(i,o){try{var a=e[i](o),u=a.value;u instanceof t?Promise.resolve(u.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(t,e){return new Promise(function(r,a){var u={key:t,arg:e,resolve:r,reject:a,next:null};o?o=o.next=u:(i=o=u,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}),ut=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},st=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),lt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ct=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},dt=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},ft=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},pt=(nt=et=function(){function e(t){ut(this,e),this.state={},this._validProps(t),this._initProps(t)}return st(e,[{key:"getDefaultProps",value:function(){return this.constructor.defaultProps}},{key:"setState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.state||{};this.state=lt({},n,e),t.log.stateInfo({label:this.constructor.name,prevState:n,nextState:e})}},{key:"updateProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props||{};this.props=lt({},e,t)}},{key:"_initProps",value:function(t){var e=this.getDefaultProps(t);this.props=lt({},e,t)}},{key:"_validProps",value:function(e){var n=this.constructor.propTypes;t.PropTypes.checkPropTypes(n,e,"prop",this.constructor.name)}}]),e}(),et.propTypes={},et.defaultProps={},nt),ht=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,vt=function(){function t(){ut(this,t)}return st(t,null,[{key:"addClass",value:function(t,e){var n;if(f(e)){if(t.classList)return t.classList.add(e);n=c(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[],c(e)&&f(e.replace(/\s+/,""))&&(n.push(e),t.setAttribute("class",n.join(" ")))}}},{key:"addEventListener",value:function(e,n,r){l(e)?h(e,function(e){t.addEventListener(e,n,r)}):l(n)?h(n,function(n){t.addEventListener(e,n,r)}):e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent("on"+n,r)}},{key:"remove",value:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"removeEventListener",value:function(e,n,r){l(e)?h(e,function(e){t.removeEventListener(e,n,r)}):l(n)?h(n,function(n){t.removeEventListener(e,n,r)}):e.removeEventListener?e.removeEventListener(n,r,!1):e.detachEvent?e.detachEvent("on"+n,r):e["on"+n]=null}},{key:"isDomElement",value:function(t){return t instanceof Element}},{key:"getDimension",value:function(t){var e;return!T()&&t.getBoundingClientRect?(e=t.getBoundingClientRect(),{width:e.width,height:e.height}):{width:t.offsetWidth,height:t.offsetHeight}}}]),t}(),gt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2];ut(this,t),this.code=e,this.msg=n,r&&(this.data=r)}return st(t,[{key:"extendsWithData",value:function(t){var e=this.code,n=this.msg;return new Error(e,n,t)}}]),t}(),yt=function(t,e){return new gt(t,e)},_t={ERROR_DF_99:yt(99,"timeout while waiting for the video to start playing"),ERROR_100:yt(100,"VASTClient, error parsing xml"),ERROR_102:yt(102,"VASTClient, not supported VAST version"),ERROR_301:yt(301,"VASTClient, request ad tag url error"),ERROR_303:yt(303,"VASTClient, no Ad in VAST tree"),ERROR_402:yt(402,"timeout while waiting for the video to start playing"),VPAIDHTML5TECH_INVALID_MEDIA_FILE:yt(700,"Invalid MediaFile"),VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL:yt(701,"Invalid container HtmlElement"),VPAIDHTML5TECH_INVALID_DOM_VIDEO_EL:yt(702,"Invalid HTMLVideoElement"),VPAIDHTML5TECH_MISSING_CALLBACK:yt(702,"Missing valid callback"),VASTTRACKER_ASSET_URI:yt(110,"VASTTracker, missing required the URI of the ad asset being played"),VASTTRACKER_VAST_RESPONSE:yt(111,"VASTTracker, missing required VAST response"),VASTClIENT_MISS_AD_TAG_URL:yt(120,"VASTClient, missing ad tag URL"),VASTClIENT_RESQUEST_AD_TAG_URL_ERROR:yt(121,"VASTClient, request ad tag url error"),VASTClIENT_NO_AD_IN_VAST_TREE:yt(303,"VASTClient, no Ad in VAST tree"),VASTClIENT_NOT_SUPPORT_VAST_VERSION:yt(102,"VASTClient, not supported VAST version"),VASTClIENT_PARSING_XML_ERROR:yt(100,"VASTClient, error parsing xml"),VASTClIENT_WRAPPER_LIMIT_REACHED:yt(302,"VASTClient, players wrapper limit reached"),VASTClIENT_AD_TYPE_NOT_SUPPORT:yt(200,"VASTClient, received an Ad type that is not supported"),VASTClIENT_MISSING_DURATION:yt(101,"VASTClient, missing duration field in VAST response"),VASTClIENT_MISSING_OFFSET_TRACKING:yt(101,"VASTClient, missing or wrong offset attribute on progress tracking event"),VALID_AD_ERROR_1:yt(101,"VASTClient, InLine and Wrapper both found on the same Ad"),VALID_AD_ERROR_2:yt(101,"VASTClient, nor wrapper nor inline elements found on the Ad"),VALID_AD_ERROR_3:yt(403,"VASTClient, could not find MediaFile that is supported by this video player"),VALID_AD_ERROR_4:yt(133,'VASTClient, missing "VASTAdTagURI" in wrapper'),VAST_INTEGRATOR_SOURCE_ERROR:yt(403,"VASTIntegrator, Could not find Ad mediafile supported by this player"),VPAID_INTEGRATOR_NOT_SUPPORT_MEDIAFILE:yt(150,"VPAIDIntegrator, Could not find a supported mediaFile"),VPAID_INTEGRATOR_HANDSHAKE_NOT_SUPPORT_VERSION:yt(151,"VPAIDIntegrator handshake, unsupported version"),VPAID_INTEGRATOR_ERROR_WHILE_WAITING_FINISH:yt(152," VPAIDIntegrator, error while waiting for the adUnit to finish playing"),VPAID_INTEGRATOR_ERROR_WHILE_INIT:yt(153," VPAIDIntegrator, error while waiting init adUnit"),VPAID_AD_UNIT_WRAPPER_AD_UNIT_NOT_FULLY:yt(160,"VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface"),VPAID_AD_UNIT_WRAPPER_METHOD_TIMEOUT:yt(161," VPAIDAdUnitWrapper, timeout while waiting for a response on call method"),VPAID_AD_UNIT_WRAPPER_INVALID_METHOD_NAME:yt(162," VPAIDAdUnitWrapper, invalid method name"),VPAID_AD_UNIT_WRAPPER_MISSING_CALLBACK:yt(163," VPAIDAdUnitWrapper, missing callback"),VPAID_AD_UNIT_WRAPPER_EVENT_TIMEOUT:yt(601," VPAIDAdUnitWrapper, timeout while waiting for event"),VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_NAME:yt(165," VPAIDAdUnitWrapper, missing event name"),VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_CALLBACK:yt(166," VPAIDAdUnitWrapper, missing event callback")},At={noop:b,validate:function(t,e){return t?null:new Error(e)},callbackTimeout:function(t,e,n){var r;return r=setTimeout(function(){e=b,n()},t),function(){e.apply(this,arguments)&&clearTimeout(r)}},createElementInEl:function(t,e,n){var r=document.createElement(e);return n&&(r.id=n),t.appendChild(r),r},createIframeWithContent:function(t,e,n){var r=P(t,null,n.zIndex);if(V(r,R(e,n)))return r},createIframe:P,setFullSizeStyle:I,simpleTemplate:R,setIframeContent:V,extend:function(t,e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},unique:function(t){var e=-1;return function(){return t+"_"+ ++e}}},mt=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],Et=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],Tt=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],kt=["setAdVolume"];w.prototype.handshakeVersion=function(t,e){},w.prototype.initAd=function(t,e,n,r,i,o,a){},w.prototype.startAd=function(t){},w.prototype.stopAd=function(t){},w.prototype.skipAd=function(t){},w.prototype.resizeAd=function(t,e,n,r){},w.prototype.pauseAd=function(t){},w.prototype.resumeAd=function(t){},w.prototype.expandAd=function(t){},w.prototype.collapseAd=function(t){},w.prototype.subscribe=function(t,e,n){},w.prototype.unsubscribe=function(t,e){},w.prototype.getAdLinear=function(t){},w.prototype.getAdWidth=function(t){},w.prototype.getAdHeight=function(t){},w.prototype.getAdExpanded=function(t){},w.prototype.getAdSkippableState=function(t){},w.prototype.getAdRemainingTime=function(t){},w.prototype.getAdDuration=function(t){},w.prototype.getAdVolume=function(t){},w.prototype.getAdCompanions=function(t){},w.prototype.getAdIcons=function(t){},w.prototype.setAdVolume=function(t,e){},S(w,"METHODS",mt),S(w,"GETTERS",Tt),S(w,"SETTERS",kt),S(w,"EVENTS",Et);var bt=mt.filter(function(t){return-1===["skipAd"].indexOf(t)});S(w,"checkVPAIDInterface",function(t){return bt.every(function(e){return"function"==typeof t[e]})});var Pt=w;D.prototype.subscribe=function(t,e,n){this.isHandlerAttached(t,e)||this.get(e).push({handler:t,context:n,eventName:e})},D.prototype.unsubscribe=function(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t!==e.handler})},D.prototype.unsubscribeAll=function(){this._subscribers={}},D.prototype.trigger=function(t,e){var n=this;this.get(t).concat(this.get("*")).forEach(function(t){setTimeout(function(){n.isHandlerAttached(t.handler,t.eventName)&&t.handler.call(t.context,e)},0)})},D.prototype.triggerSync=function(t,e){this.get(t).concat(this.get("*")).forEach(function(t){t.handler.call(t.context,e)})},D.prototype.get=function(t){return this._subscribers[t]||(this._subscribers[t]=[]),this._subscribers[t]},D.prototype.isHandlerAttached=function(t,e){return this.get(e).some(function(e){return t===e.handler})};var It=D,Rt=Pt.checkVPAIDInterface,Vt="AdError",wt="AdClickThru",St=Pt.EVENTS.filter(function(t){return t!=wt});(L.prototype=Object.create(Pt.prototype)).isValidVPAIDAd=function(){return this._isValid},Pt.METHODS.forEach(function(t){-1===["subscribe","unsubscribe","initAd"].indexOf(t)&&(L.prototype[t]=function(){var e=Pt.prototype[t].length,n=Array.prototype.slice.call(arguments),r=e===n.length?n.pop():void 0;setTimeout(function(){var e,i=null;try{e=this._creative[t].apply(this._creative,n)}catch(t){i=t}U(r,this._subscribers,i,e)}.bind(this),0)})}),L.prototype.initAd=function(t,e,n,r,i,o,a){i=i||{},o=At.extend({slot:this._el,videoSlot:this._videoEl},o||{}),setTimeout(function(){var u;try{this._creative.initAd(t,e,n,r,i,o)}catch(t){u=t}U(a,this._subscribers,u)}.bind(this),0)},L.prototype.subscribe=function(t,e,n){this._subscribers.subscribe(e,t,n)},L.prototype.unsubscribe=function(t,e){this._subscribers.unsubscribe(e,t)},L.prototype.on=L.prototype.subscribe,L.prototype.off=L.prototype.unsubscribe,Pt.GETTERS.forEach(function(t){L.prototype[t]=function(e){setTimeout(function(){var n,r=null;try{n=this._creative[t]()}catch(t){r=t}U(e,this._subscribers,r,n)}.bind(this),0)}}),L.prototype.setAdVolume=function(t,e){setTimeout(function(){var n,r=null;try{this._creative.setAdVolume(t),n=this._creative.getAdVolume()}catch(t){r=t}r||(r=At.validate(n===t,"failed to apply volume: "+t)),U(e,this._subscribers,r,n)}.bind(this),0)},L.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()};var Dt=L,Lt=At.unique("vpaidIframe"),Ot='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>',Ct="AdStopped";M.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,F.call(this))},M.prototype.isDestroyed=function(){return this._destroyed},M.prototype.loadAdUnit=function(t,e){if(!this._onLoad){H.call(this),F.call(this);var n=this,r=At.createIframeWithContent(this._frameContainer,this._templateConfig.template,At.extend({iframeURL_JS:t,iframeID:this.getID(),origin:q()},this._templateConfig.extraOptions));this._frame=r,this._onLoad=At.callbackTimeout(this._vpaidOptions.timeout,function(t){var r;if("string"==typeof t.data){try{r=JSON.parse(t.data)}catch(t){return}if(t.origin===q()&&r.id===n.getID()){var i,o,a;if(n._frame.contentWindow?(a=n._frame.contentWindow.getVPAIDAd,o=At.validate("function"==typeof a,"the ad didn't return a function to create an ad")):o="the iframe is not anymore in the DOM tree",!o){var u=n._frame.contentWindow.document.querySelector(".ad-element");(i=new Dt(a(),u,n._videoEl,n._frame)).subscribe(Ct,j.bind(n)),o=At.validate(i.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return n._adUnit=i,W.call(n),e(o,o?null:i),!0}}}.bind(this),function(){e("timeout",null)}.bind(this)),window.addEventListener("message",this._onLoad)}},M.prototype.unloadAdUnit=function(){F.call(this)},M.prototype.getID=function(){return this._id};var Nt=M;window.VPAIDHTML5Client=M;var Ut,Mt,xt,jt,Ft=(Mt=Ut=function(){function e(t){if(ut(this,e),!t||!c(t.src))throw _t.VPAIDHTML5TECH_INVALID_MEDIA_FILE;this.name="vpaid-html5",this.containerEl=null,this.videoEl=null,this.vpaidHTMLClient=null,this.mediaFile=t}return st(e,[{key:"loadAdUnit",value:function(t,e,n){if(!vt.isDomElement(t))throw _t.VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL;if(!vt.isDomElement(e)||"video"!==e.tagName.toLowerCase())throw _t.VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL;if(!u(n))throw _t.VPAIDHTML5TECH_MISSING_CALLBACK;this.containerEl=t,this.videoEl=e,this.vpaidHTMLClient=new Nt(t,e,{}),this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,n)}},{key:"unloadAdUnit",value:function(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(e){t.log.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}this.containerEl&&(vt.remove(this.containerEl),this.containerEl=null)}}],[{key:"supports",value:function(t){return!T()&&this.types.indexOf(t)>-1}}]),e}(),Ut.types=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],Mt),zt=(jt=xt=function(){function t(){ut(this,t)}return st(t,null,[{key:"track",value:function(t,e){var n=[];return this.parseURLMacros(t,e).forEach(function(t){t.indexOf("bs.serving-sys.com")>0&&(t=t.replace("{timestamp}",Date.now()));var e=new Image;e.src=t,n.push(e)}),n}},{key:"parseURLMacros",value:function(t,e){var n=this,r=[];return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),t.forEach(function(t){t&&r.push(n._parseURLMacro(t,e))}),r}},{key:"parseURLMacro",value:function(t,e){return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),this._parseURLMacro(t,e)}},{key:"parseDuration",value:function(t){var e,n,r=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;return c(t)&&(e=t.match(r))&&(n=function(t){return 60*parseInt(t,10)*60*1e3}(e[1])+function(t){return 60*parseInt(t,10)*1e3}(e[2])+function(t){return 1e3*parseInt(t,10)}(e[3])+parseInt(e[5]||0)),isNaN(n)?null:n}},{key:"parseImpressions",value:function(t){return t?(t=l(t)?t:[t],_(t,function(t){if(f(t.keyValue))return t.keyValue})):[]}},{key:"parseError",value:function(t){if(t)return t=l(t)?t:[t],_(t,function(t){if(f(t.keyValue))return t.keyValue})}},{key:"parseCampain",value:function(t){return t?(t=l(t)?t:[t],_(t,function(t){if(f(t.keyValue)&&"AdMicro"===t["@id"]){var e=n("p",t.keyValue)?n("p",t.keyValue):"";return e=e.slice(0,e.indexOf(";"))}})):[]}},{key:"formatProgress",value:function(t){var e,n,r,i;return e=t/36e5,e=Math.floor(e),n=t/6e4%60,n=Math.floor(n),r=t/1e3%60,r=Math.floor(r),i=t%1e3,A(e,2)+":"+A(n,2)+":"+A(r,2)+"."+A(i,3)}},{key:"parseOffset",value:function(t,e){function n(t,e){return t*e/100}return function(t){return/^\d+(\.\d+)?%$/g.test(t)}(t)?function(t,e){return e?n(e,parseFloat(t.replace("%",""))):null}(t,e):this.parseDuration(t)}},{key:"isVPAID",value:function(t){return!!t&&"VPAID"===t.apiFramework}},{key:"findSupportedVPAIDTech",value:function(t){var e,n,r;for(e=0,n=this.VPAID_techs.length;e<n;e+=1)if((r=this.VPAID_techs[e]).supports(t))return r;return null}},{key:"isFlashSupported",value:function(){return!1}},{key:"_parseURLMacro",value:function(t,e){return e=e||{},h(e,function(e,n){t=t.replace(new RegExp("\\["+n+"\\]","gm"),e)}),t}}]),t}(),xt.VPAID_techs=[Ft],jt),Wt=function(){function t(e){ut(this,t);var n=Bt.parseText;if(e.documentElement)return new t(e.documentElement);if(e.hasChildNodes()){for(var r,i,o,a="",u=0;u<e.childNodes.length;u++)3==((r=e.childNodes.item(u)).nodeType-1|1)?a+=3===r.nodeType?r.nodeValue.trim():r.nodeValue:1!==r.nodeType||r.prefix||(i=y(r.nodeName),o=new t(r),this.hasOwnProperty(i)?(this[i].constructor!==Array&&(this[i]=[this[i]]),this[i].push(o)):this[i]=o);a&&(this.keyValue=n(a))}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes())for(var s,l=0;l<e.attributes.length;l++)this["@"+y((s=e.attributes.item(l)).name)]=n(s.value.trim())}return st(t,[{key:"attr",value:function(t){return this["@"+y(t)]}}]),t}(),Bt=function(){function t(){ut(this,t)}return st(t,null,[{key:"strToXMLDoc",value:function(t){function e(t){try{var e=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===e?t.getElementsByTagName("parsererror").length>0:t.getElementsByTagNameNS(e,"parsererror").length>0}catch(t){}}if(void 0===window.DOMParser){var n=new ActiveXObject("Microsoft.XMLDOM");return n.async=!1,n.loadXML(t),n}return function(t){var n,r=new DOMParser;try{if(n=r.parseFromString(t,"application/xml"),e(n)||d(t))throw new Error}catch(e){throw new Error("xml.strToXMLDOC: Error parsing the string: "+t)}return n}(t)}},{key:"parseText",value:function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):E(t)?new Date(t):t.trim()}},{key:"toJXONTree",value:function(e){var n=t.strToXMLDoc(e);return new Wt(n)}},{key:"keyValue",value:function(t){if(t)return t.keyValue}},{key:"attr",value:function(t,e){if(t)return t["@"+y(e)]}},{key:"encode",value:function(t){if(c(t))return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}},{key:"decode",value:function(t){if(c(t))return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}]),t}(),Ht=function t(e,n){ut(this,t),this.name=e.attr("event"),this.uri=Bt.keyValue(e),"progress"===this.name&&(this.offset=zt.parseOffset(e.attr("offset"),n))},qt=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"],Gt=function(){function t(e){ut(this,t),this.src=Bt.keyValue(e);for(var n=0;n<qt.length;n++){var r=qt[n];this[r]=e.attr(r)}"video/x-mp4"===this.type&&(this.type="video/mp4")}return st(t,[{key:"isSupported",value:function(){return zt.isVPAID(this)?!!zt.findSupportedVPAIDTech(this.type):"video/x-flv"!==this.type||zt.isFlashSupported()}}]),t}(),Kt=function(){function t(e){ut(this,t),this.clickThrough=Bt.keyValue(e.clickThrough),this.clickTrackings=this._parseClickTrackings(e.clickTracking),this.customClicks=this._parseClickTrackings(e.customClick)}return st(t,[{key:"_parseClickTrackings",value:function(t){var e=[];return t&&(t=l(t)?t:[t]).forEach(function(t){e.push(Bt.keyValue(t))}),e}}]),t}(),$t=function(){function t(e){if(ut(this,t),!(this instanceof t))return new t(e);this.type=e.attr("type"),this.apiFramework=e.attr("apiFramework"),this.src=Bt.keyValue(e)}return st(t,[{key:"parseInteractiveCreativeFiles",value:function(e){var n=[];return o(e)&&(l(e)?e:[e]).forEach(function(e){n.push(new t(e))}),n}}]),t}(),Xt=["program","width","height","xPosition","yPosition","duration","offset","apiFramework","pxratio"],Qt=function(){function t(e){if(ut(this,t),!(this instanceof t))return new t(e);for(var n=0;n<Xt.length;n++){var r=Xt[n];this[r]=e.attr(r)}this.duration&&(this.duration=zt.duration(this.duration)),this.offset&&(this.offset=zt.duration(this.offset)),this.creativeType=Bt.attr(e.staticResource,"creativeType"),this.staticResource=Bt.keyValue(e.staticResource);var i=null;Bt.keyValue(e.HTMLResource)?i=Bt.keyValue(e.HTMLResource):Bt.keyValue(e.hTMLResource)&&(i=Bt.keyValue(e.hTMLResource)),this.htmlResource=i;var o=null;Bt.keyValue(e.IFrameResource)?o=Bt.keyValue(e.IFrameResource):Bt.keyValue(e.iFrameResource)&&(o=Bt.keyValue(e.iFrameResource)),this.iframeResource=o,this.iconViewTrackings=this._parseTrackings(e.iconViewTracking),e.iconClicks&&(this.iconClickThrough=Bt.keyValue(e.iconClicks.iconClickThrough),this.iconClickTrackings=this._parseTrackings(e.iconClicks.iconClickTracking))}return st(t,[{key:"_parseTrackings",value:function(t){return t?(t=l(t)?t:[t],_(t,function(t){if(f(t.keyValue))return t.keyValue})):[]}}]),t}(),Yt=function(){function t(e){ut(this,t),this.duration=zt.parseDuration(Bt.keyValue(e.duration)),this.mediaFiles=this._parseMediaFiles(e.mediaFiles&&e.mediaFiles.mediaFile),this.trackingEvents=this._parseTrackingEvents(e.trackingEvents&&e.trackingEvents.tracking,this.duration),this.skipoffset=zt.parseOffset(Bt.attr(e,"skipoffset"),this.duration),e.videoClicks&&(this.videoClicks=new Kt(e.videoClicks)),e.adParameters&&(this.adParameters=Bt.keyValue(e.adParameters),Bt.attr(e.adParameters,"xmlEncoded")&&(this.adParameters=Bt.decode(this.adParameters))),e.mediaFile&&e.mediaFile.mezzanine&&(this.mezzanie=Bt.keyValue(e.mediaFile.mezzanine)),e.mediaFile&&e.mediaFile.InteractiveCreativeFile&&(this.interactiveCreativeFiles=$t.parseIneractiveCreativeFiles(e.mediaFile.interactiveCreativeFiles)),e.icons&&(this.icons=this._parseIcons(e.icons&&e.icons.icon))}return st(t,[{key:"_parseMediaFiles",value:function(t){var e=[];return o(t)&&(t=l(t)?t:[t]).forEach(function(t){e.push(new Gt(t))}),e}},{key:"_parseTrackingEvents",value:function(t,e){var n=[];return o(t)&&(t=l(t)?t:[t]).forEach(function(t){n.push(new Ht(t,e))}),n}},{key:"_parseIcons",value:function(t){var e=[];return o(t)&&(t=l(t)?t:[t]).forEach(function(t){e.push(new Qt(t))}),e}},{key:"isSupported",value:function(){var t,e;for(t=0,e=this.mediaFiles.length;t<e;t+=1)if(this.mediaFiles[t].isSupported())return!0;return!1}}]),t}(),Zt=function(){function e(n){ut(this,e),t.log.info("<Companion> found companion ad"),t.log.debug("<Companion>  companionJTree:",n),this.creativeType=Bt.attr(n.staticResource,"creativeType"),this.staticResource=Bt.keyValue(n.staticResource),t.log.info("<Companion>  creativeType: "+this.creativeType),t.log.info("<Companion>  staticResource: "+this.staticResource);var r=null;Bt.keyValue(n.HTMLResource)?r=Bt.keyValue(n.HTMLResource):Bt.keyValue(n.hTMLResource)&&(r=Bt.keyValue(n.hTMLResource)),null!==r&&t.log.info("<Companion> found html resource",r),this.htmlResource=r;var i=null;Bt.keyValue(n.IFrameResource)?i=Bt.keyValue(n.IFrameResource):Bt.keyValue(n.iFrameresource)&&(i=Bt.keyValue(n.iFrameresource)),null!==i&&t.log.info("<Companion> found iframe resource",i),this.iframeResource=i,this.id=Bt.attr(n,"id"),this.width=Bt.attr(n,"width"),this.height=Bt.attr(n,"height"),this.expandedWidth=Bt.attr(n,"expandedWidth"),this.expandedHeight=Bt.attr(n,"expandedHeight"),this.scalable=Bt.attr(n,"scalable"),this.maintainAspectRatio=Bt.attr(n,"maintainAspectRatio"),this.minSuggestedDuration=Bt.attr(n,"minSuggestedDuration"),this.apiFramework=Bt.attr(n,"apiFramework"),this.companionClickThrough=Bt.keyValue(n.companionClickThrough),this.trackingEvents=this._parseTrackingEvents(n.trackingEvents&&n.trackingEvents.tracking),t.log.info("<Companion>  companionClickThrough: "+this.companionClickThrough)}return st(e,[{key:"_parseTrackingEvents",value:function(t){var e=[];return o(t)&&(t=l(t)?t:[t]).forEach(function(t){e.push(new Ht(t))}),e}}]),e}(),Jt=function t(e){if(ut(this,t),!(this instanceof t))return new t(e);e?(this.idRegistry=e.attr("idRegistry"),this.idValue=e.attr("idValue")):(this.idRegistry="unknown",this.idValue="unknown")},te=function(){function t(e){if(ut(this,t),this.id=e.attr("id"),this.sequence=e.attr("sequence"),this.adId=e.attr("adId"),this.apiFramework=e.attr("apiFramework"),e.linear&&(this.linear=new Yt(e.linear)),e.companionAds){var n=[],r=e.companionAds&&e.companionAds.companion;o(r)&&(r=l(r)?r:[r]).forEach(function(t){n.push(new Zt(t))}),this.companionAds=n}e.universalAdId&&(this.universalAdId=new Jt(e.universalAdId))}return st(t,[{key:"isSupported",value:function(){return!this.linear||this.linear.isSupported()}}],[{key:"parseCreatives",value:function(e){var n=[];return o(e)&&o(e.creative)&&(l(e.creative)?e.creative:[e.creative]).forEach(function(e){n.push(new t(e))}),n}}]),t}(),ee=function(){function t(e){if(ut(this,t),!(this instanceof t))return new t(e);this.authority=e.attr("authority"),this.category=Bt.keyValue(e)}return st(t,null,[{key:"parseCategories",value:function(e){var n=[];return n&&(l(e)?e:[e]).forEach(function(e){var r=new t(e);r.category&&r.category.length>0&&r.authority&&r.authority.length>0&&n.push(new t(e))}),n}}]),t}(),ne=function(){function t(e){if(ut(this,t),!(this instanceof t))return new t(e);this.id=e.attr("id"),e.viewable&&(this.viewables=this._parseUriArray(e.viewable)),e.notViewable&&(this.notViewables=this._parseUriArray(e.notViewable)),e.viewUndetermined&&(this.viewUndetermineds=this._parseUriArray(e.viewUndetermined))}return st(t,[{key:"_parseUriArray",value:function(t){var e=[];return t&&(l(t)?t:[t]).forEach(function(t){e.push(Bt.keyValue(t))}),e}}]),t}(),re=function(){function t(e){if(ut(this,t),!(this instanceof t))return new t(e);this.vendor=e.attr("vendor"),e.javaScriptResource&&(this.javaScriptResources=this._parseResources(e.javaScriptResource)),zt.isFlashSupported()&&e.flashResource&&(this.javaScriptResources=this._parseResources(e.javaScriptResource)),e.viewableImpression&&(this.viewableImpression={id:e.viewableImpression.attr("id"),uri:Bt.keyValue(e.viewableImpression)})}return st(t,[{key:"_parseResources",value:function(t){var e=[];return t&&(l(t)?t:[t]).forEach(function(t){e.push({apiFramework:t.attr("apiFramework"),uri:Bt.keyValue(t)})}),e}}],[{key:"parseAdVerifications",value:function(e){var n=[];return o(e)&&o(e.verification)&&(l(e.verification)?e.verification:[e.verification]).forEach(function(e){n.push(new t(e))}),n}}]),t}(),ie=function(){function t(e){ut(this,t),this.adTitle=Bt.keyValue(e.adTitle),this.adSystem=Bt.keyValue(e.adSystem),this.impressions=zt.parseImpressions(e.impression),this.creatives=te.parseCreatives(e.creatives),this.campains=zt.parseCampain(e.impression),this.description=Bt.keyValue(e.description),this.advertiser=Bt.keyValue(e.advertiser),this.surveys=this._parseSurveys(e.survey),this.error=zt.parseError(e.error),this.pricing=Bt.keyValue(e.pricing),this.extensions=e.extensions,this.extensions&&(this.moat=this._parseMoat(this.extensions)),e.category&&(this.categories=ee.parseCategories(e.category)),e.viewableImpression&&(this.viewableImpression=new ne(e.viewableImpression)),e.adVerifications&&(this.adVerifications=re.parseAdVerifications(e.adVerifications))}return st(t,[{key:"_parseSurveys",value:function(t){return t?_(l(t)?t:[t],function(t){if(f(t.keyValue))return{uri:t.keyValue,type:t.attr("type")}}):[]}},{key:"isSupported",value:function(){var t,e;if(0===this.creatives.length)return!1;for(t=0,e=this.creatives.length;t<e;t+=1)if(!this.creatives[t].isSupported())return!1;return!0}},{key:"_parseMoat",value:function(t){if(t)return function(e){for(var n=0;n<e.length;n++){var r=e[n].extensions;if(r&&r.moat){for(var i={},o=Bt.keyValue(t.moat).split(";"),a=0;a<o.length;a++){var u=o[a].split("=");u&&2===u.length&&(i[u[0]]=u[1])}return i}}}(l(t)?t:[t])}}]),t}(),oe=function t(e){ut(this,t),this.adSystem=Bt.keyValue(e.adSystem),this.impressions=zt.parseImpressions(e.impression),this.VASTAdTagURI=Bt.keyValue(e.vASTAdTagURI),this.campains=zt.parseCampain(e.impression),this.creatives=te.parseCreatives(e.creatives),this.error=zt.parseError(e.error),this.error&&0===this.error.length&&(this.error=void 0),this.extensions=e.extensions,this.followAdditionalWrappers=!o(Bt.attr(e,"followAdditionalWrappers"))||Bt.attr(e,"followAdditionalWrappers"),this.allowMultipleAds=Bt.attr(e,"allowMultipleAds"),this.fallbackOnNoAd=Bt.attr(e,"fallbackOnNoAd"),e.viewableImpression&&(this.viewableImpression=new ne(e.viewableImpression)),e.adVerifications&&(this.adVerifications=re.parseAdVerifications(e.adVerifications))},ae=function(){function t(e){ut(this,t),this._initialize(e)}return st(t,[{key:"_initialize",value:function(t){this.id=t.attr("id"),this.sequence=t.attr("sequence"),t.inLine&&(this.inLine=new ie(t.inLine)),t.wrapper&&(this.wrapper=new oe(t.wrapper))}}]),t}(),ue=function(){function t(){ut(this,t),this._linearAdded=!1,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.campains=[],this.clickThrough=void 0,this.adTitle="",this.duration=void 0,this.skipoffset=void 0}return st(t,[{key:"addAd",value:function(t){var e,n;t instanceof ae&&(e=t.inLine,n=t.wrapper,this.ads.push(t),e&&this._addInLine(e),n&&this._addWrapper(n))}},{key:"_addErrorTrackUrl",value:function(t){if(t){var e=t instanceof Wt?Bt.keyValue(t):t,n=this;l(e)&&e.length>0?e.forEach(function(t){n.errorURLMacros.push(t)}):this.errorURLMacros.push(e)}}},{key:"_addImpressions",value:function(t){l(t)&&G(this.impressions,t)}},{key:"_addClickThrough",value:function(t){f(t)&&(this.clickThrough=t)}},{key:"_addClickTrackings",value:function(t){l(t)&&G(this.clickTrackings,t)}},{key:"_addCustomClicks",value:function(t){l(t)&&G(this.customClicks,t)}},{key:"_addTrackingEvents",value:function(t){var e=this.trackingEvents;t&&(t=l(t)?t:[t]).forEach(function(t){e[t.name]||(e[t.name]=[]),e[t.name].push(t)})}},{key:"_addTitle",value:function(t){f(t)&&(this.adTitle=t)}},{key:"_addDuration",value:function(t){s(t)&&(this.duration=t)}},{key:"_addVideoClicks",value:function(t,e){t instanceof Kt&&(e||this._addClickThrough(t.clickThrough),this._addClickTrackings(t.clickTrackings),this._addCustomClicks(t.customClicks))}},{key:"_addMediaFiles",value:function(t){l(t)&&G(this.mediaFiles,t)}},{key:"_addSkipoffset",value:function(t){t&&(this.skipoffset=t)}},{key:"_addAdParameters",value:function(t){t&&(this.adParameters=t)}},{key:"_addLinear",value:function(t){t instanceof Yt&&(this._addDuration(t.duration),this._addTrackingEvents(t.trackingEvents),this._addVideoClicks(t.videoClicks),this._addMediaFiles(t.mediaFiles),this._addSkipoffset(t.skipoffset),this._addAdParameters(t.adParameters),this._linearAdded=!0)}},{key:"_addInLine",value:function(t){var e=this;t instanceof ie&&(this._addTitle(t.adTitle),this._addErrorTrackUrl(t.error),this._addImpressions(t.impressions),l(t.campains)&&t.campains.length>0&&this._addCampain(t.campains),t.creatives.forEach(function(t){t.linear&&e._addLinear(t.linear)}))}},{key:"_addCampain",value:function(t){G(this.campains,t)}},{key:"_addWrapper",value:function(t){var e=this;t instanceof oe&&(this._addErrorTrackUrl(t.error),this._addImpressions(t.impressions),l(t.campains)&&t.campains.length>0&&this._addCampain(t.campains),t.creatives.forEach(function(t){var n=t.linear;n&&(e._addVideoClicks(n.videoClicks,!0),e._addTrackingEvents(n.trackingEvents))}))}},{key:"hasLinear",value:function(){return this._linearAdded}}]),t}(),se=function(){function t(e,n){ut(this,t),this._sanityCheck(e,n),this._initialize(e,n)}return st(t,[{key:"_sanityCheck",value:function(t,e){if(!c(t)||d(t))throw _t.VASTTRACKER_ASSET_URI;if(!(e instanceof ue))throw _t.VASTTRACKER_VAST_RESPONSE}},{key:"_initialize",value:function(t,e){this.response=e,this.assetURI=t,this.progress=0,this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*e.duration)/100},midpoint:{tracked:!1,time:Math.round(50*e.duration)/100},thirdQuartile:{tracked:!1,time:Math.round(75*e.duration)/100}}}},{key:"durationChange",value:function(t){this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*t)/100},midpoint:{tracked:!1,time:Math.round(50*t)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t)/100}}}},{key:"trackURLs",value:function(t,e){l(t)&&t.length>0&&(e=v({ASSETURI:this.assetURI,CONTENTPLAYHEAD:zt.formatProgress(this.progress)},e||{}),zt.track(t,e))}},{key:"trackEvent",value:function(t,e){this.trackURLs(this._getEventUris(this.response.trackingEvents[t])),e&&(this.response.trackingEvents[t]=void 0)}},{key:"trackProgress",value:function(t){function e(t,e,n){a[t]&&n&&i.push({name:t,trackOnce:!!e})}function n(t,e){var n=t.time;return e>=n&&e<=n+5e3}var r=this,i=[],o=!0,a=this.response.trackingEvents;s(t)&&(e("start",o,t>0),e("rewind",!1,function(e,n){return e>t&&Math.abs(n-e)>3e3}(this.progress,t)),function(t){function i(t,r){var i=a[t];n(i,r)&&(i.tracked=!0,e(t,o,!0))}var a=r.quartiles,u=r.quartiles.firstQuartile,s=r.quartiles.midpoint,l=r.quartiles.thirdQuartile;u.tracked?s.tracked?l.tracked||i("thirdQuartile",t):i("midpoint",t):i("firstQuartile",t)}(t),function(t){if(l(a.progress)){var e=[];a.progress.forEach(function(n){n.offset<=t?r.trackURLs([n.uri]):e.push(n)}),a.progress=e}}(t),i.forEach(function(t){r.trackEvent(t.name,t.trackOnce)}),this.progress=t)}},{key:"trackComplete",value:function(){this.quartiles.thirdQuartile.tracked&&this.trackEvent("complete",!0)}},{key:"trackErrorWithCode",value:function(t){s(t)&&this.trackURLs(this.response.errorURLMacros,{ERRORCODE:t})}},{key:"trackImpressions",value:function(){this.trackURLs(this.response.impressions)}},{key:"trackCreativeView",value:function(){this.trackEvent("creativeView")}},{key:"trackClick",value:function(){this.trackURLs(this.response.clickTrackings)}},{key:"_getEventUris",value:function(t){var e;return t&&(e=[],t.forEach(function(t){t.uri&&e.push(t.uri)})),e}}]),t}();["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(t){se.prototype["track"+g(t)]=function(){this.trackEvent(t)}}),["start","skip","close","closeLinear"].forEach(function(t){se.prototype["track"+g(t)]=function(){this.trackEvent(t,!0)}}),["firstQuartile","midpoint","thirdQuartile"].forEach(function(t){se.prototype["track"+g(t)]=function(){this.quartiles[t].tracked=!0,this.trackEvent(t,!0)}});var le,ce,de,fe,pe,he,ve=function(){function t(){ut(this,t)}return st(t,null,[{key:"once",value:function(t,e,n){function r(){for(var i=0;i<e.length;i++)t.off(e[i],r);n.apply(null,arguments)}e.forEach(function(e){t.on(e,r)})}}]),t}(),ge=t.playerconfig.DEFAULT,ye=(ce=le=function(t){function e(t){ut(this,e);var n=dt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=n.props.player;return n.createAdVideoEl(),n._dispose=n._dispose.bind(n),n._showAds=n._showAds.bind(n),r.on(ge.EVENT.AD_END,n._dispose),r.on(ge.EVENT.USER_SKIP_AD,n._dispose),r.on(ge.EVENT.VAST_AD_VIDEO_COMPLETE,n._dispose),r.on(ge.EVENT.VPAID_AD_VIDEO_COMPLETE,n._dispose),r.on(ge.EVENT.VPAID_AD_STARTED,n._showAds),n}return ct(e,pt),st(e,[{key:"_dispose",value:function(){var t=this.state.videoEl,e=this.props.player;e.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="0",vt.remove(t),t=null,e.off(ge.EVENT.AD_END,this._dispose),e.off(ge.EVENT.USER_SKIP_AD,this._dispose),e.off(ge.EVENT.VAST_AD_VIDEO_COMPLETE,this._dispose),e.off(ge.EVENT.VPAID_AD_VIDEO_COMPLETE,this._dispose),e.off(ge.EVENT.VPAID_AD_STARTED,this._showAds)}},{key:"_showAds",value:function(){var t=this.props.player;this.state.videoEl.style.display="block",t.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="1"}},{key:"createAdVideoEl",value:function(){var t=this.props.player,e=this,n=document.createElement("video");n.style.display="none",n.muted=!0,vt.addClass(n,"VideoEl-container"),t.overlay.getElementsByClassName("overlay-ad")[0].append(n),this.setState({videoEl:n}),n.addEventListener("playing",function(){e._showAds()}),n.ontimeupdate=function(){t.trigger("timeupdate")},n.onvolumechange=function(){t.trigger("advolumechange")},n.onended=function(){t.trigger("advideoend")}}},{key:"src",value:function(t){this.state.videoEl.src=t.src}},{key:"on",value:function(t,e){this.state.videoEl.addEventListener(t,e)}},{key:"off",value:function(t,e){this.state.videoEl.removeEventListener(t,e)}},{key:"currentTime",value:function(){return this.state.videoEl.currentTime}},{key:"duration",value:function(){return this.state.videoEl.duration}},{key:"load",value:function(){this.state.videoEl.load()}},{key:"volume",value:function(t){var e=this.state.videoEl;if("number"!=typeof t)return e.volume;0!==t&&(e.muted=!1),e.volume=t}},{key:"paused",value:function(){return this.state.videoEl.paused}},{key:"play",value:function(){var t=this.state.videoEl;this.props.player.trigger("play"),t.play().then(function(){}).catch(function(t){})}},{key:"pause",value:function(){var t=this.state.videoEl;this.props.player.trigger("pause"),t.pause()}},{key:"preload",value:function(t){this.state.videoEl.preload=t}},{key:"muted",value:function(t){var e=this.state.videoEl;return void 0!==t&&(e.muted=t),e.muted}}]),e}(),le.propTypes={player:t.PropTypes.object.isRequired},ce),_e=(fe=de=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.selectPlayerAd(),e}return ct(n,pt),st(n,[{key:"createAdVideoEl",value:function(){var t=this.props.player;return new ye({player:t})}},{key:"selectPlayerAd",value:function(){var e=this.props,n=e.player,r=e.preLoaded,i=void 0;i=t.agent.isIOS||!r?n:this.createAdVideoEl(),this.setState({PlayerAdUnit:i})}},{key:"dispose",value:function(){var e=this.state.PlayerAdUnit;t.agent.isIOS||e._dispose()}},{key:"getPlayerAdUnit",value:function(){var t=this.state.PlayerAdUnit;if(t)return t}}]),n}(),de.propTypes={player:t.PropTypes.object.isRequired},fe),Ae=t.playerconfig.DEFAULT,me=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.type="VAST",e.state={tracker:null,duration:null,orderPlay:!1,firstAdVideoStart:!1,canPlay:!1},e.props.player.one(Ae.EVENT.AD_END,e._handleAdEnd),e}return ct(n,pt),st(n,[{key:"_handleAdEnd",value:function(){}},{key:"playAd",value:function(t){var e=this;return this.setState({vastResponse:t}),this._start().then(function(){return e._createAdPlayer()}).then(function(){return e._selectAdSource()}).then(function(){return e._createVASTTracker()}).then(function(){return e._addClickThrough()}).then(function(){return e._addSkipButton()}).then(function(){return e._setupEvents()}).then(function(){return e._playSelectedAd()}).catch(function(t){throw e.state.playerAd&&e.state.playerAd.dispose(),e._trackError(t),t})}},{key:"_createAdPlayer",value:function(){var t=this,e=this;return new Promise(function(n){var r=new _e(t.props);e.setState({playerAdUnit:r.getPlayerAdUnit(),playerAd:r}),n()})}},{key:"getPlayerAdUnit",value:function(){return this.state.playerAdUnit}},{key:"_start",value:function(){return new Promise(function(t){t()})}},{key:"_selectAdSource",value:function(){var e=void 0,n=this.props.player,r=this.state.vastResponse,i=vt.getDimension(n.el()).width;if(r.mediaFiles.sort(function(t,e){return Math.abs(i-t.width)-Math.abs(i-e.width)}),r.mediaFiles=r.mediaFiles.filter(function(t){return"video/mp4;video/webm;video/ogg".indexOf(t.type)>=0}),e=n.selectSource(r.mediaFiles).source)return t.log.info("selected source: ",e),this._adUnit&&(this._adUnit._src=e),void this.setState({source:e});throw _t.VAST_INTEGRATOR_SOURCE_ERROR}},{key:"_createVASTTracker",value:function(){var t=this.state,e=t.source,n=t.vastResponse,r=new se(e.src,n);this.setState({tracker:r})}},{key:"_addClickThrough",value:function(){function t(t,e){var n={ASSETURI:r.src,CONTENTPLAYHEAD:zt.formatProgress(1e3*e.currentTime())};return t?zt.parseURLMacro(t,n):"#"}var e=this.props.player,n=this.state,r=n.source,i=n.vastResponse,o=n.playerAdUnit,a=function(e,n,r){try{var i=t(e.clickThrough,n);r.container.ad.clickThrough.updateBlocker(i)}catch(t){}}.bind(null,i,o,e);o.on("timeupdate",a)}},{key:"_addSkipButton",value:function(){}},{key:"_setupEvents",value:function(){function t(){a.isFullscreen()?s.trackFullscreen():s.trackExitFullscreen()}function e(){Math.abs(l.duration()-l.currentTime())<2||(s.trackPause(),ve.once(a,[Ae.EVENT.VAST_AD_RESUME,Ae.EVENT.AD_END,Ae.EVENT.AD_CANCEL],function(t){t.type===Ae.EVENT.VAST_AD_RESUME&&s.trackResume()}))}function n(){var t=1e3*l.currentTime();s.trackProgress(t)}function r(){s.trackImpressions(),s.trackCreativeView()}function i(){var t=l.volume(),e=l.muted();0===t||e?s.trackMute():s.trackUnmute()}function o(){var t=l.duration();isNaN(t)||c||(c=!0,s.durationChange(1e3*t))}var a=this.props.player,u=this.state,s=u.tracker,l=u.playerAdUnit,c=!1;a.on("fullscreenchange",t),a.on(Ae.EVENT.VAST_AD_VIDEO_START,r),a.on(Ae.EVENT.VAST_AD_START,function(){l.off("durationchange",o)}),l.on("durationchange",function(){l.on("pause",e),l.on("timeupdate",n),l.on("volumechange",i),l.on("durationchange",o),l.on("play",function(){a.trigger(Ae.EVENT.VAST_AD_RESUME)}),o()}),ve.once(a,[Ae.EVENT.AD_END,Ae.EVENT.AD_CANCEL,Ae.EVENT.AD_SKIP],function(){a.off("fullscreenchange",t),a.off(Ae.EVENT.VAST_AD_VIDEO_START,r),l.off("pause",e),l.off("timeupdate",n),l.off("volumechange",i),l.off("durationchange",o)}),ve.once(a,[Ae.EVENT.AD_END,Ae.EVENT.AD_CANCEL,Ae.EVENT.AD_SKIP],function(t){t.type===Ae.EVENT.AD_END&&s.trackComplete()})}},{key:"_playSelectedAd",value:function(){var e=this,n=this.props,r=n.player,i=n.type,o=n.preLoaded,a=n.adsITVC,u=this.state,s=u.playerAdUnit,l=u.orderPlay,c=u.firstAdVideoStart,d=u.canPlay,f=u.source,p=u.vastResponse,h=r.vastAd,v={src:r.currentSrc(),duration:r.duration(),currentTime:r.currentTime(),type:r.currentType()};return new Promise(function(n,u){function g(){r.off(Ae.EVENT.AD_SKIP,y),r.off("play",b),r.off("timeupdate",k),r.off("timeupdate",A),r.off(Ae.EVENT.AD_ORDER_START_MIDROLL,b),r.off(Ae.EVENT.AD_ORDER_START_POSTROLL,b),s.off("ended",y),s.off("error",m),s.off("loadedmetadata",E),s.off("playing",T)}function y(t){"ended"===t.type&&s.duration()-s.currentTime()>3||(g(),"ended"!==t.type&&t.type!==Ae.EVENT.AD_SKIP||(r.trigger(Ae.EVENT.VAST_AD_VIDEO_COMPLETE),n()))}function _(){d?(r.trigger(Ae.EVENT.AD_PLAY,h.state.vastResponse),r.trigger(Ae.EVENT.VAST_AD_START),r.trigger(Ae.EVENT.AD_START,h),s.play()):l=!0}function A(){r.vastAd._prepareForAd(),r.vastAd.firstAd=!0,_()}function m(){g(),u("Error! Something went wrong")}function E(){l&&!d&&(d=!0,_()),r.trigger("ad:ready",p),d=!0}function T(){c||(e._vastAdVideoStart(),c=!0)}function k(){r.paused()?r.one("play",b):b()}function b(){r.trigger("snapshotPlayer",v),A()}if(s.on("error",m),s.on("loadedmetadata",E),s.on("playing",T),s.on("ended",y),r.on(Ae.EVENT.AD_CANCEL,y),r.on(Ae.EVENT.AD_SKIP,y),!o&&!r.vastAd.firstAd)return r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer",v),s.preload("auto"),s.src(f),s.load(),void A();t.agent.isIOS&&o&&!a?r.one("play",function(){r.one("timeupdate",function(){r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer",v),s.preload("auto"),s.src(f),s.load(),A()})}):r.vastAd.firstAd?_():(r.vastAd._setUpRestorePlayer(),s.preload("auto"),s.src(f),"preroll"===i?(s.load(),r.one("timeupdate",k)):"midroll"===i?(s.load(),r.one(Ae.EVENT.AD_ORDER_START_MIDROLL,b),r.trigger("prepareMidrollVastSuccess")):"postroll"===i&&(s.load(),r.one(Ae.EVENT.AD_ORDER_START_POSTROLL,b),r.trigger("preparePostrollSuccess")))})}},{key:"_vastAdVideoStart",value:function(){this.props.player.trigger(Ae.EVENT.VAST_AD_VIDEO_START)}},{key:"getAdDuration",value:function(){var t=this.state.playerAdUnit.duration();return Promise.resolve(t)}},{key:"getSkipOffSet",value:function(){var t=this.props.skipoffset;if(t)return t}},{key:"_trackError",value:function(t){var e=this.state.vastResponse;zt.track(e.errorURLMacros,{ERRORCODE:t.code||900})}},{key:"getAdRemainingTime",value:function(){var t=this.state.playerAdUnit,e=t.duration()-t.currentTime();return Promise.resolve(e)}},{key:"getAdVolume",value:function(){var t=this.state.playerAdUnit.volume();return Promise.resolve(t)}},{key:"skipAd",value:function(){var t=this.props.player,e=this.state.tracker;t&&e&&(e.trackSkip(),t.trigger(Ae.EVENT.AD_SKIP))}},{key:"pauseAd",value:function(){var t=this.props.player;this.state.playerAdUnit.pause(!0),t.trigger(Ae.EVENT.AD_PAUSE_AD)}},{key:"resumeAd",value:function(){var t=this.props.player;this.state.playerAdUnit.play(!0),t.trigger(Ae.EVENT.AD_RESUME_AD)}},{key:"clickThrough",value:function(){var t=this.props.player,e=this.state.tracker;t&&e&&(t.trigger(Ae.EVENT.VAST_AD_CLICK_THRU),e.trackClick())}},{key:"setAdVolume",value:function(t){this.state.playerAdUnit.volume(t)}},{key:"isPaused",value:function(){return this.state.playerAdUnit.paused()}}]),n}(),Ee=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],Te=(he=pe=function(t){function e(t){ut(this,e);var n=dt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=n.props,i=r.adUnit,o=r.player;if(!i||!n._checkVPAIDInterface(i))throw _t.VPAID_AD_UNIT_WRAPPER_AD_UNIT_NOT_FULLY;return Ee.forEach(function(t){this.on(t,function(){o.trigger("ads.log",t)})}.bind(n)),n}return ct(e,pt),st(e,[{key:"_checkVPAIDInterface",value:function(t){for(var e=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],n=0,r=e.length;n<r;n++)if(!t||!u(t[e[n]]))return!1;return function(t){return u(t.subscribe)||u(t.addEventListener)||u(t.on)}(t)&&function(t){return u(t.unsubscribe)||u(t.removeEventListener)||u(t.off)}(t)}},{key:"adUnitAsyncCall",value:function(){var t,e=this.props,n=e.adUnit,i=e.responseTimeout,o=p(arguments),a=o.shift(),s=o.pop();!function(t,e,n){if(!c(t)||!u(n[t]))throw _t.VPAID_AD_UNIT_WRAPPER_INVALID_METHOD_NAME.extendsWithData({method:t});if(!u(e))throw _t.VPAID_AD_UNIT_WRAPPER_MISSING_CALLBACK.extendsWithData({method:t})}(a,s,n),o.push(function(){t&&clearTimeout(t),s.apply(this,arguments)}),n[a].apply(n,o),t=setTimeout(function(){t=null,s(_t.VPAID_AD_UNIT_WRAPPER_METHOD_TIMEOUT.extendsWithData({method:a})),s=r},i)}},{key:"on",value:function(t,e){var n=this.props.adUnit;(n.addEventListener||n.subscribe||n.on).call(n,t,e)}},{key:"off",value:function(t,e){var n=this.props.adUnit;(n.removeEventListener||n.unsubscribe||n.off).call(n,t,e)}},{key:"waitForEvent",value:function(t,e,n,i){var o=this.props.responseTimeout,a=void 0;!function(t,e){if(!c(t))throw _t.VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_NAME.extendsWithData({event:t});if(!u(e))throw _t.VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_CALLBACK.extendsWithData({event:t})}(t,e),n=n||null,this.on(t,function(){var t=p(arguments);a&&(clearTimeout(a),a=null),t.unshift(null),e.apply(n,t)}),a=setTimeout(function(){e(_t.VPAID_AD_UNIT_WRAPPER_EVENT_TIMEOUT.extendsWithData({event:t})),a=null,e=r},i||o)}},{key:"handshakeVersion",value:function(t,e){this.adUnitAsyncCall("handshakeVersion",t,e)}},{key:"initAd",value:function(t,e,n,r,i,o){var a=this.props.adUnit,u=!1,s=!1;this.waitForEvent("AdLoaded",function(){s||(u=!0,o.apply(null,arguments))}),this.on("AdError",function(t){u||(s=!0,o(t))}),a.initAd(t,e,n,r,i,{iframe:a._iframe})}},{key:"resizeAd",value:function(t,e,n,r){this.adUnitAsyncCall("resizeAd",t,e,n,r)}},{key:"startAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdStarted",t),e.startAd()}},{key:"stopAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdStopped",t,null,300),e.stopAd()}},{key:"pauseAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdPaused",t),e.pauseAd()}},{key:"resumeAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdPlaying",t),e.resumeAd()}},{key:"expandAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdExpandedChange",t),e.expandAd()}},{key:"collapseAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdExpandedChange",t),e.collapseAd()}},{key:"skipAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdSkipped",t,null,300),e.skipAd()}},{key:"setAdVolume",value:function(t,e){this.adUnitAsyncCall("setAdVolume",t,e)}}]),e}(),pe.propTypes={adUnit:t.PropTypes.object.isRequired,player:t.PropTypes.object.isRequired,responseTimeout:t.PropTypes.number.isRequired,src:t.PropTypes.string.isRequired},he);["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(t){var e="get"+g(t);Te.prototype[e]=function(t){this.adUnitAsyncCall(e,t)}});var ke,be,Pe,Ie=t.playerconfig.DEFAULT,Re=(Pe=be=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));e.type="VPAID",e.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"},e.state={ended:!1,duration:null};var r=e.props.player;return r.one("vpaid:AdEnd",e._handleAdEnd),r.one(Ie.EVENT.AD_END,e._handleAdEnd),e}return ct(n,pt),st(n,[{key:"_handleAdEnd",value:function(){t.log.debug("<VPAIDIntegrator._handleAdEnd>");var e=this.state.tech;e&&e.unloadAdUnit(),this.containerEl&&(vt.remove(this.containerEl),this.containerEl=null)}},{key:"playAd",value:function(t){var e=this,n=this,r=this.props.player;return this.setState({vastResponse:t}),this._start().then(function(){return n._createAdPlayer()}).then(function(){return n._findSupportedTech()}).then(function(){return n._loadAdUnit()}).then(function(){return n._playAdUnit()}).then(function(){var t=e.state.playerAdUnit,i=r.vastAd.state.restorePlayer.state.snapshot,o=i.muted?0:i.volume;return t.muted(i.muted),n.setAdVolume(o),n._finishPlaying()}).catch(function(t){throw n._trackError(t),n._dispose(),t})}},{key:"_dispose",value:function(){var t=this.state,e=t.tech,n=t.playerAdUnit;e&&e.unloadAdUnit(),this.containerEl&&(vt.remove(this.containerEl),this.containerEl=null),n._dispose()}},{key:"_createAdPlayer",value:function(){var t=this,e=this,n=this.props.player;return this.containerEl=this._createVPAIDContainerEl(n),new Promise(function(n){var r=new _e(t.props);e.setState({playerAdUnit:r.getPlayerAdUnit()}),n()})}},{key:"getSkipOffSet",value:function(){var t=this.props.skipoffset;if(t)return t}},{key:"skipAd",value:function(){var t=this.props.player,e=this.state,n=e.tracker,r=e.adUnit;t&&n&&(n.trackSkip(),r.skipAd(function(e){e&&t.trigger("vpaid-skip-ad-error",e)}))}},{key:"getAdVolume",value:function(){var t=this.state.adUnit;return new Promise(function(e,n){t.getAdVolume(function(t,r){if(t)return n(t);e(r)})})}},{key:"getAdExpanded",value:function(){var t=this.state.adUnit;return new Promise(function(e,n){t.getAdExpanded(function(t,r){t&&n(t),e(r)})})}},{key:"setAdVolume",value:function(t){this.state.adUnit.setAdVolume(t,this._logError)}},{key:"pauseAd",value:function(){var t=this.props.player;t.trigger("vpaid.pauseAd"),t.pause(!0),t.trigger(Ie.EVENT.AD_PAUSE_AD)}},{key:"resumeAd",value:function(){var t=this.props.player;t.trigger("vpaid.resumeAd"),t.trigger(Ie.EVENT.AD_RESUME_AD)}},{key:"isPaused",value:function(){return this.state.paused}},{key:"getSrc",value:function(){return this.state.tech.mediaFile}},{key:"techName",value:function(){return this.state.tech.name}},{key:"getAdRemainingTime",value:function(){var t=this.state.adUnit;return new Promise(function(e,n){t.getAdRemainingTime(function(t,r){if(t)return n(t);e(r)})})}},{key:"getAdDuration",value:function(){var t=this.state,e=t.adUnit,n=t.duration;return n?Promise.resolve(n):new Promise(function(t,n){e.getAdDuration(function(e,r){if(e)return n(e);t(r)})})}},{key:"_createVPAIDContainerEl",value:function(){var t=this.props.player,e=document.createElement("div");return e.style.display="none",vt.addClass(e,"VPAID-container"),t.overlay.append(e),e}},{key:"_start",value:function(){return new Promise(function(t){t()})}},{key:"_findSupportedTech",value:function(){for(var e=this.state.vastResponse.mediaFiles.filter(zt.isVPAID),n=[],r=void 0,i=0,o=e.length;i<o;i+=1){var a=e[i],u=zt.findSupportedVPAIDTech(a.type);u&&n.push({mediaFile:a,tech:u})}if(n.length){var s=n[0];r=new s.tech(s.mediaFile,this.props)}if(r)return t.log.info("<VPAIDIntegrator.playAd> found tech: ",r),void this.setState({tech:r});throw _t.VPAID_INTEGRATOR_NOT_SUPPORT_MEDIAFILE}},{key:"getPlayerAdUnit",value:function(){return this.state.playerAdUnit}},{key:"_loadAdUnit",value:function(){t.log.debug("<VPAIDIntegrator._loadAdUnit>");var e=this,n=this.props,r=n.player,i=n.responseTimeout,o=this.state,a=o.tech,u=o.playerAdUnit,s=void 0;return s=t.agent.isIOS?u.el().querySelector(".vjs-tech"):u.state.videoEl,new Promise(function(n,o){a.loadAdUnit(e.containerEl,s,function(u,s){if(u)return t.log.debug("<VPAIDIntegrator._loadAdUnit> error: ",u),void o(u);try{s=e._createVPAIDAdUnitWrapper(s,a.mediaFile.src,i),r.trigger(a.name+"-ad"),e.setState({adUnit:s}),t.log.debug("<VPAIDIntegrator._loadAdUnit> success"),n()}catch(e){t.log.debug("<VPAIDIntegrator._loadAdUnit> error: ",u),o(u)}})})}},{key:"_playAdUnit",value:function(){t.log.debug("<VPAIDIntegrator._playAdUnit>");var e=this;return this._start().then(function(){return e._handshake()}).then(function(){return e._setupEvents()}).then(function(){return e._initAd()}).then(function(){return e._addSkipButton()}).then(function(){return e._addMuteButton()}).then(function(){return e._linkPlayerControls()}).then(function(){return e._playVideoEl()}).then(function(){return e._startAd()})}},{key:"_playVideoEl",value:function(){var t=this.props,e=t.preLoaded,n=t.type,r=t.player,i=t.adsITVC,o=this.state.vastResponse,a={src:r.currentSrc(),duration:r.duration(),currentTime:r.currentTime(),type:r.currentType()};return new Promise(function(t){function u(){t()}function s(){r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer",a),r.vastAd._prepareForAd(),r.trigger(Ie.EVENT.AD_START,r.vastAd),r.vastAd.firstAd=!0,u()}r.trigger("ad:ready",o),e||r.vastAd.firstAd?r.vastAd.firstAd?u():i&&"preroll"===n?r.one("timeupdate",function(){s()}):"preroll"===n?r.one("timeupdate",function(){r.paused()?r.one("play",s):s()}):"midroll"===n?(r.one(Ie.EVENT.AD_ORDER_START_MIDROLL,s),r.trigger("prepareMidrollVastSuccess")):"postroll"===n&&(r.one(Ie.EVENT.AD_ORDER_START_POSTROLL,s),r.one(Ie.EVENT.PLAYER_ENDED_CONTEND,function(){r.trigger("preparePostrollSuccess")})):s()})}},{key:"_handshake",value:function(){function e(t){var e=n(t);return e>=1&&e<=2}function n(t){var e=t.split(".");return parseInt(e[0],10)}t.log.debug("<VPAIDIntegrator._handshake>");var r=this.state.adUnit,i=this.props.VPAID_VERSION;return new Promise(function(t,n){r.handshakeVersion(i,function(r,i){r?n(r):i&&e(i)?t():n(_t.VPAID_INTEGRATOR_HANDSHAKE_NOT_SUPPORT_VERSION)})})}},{key:"_initAd",value:function(){t.log.debug("<VPAIDIntegrator._initAd>");var e=this,n=this.state,r=n.adUnit,i=n.vastResponse,o=this.props.player,a=o.el().querySelector(".vjs-tech"),u=void 0,s=vt.getDimension(a);return u=i.duration?{AdParameters:i.adParameters||"",playerID:o.id_,duration:i.duration}:{AdParameters:i.adParameters||"",playerID:o.id_},new Promise(function(t,n){r.initAd(s.width,s.height,e.VIEW_MODE.NORMAL,-1,u,function(r){r?n(_t.VPAID_INTEGRATOR_ERROR_WHILE_INIT.extendsWithData({error:r})):(e.setState({inited:!0}),t())})})}},{key:"_setupEvents",value:function(){function e(){a.isPaused()&&a.setState({paused:!1})}function n(){a.setState({paused:!0})}function i(){c.pauseAd(r)}function o(){c.resumeAd(r)}t.log.debug("<VPAIDIntegrator._setupEvents>");var a=this,u=this._createVASTTracker(),s=this.props.player,l=this.state,c=l.adUnit,d=l.vastResponse;this.setState({tracker:u}),c.on("AdSkipped",function(){t.log.trace("<VPAIDIntegrator Event>","AdSkipped"),s.trigger(Ie.EVENT.VPAID_AD_SKIPPED),u.trackSkip()}),c.on("AdImpression",function(){t.log.trace("<VPAIDIntegrator Event>","AdImpression"),s.trigger(Ie.EVENT.VPAID_AD_IMPRESSION),u.trackImpressions()}),c.on("AdStarted",function(){t.log.trace("<VPAIDIntegrator Event>","AdStarted"),s.trigger(Ie.EVENT.VPAID_AD_STARTED),u.trackCreativeView(),e()}),c.on("AdVideoStart",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoStart"),s.trigger(Ie.EVENT.VPAID_AD_VIDEO_START),u.trackStart(),e()}),c.on("AdPlaying",function(){t.log.trace("<VPAIDIntegrator Event>","AdPlaying"),s.trigger(Ie.EVENT.VPAID_AD_PLAYING),s.trigger(Ie.EVENT.AD_RESUME_AD),u.trackResume(),e()}),c.on("AdPaused",function(){t.log.trace("<VPAIDIntegrator Event>","AdPaused"),s.trigger(Ie.EVENT.VPAID_AD_PAUSED),s.trigger(Ie.EVENT.AD_PAUSE_AD),u.trackPause(),n()}),c.on("AdVideoFirstQuartile",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoFirstQuartile"),s.trigger(Ie.EVENT.VPAID_AD_VIDEO_FIRST_QUARTILE),u.trackFirstQuartile()}),c.on("AdVideoMidpoint",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoMidpoint"),s.trigger(Ie.EVENT.VPAID_AD_VIDEO_MID_POINT),u.trackMidpoint()}),c.on("AdVideoThirdQuartile",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoThirdQuartile"),s.trigger(Ie.EVENT.VPAID_AD_VIDEO_THIRD_QUARTILE),u.trackThirdQuartile()}),c.on("AdVideoComplete",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoComplete"),s.trigger(Ie.EVENT.VPAID_AD_VIDEO_COMPLETE),u.trackComplete()}),c.on("AdClickThru",function(e){t.log.trace("<VPAIDIntegrator Event>","AdClickThru"),s.trigger(Ie.EVENT.VPAID_AD_CLICK_THRU);var n=e.url,r=e.playerHandles,i=f(n)?n:function(t){var e={CONTENTPLAYHEAD:0};return t?zt.parseURLMacro(t,e):null}(d.clickThrough);u.trackClick(),r&&i&&window.open(i,"_blank")}),c.on("AdUserAcceptInvitation",function(){t.log.trace("<VPAIDIntegrator Event>","AdUserAcceptInvitation"),s.trigger(Ie.EVENT.VPAID_AD_USER_ACCEPT_INVITATION),u.trackAcceptInvitation(),u.trackAcceptInvitationLinear()}),c.on("AdUserClose",function(){t.log.trace("<VPAIDIntegrator Event>","AdUserClose"),s.trigger(Ie.EVENT.VPAID_AD_USER_CLOSE),u.trackClose(),u.trackCloseLinear()}),c.on("AdUserMinimize",function(){t.log.trace("<VPAIDIntegrator Event>","AdUserMinimize"),s.trigger(Ie.EVENT.VPAID_AD_USER_MINIMIZE),u.trackCollapse()}),c.on("AdError",function(){t.log.trace("<VPAIDIntegrator Event>","AdError"),s.trigger(Ie.EVENT.VPAID_AD_ERROR),u.trackErrorWithCode(901)}),c.on("AdVolumeChange",function(){t.log.trace("<VPAIDIntegrator Event>","AdVolumeChange"),s.trigger(Ie.EVENT.VPAID_AD_VOLUME_CHANGE),c.getAdVolume(function(t,e){0===e&&u.trackMute(),e>0&&u.trackUnmute()})}),c.on("AdExpandedChange",function(){t.log.trace("< VPAIDIntegrator Event > ","AdExpandedChange"),c.getAdExpanded(function(t,e){e?u.trackExpand():u.trackCollapse()})});var p=m(this._resizeAd,100),h=this.props.autoResize;h&&(vt.addEventListener(window,"resize",p),vt.addEventListener(window,"orientationchange",p)),s.on("vast.resize",p),s.on("vpaid.pauseAd",i),s.on("vpaid.resumeAd",o),s.one(Ie.EVENT.VPAID_AD_STARTED,p),s.one(Ie.EVENT.VPAID_AD_IMPRESSION,p),s.one(Ie.EVENT.AD_END,function(){s.off("vast.resize",p),s.off("vpaid.pauseAd",i),s.off("vpaid.resumeAd",o),s.off(Ie.EVENT.VPAID_AD_STARTED,p),s.off(Ie.EVENT.VPAID_AD_IMPRESSION,p),h&&(vt.removeEventListener(window,"resize",p),vt.removeEventListener(window,"orientationchange",p))})}},{key:"_addSkipButton",value:function(){}},{key:"_addMuteButton",value:function(){}},{key:"_linkPlayerControls",value:function(){}},{key:"_startAd",value:function(){t.log.debug("<VPAIDIntegrator._startAd>");var e=this.props.player,n=this.state.adUnit;return this.containerEl.style.display="",new Promise(function(r,i){n.startAd(function(n){if(n)return t.log.debug("<VPAIDIntegrator._startAd> error: ",n),void i(n);t.log.debug("<VPAIDIntegrator._startAd> success"),e.trigger(Ie.EVENT.VPAID_AD_START),r()})})}},{key:"_finishPlaying",value:function(){t.log.debug("<VPAIDIntegrator._finishPlaying>");var e=this,n=this.props.player,r=this.state.adUnit;return new Promise(function(t,i){function o(o){if(!e.state.ended){if(n.off("vpaid-skip-ad-error"),r.off("AdStopped"),r.off("AdVideoComplete"),r.off("AdError"),e.setState({ended:!0}),n.trigger("vpaid:AdEnd"),o)return i(o);t()}}r.on("AdStopped",function(){o()}),r.on("AdVideoComplete",function(){o()}),r.on("AdError",function(t){o(_t.VPAID_INTEGRATOR_ERROR_WHILE_WAITING_FINISH.extendsWithData({error:t}))}),n.one("vpaid-skip-ad-error",function(t,e){o(e)})})}},{key:"_createVPAIDAdUnitWrapper",value:function(t,e,n){var r=this.props.player;return new Te({player:r,adUnit:t,src:e,responseTimeout:n})}},{key:"_createVASTTracker",value:function(){var t=this.state,e=t.tech,n=t.vastResponse;return new se(e.mediaFile.src,n)}},{key:"_resizeAd",value:function(){var e=this.props.player,n=this.state.adUnit,r=this.VIEW_MODE,i=e.el().querySelector(".vjs-tech"),o=vt.getDimension(i),a=e.isFullscreen()?r.FULLSCREEN:r.NORMAL;n.resizeAd(o.width,o.height,a,this._logError),t.log.info("resizeAd","width:",o.width,"height:",o.height)}},{key:"_logError",value:function(e){e&&t.log.error("ERROR: "+e.message,e)}},{key:"expandAd",value:function(){var t=this.props.player,e=this.state.adUnit;t&&e.expandAd(function(){})}},{key:"collapseAd",value:function(){var t=this.props.player,e=this.state.adUnit;t&&e.collapseAd(function(){})}},{key:"_trackError",value:function(t){var e=this.state.vastResponse;zt.track(e.errorURLMacros,{ERRORCODE:t.code||901})}}]),n}(),be.defaultProps={responseTimeout:5e3,VPAID_VERSION:"2.0",autoResize:!0},ke=Pe,K(ke.prototype,"_handleAdEnd",[t.autobind],Object.getOwnPropertyDescriptor(ke.prototype,"_handleAdEnd"),ke.prototype),K(ke.prototype,"_resizeAd",[t.autobind],Object.getOwnPropertyDescriptor(ke.prototype,"_resizeAd"),ke.prototype),K(ke.prototype,"_logError",[t.autobind],Object.getOwnPropertyDescriptor(ke.prototype,"_logError"),ke.prototype),ke),Ve=function(t){this.controller=t,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adTagUrl=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&this.requestAds()};Ve.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.adsLoader.getSettings().setPlayerType("vcplayer"),this.adsLoader.getSettings().setPlayerVersion("2.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1)},Ve.prototype.requestAds=function(){var t=new google.ima.AdsRequest;this.controller.getSettings().adTagUrl?t.adTagUrl=this.controller.getSettings().adTagUrl:t.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(t.forceNonLinearFullSlot=!0),t.linearAdSlotWidth=this.controller.getPlayerWidth(),t.linearAdSlotHeight=this.controller.getPlayerHeight(),t.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),t.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),t.setAdWillAutoPlay(this.controller.adsWillAutoplay()),t.setAdWillPlayMuted(this.controller.adsWillPlayMuted()),this.adsLoader.requestAds(t)},Ve.prototype.onAdsManagerLoaded=function(t){this.createAdsRenderingSettings(),this.adsManager=t.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.controller.getIsMobile()&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this))),this.autoPlayAdBreaks||this.initAdsManager(),this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},Ve.prototype.onAdsLoaderError=function(t){window.console.warn("AdsLoader error: "+t.getError()),this.controller.onErrorLoadingAds(t),this.adsManager&&this.adsManager.destroy()},Ve.prototype.initAdsManager=function(){try{var t=this.controller.getPlayerWidth(),e=this.controller.getPlayerHeight();this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.init(t,e,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainer.initialized=!0)}catch(t){this.onAdError(t)}},Ve.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var t in this.controller.getSettings().adsRenderingSettings)""!==t&&(this.adsRenderingSettings[t]=this.controller.getSettings().adsRenderingSettings[t])},Ve.prototype.onAdError=function(t){var e=void 0!==t.getError?t.getError():t.stack;window.console.warn("Ad error: "+e),this.adsManager.destroy(),this.controller.onAdError(t)},Ve.prototype.onAdBreakReady=function(t){this.adBreakReadyListener(t)},Ve.prototype.onContentPauseRequested=function(t){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(t)},Ve.prototype.onContentResumeRequested=function(){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},Ve.prototype.onAllAdsCompleted=function(){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},Ve.prototype.onAdLoaded=function(t){t.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},Ve.prototype.onAdStarted=function(t){this.currentAd=t.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},Ve.prototype.onAdPaused=function(){this.controller.onAdsPaused()},Ve.prototype.onAdResumed=function(){this.controller.onAdsResumed()},Ve.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},Ve.prototype.onAdPlayheadTrackerInterval=function(){var t=this.adsManager.getRemainingTime(),e=this.currentAd.getDuration(),n=e-t;n=n>0?n:0;var r=0,i=void 0;this.currentAd.getAdPodInfo()&&(i=this.currentAd.getAdPodInfo().getAdPosition(),r=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,t,e,i,r)},Ve.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},Ve.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},Ve.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(t){this.onAdError(t)}}},Ve.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},Ve.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},Ve.prototype.onPlayerVolumeChanged=function(t){this.adsManager&&this.adsManager.setVolume(t),this.adMuted=0==t},Ve.prototype.onPlayerResize=function(t,e){this.adsManager&&(this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.resize(t,e,google.ima.ViewMode.NORMAL))},Ve.prototype.getCurrentAd=function(){return this.currentAd},Ve.prototype.setAdBreakReadyListener=function(t){this.adBreakReadyListener=t},Ve.prototype.isAdPlaying=function(){return this.adPlaying},Ve.prototype.isAdMuted=function(){return this.adMuted},Ve.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},Ve.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},Ve.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},Ve.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},Ve.prototype.setVolume=function(t){this.adsManager.setVolume(t),this.adMuted=0==t},Ve.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainerInitialized=!0,this.adDisplayContainer.initialize()},Ve.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},Ve.prototype.addEventListener=function(t,e){this.adsManager&&this.adsManager.addEventListener(t,e)},Ve.prototype.removeEventListener=function(t,e){this.adsManager&&this.adsManager.removeEventListener(t,e)},Ve.prototype.getAdsManager=function(){return this.adsManager},Ve.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var we,Se,De,Le,Oe,Ce=(Se=we=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.settings={locale:null,disableFlashAds:!0,disableCustomPlaybackForIOS10Plus:!0,adTagUrl:null,adsResponse:null,vpaidAllowed:!0,vpaidMode:!0,numRedirects:5,forceNonLinearFullSlot:!1,nonLinearWidth:null,nonLinearHeight:null,adsManagerLoadedCallback:null,adsRenderingSettings:null,debug:!1,timeout:5e3,prerollTimeout:1e3,adLabel:"Advertisement",showControlsForJSAds:!0,AdContainer:null,videoEl:null},e.settings=lt({},e.settings,e.props),e.sdkImpl=new Ve(e),e}return ct(n,pt),st(n,[{key:"requestAds",value:function(){this.sdkImpl.requestAds()}},{key:"onPlayerReadyForPreroll",value:function(){this.sdkImpl.onPlayerReadyForPreroll()}},{key:"initializeAdDisplayContainer",value:function(){this.sdkImpl.initializeAdDisplayContainer()}},{key:"playAdBreak",value:function(){this.sdkImpl.playAdBreak()}},{key:"addEventListener",value:function(t,e){this.sdkImpl.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.sdkImpl.removeEventListener(t,e)}},{key:"getAdsManager",value:function(){return this.sdkImpl.getAdsManager()}},{key:"getSettings",value:function(){return this.settings}},{key:"getAdContainerDiv",value:function(){return this.settings.AdContainer}},{key:"getContentPlayer",value:function(){return this.settings.videoEl}},{key:"getPlayerWidth",value:function(){var t=this.props.player.el().querySelector(".vjs-tech");return vt.getDimension(t).width}},{key:"getPlayerHeight",value:function(){var t=this.props.player.el().querySelector(".vjs-tech");return vt.getDimension(t).height}},{key:"adsWillAutoplay",value:function(){}},{key:"adsWillPlayMuted",value:function(){}},{key:"getContentPlayheadTracker",value:function(){return{currentTime:0,previousTime:0,seeking:!1,duration:0}}},{key:"getIsMobile",value:function(){return t.agent.isMobile}},{key:"onAdsReady",value:function(){t.log.debug("<ImaController.onAdsReady>")}},{key:"onErrorLoadingAds",value:function(){t.log.debug("<ImaController.onErrorLoadingAds>")}},{key:"getPlayerVolume",value:function(){return 1}},{key:"onAdError",value:function(e){t.log.debug("<ImaController.onAdError>",e)}},{key:"onAdBreakStart",value:function(){t.log.debug("<ImaController.onAdBreakStart>")}},{key:"onAdBreakEnd",value:function(){t.log.debug("<ImaController.onAdBreakEnd>")}},{key:"onAllAdsCompleted",value:function(){t.log.debug("<ImaController.onAllAdsCompleted>")}},{key:"onNonLinearAdLoad",value:function(){t.log.debug("<ImaController.onNonLinearAdLoad>")}},{key:"onLinearAdStart",value:function(){t.log.debug("<ImaController.onLinearAdStart>")}},{key:"onNonLinearAdStart",value:function(){t.log.debug("<ImaController.onNonLinearAdStart>")}},{key:"onAdsPaused",value:function(){t.log.debug("<ImaController.onAdsPaused>")}},{key:"onAdsResumed",value:function(){t.log.debug("<ImaController.onAdsResumed>")}},{key:"onAdPlayheadUpdated",value:function(){t.log.debug("<ImaController.onAdPlayheadUpdated>")}},{key:"onContentAndAdsCompleted",value:function(){t.log.debug("<ImaController.onContentAndAdsCompleted>")}},{key:"onNoPostroll",value:function(){t.log.debug("<ImaController.onNoPostroll>")}},{key:"showAdContainer",value:function(){t.log.debug("<ImaController.showAdContainer>")}},{key:"playContent",value:function(){t.log.debug("<ImaController.playContent>")}},{key:"pauseAd",value:function(){this.sdkImpl.pauseAds()}},{key:"resumeAd",value:function(){this.sdkImpl.resumeAds()}}]),n}(),we.propTypes={player:t.PropTypes.object.isRequired},Se),Ne=(Le=De=function(e){function n(t){return ut(this,n),dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return ct(n,pt),st(n,[{key:"loadAdUnit",value:function(e,n,r){t.log.debug("<ImaAdUnit.loadAdUnit>");var i=this.controller=new Ce(lt({},this.props,{AdContainer:e,videoEl:n}));i.onAdsReady=function(){t.log.debug("<ImaAdUnit.loadAdUnit> success"),r()},i.onErrorLoadingAds=function(e){t.log.debug("<ImaAdUnit.loadAdUnit> error",e),r(e)}}},{key:"startAd",value:function(){t.log.debug("<ImaAdUnit.startAd>"),this.controller.onPlayerReadyForPreroll()}},{key:"pauseAd",value:function(){this.controller.pauseAd()}},{key:"resumeAd",value:function(){this.controller.resumeAd()}},{key:"onAdError",value:function(t){this.controller.onAdError=t}},{key:"on",value:function(t,e){this.controller.addEventListener(t,e)}},{key:"off",value:function(t,e){this.controller.removeEventListener(t,e)}}]),n}(),De.propTypes={player:t.PropTypes.object.isRequired},Le),Ue=t.playerconfig.DEFAULT;if(!window.google&&!window.___firstLoadGoogle__){window.___firstLoadGoogle__=!0;var Me=document.getElementsByTagName("head")[0],xe=document.createElement("script");xe.type="text/javascript",xe.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",Me.appendChild(xe)}var je,Fe,ze,We,Be,He,qe,Ge,Ke,$e,Xe,Qe,Ye,Ze,Je,tn,en,nn,rn,on,an,un,sn,ln,cn,dn,fn,pn,hn=(Oe=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),r=e.props.player;return e.containerEl=e._createImaContainerEl(r),r.one(Ue.EVENT.AD_END,e._handleAdEnd),e}return ct(n,pt),st(n,[{key:"_createImaContainerEl",value:function(){var t=this.props.player,e=document.createElement("div");return vt.addClass(e,"ima-container"),t.overlay.append(e),e}},{key:"_handleAdEnd",value:function(){t.log.debug("<VPAIDIntegrator._handleAdEnd>"),this.containerEl&&(vt.remove(this.containerEl),this.containerEl=null)}},{key:"playAd",value:function(t){var e=this;return this.setState({vastResponse:t}),Promise.resolve().then(function(){return e._loadAdUnit()}).then(function(){return e._setupEvents()}).then(function(){return e._playAdUnit()}).then(function(){return e._finishPlaying()}).catch(function(t){throw t})}},{key:"pauseAd",value:function(){var t=this.props.player,e=this.state.adUnit;t.pause(!0),e&&e.pauseAd()}},{key:"resumeAd",value:function(){var t=this.state.adUnit;t&&t.resumeAd()}},{key:"_loadAdUnit",value:function(){var t=this,e=this.props.player,n=this.state.vastResponse,r=e.el().querySelector(".vjs-tech");return new Promise(function(i,o){var a=new Ne(lt({player:e},n));a.loadAdUnit(t.containerEl,r,function(e){if(e)return o(e);t.setState({adUnit:a}),i()})})}},{key:"_setupEvents",value:function(){t.log.debug("<ImaIntegrator._setupEvents>");var e=this.state.adUnit,n=this.props.player;e.on(google.ima.AdEvent.Type.STARTED,function(){n.trigger(Ue.EVENT.IMA_AD_STARTED)})}},{key:"_playAdUnit",value:function(){var t=this.state.adUnit,e=this.props.player;t.startAd(),e.trigger(Ue.EVENT.IMA_AD_START)}},{key:"_finishPlaying",value:function(){t.log.debug("<ImaIntegrator._finishPlaying>");var e=this.state.adUnit;return new Promise(function(t,n){function r(e){if(e)return n(e);t()}e.on(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){r()}),e.on(google.ima.AdErrorEvent.Type.AD_ERROR,function(t){r(t)}),e.onAdError(function(t){r(t)})})}}]),n}(),function(t,e,n,r,i){var o={};Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null)}(Oe.prototype,"_handleAdEnd",[t.autobind],Object.getOwnPropertyDescriptor(Oe.prototype,"_handleAdEnd"),Oe.prototype),Oe),vn=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(function(i,o){rt.xhr(lt({timeout:1e4},e),function(a,u,s){200===u.statusCode?i(s):n&&r<n?t(e,n,++r).then(function(t){i(t)}).catch(function(t){o(t)}):o(a)})})},gn="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yn=($(function(t){var e=function(t){function e(t,e,n,i){var o=e&&e.prototype instanceof r?e:r,a=Object.create(o.prototype),u=new f(i||[]);return a._invoke=s(t,n,u),a}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t,e){function r(i,o,a,u){var s=n(t[i],t,o);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&y.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,u)},function(t){r("throw",t,a,u)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,u)})}u(s.arg)}var i;this._invoke=function(t,n){function o(){return new e(function(e,i){r(t,n,e,i)})}return i=i?i.then(o,o):o()}}function s(t,e,r){var i=T;return function(o,a){if(i===b)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw a;return h()}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var s=l(u,r);if(s){if(s===I)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===T)throw i=P,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=b;var c=n(t,e,r);if("normal"===c.type){if(i=r.done?P:k,c.arg===I)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=P,r.method="throw",r.arg=c.arg)}}}function l(t,e){var r=t.iterator[e.method];if(r===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,l(t,e),"throw"===e.method))return I;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var i=n(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,I;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,I):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,I)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function f(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function p(t){if(t){var e=t[A];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(y.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:h}}function h(){return{value:v,done:!0}}var v,g=Object.prototype,y=g.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},A=_.iterator||"@@iterator",m=_.asyncIterator||"@@asyncIterator",E=_.toStringTag||"@@toStringTag";t.wrap=e;var T="suspendedStart",k="suspendedYield",b="executing",P="completed",I={},R={};R[A]=function(){return this};var V=Object.getPrototypeOf,w=V&&V(V(p([])));w&&w!==g&&y.call(w,A)&&(R=w);var S=o.prototype=r.prototype=Object.create(R);return i.prototype=S.constructor=o,o.constructor=i,o[E]=i.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,E in t||(t[E]="GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},a(u.prototype),u.prototype[m]=function(){return this},t.AsyncIterator=u,t.async=function(n,r,i,o,a){void 0===a&&(a=Promise);var s=new u(e(n,r,i,o),a);return t.isGeneratorFunction(r)?s:s.next().then(function(t){return t.done?t.value:s.next()})},a(S),S[E]="Generator",S[A]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=p,f.prototype={constructor:f,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),u=y.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),I},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),I}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),I}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),{"lg1.logging.admicro.vn":"contineljs.com","sspapi.admicro.vn":"genmonet.com","media1.admicro.vn":"static.contineljs.com","adi.admicro.vn":"cdnstoremedia.com","viewplus.admicro.vn":"vp.cdnstoremedia.com","sspcallback.js":"sspcallbackcdn.js","ssppage.js":"ssppagecdn.js"}),_n=["https://tag.gammaplatform.com/adx/request/?wid=1447649687&zid=1490756287&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__","https://tag.gammaplatform.com/adx/request/?wid=1486702029&zid=1536050336&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__","https://tag.gammaplatform.com/adx/request/?wid=1447649687&zid=1543220535&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__","https://tag.gammaplatform.com/adx/request/?wid=1486702029&zid=1543221028&content_page_url=__page-url__&cb=__random-number__&player_width=__player-width__&player_height=__player-height__&device_id=__device-id__"],An=(Fe=je=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.isPassBack=!1,e.errorURLMacros=[],e}return ct(n,pt),st(n,[{key:"_filterAdChain",value:function(){var t=at(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],r=void 0;e.length;)try{i=this._buildVASTResponse(e.shift()),n.push(i)}catch(t){r=t}if(!n.length){t.next=5;break}return t.abrupt("return",n);case 5:throw r;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"adgetVASTResponse",value:function(){var t=at(regeneratorRuntime.mark(function t(e){var n,r=this,i=e.adTagUrl,o=e.adTagXML,a=e.isPackageAds;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.abrupt("return",Promise.resolve().then(function(){return r._getVASTAd({adTagUrl:i,adTagXML:o,isPackageAds:a})}).then(function(t){return n._filterAdChain(t)}).catch(function(t){if(t.ima)return[t];throw t}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getVASTResponse",value:function(){var t=at(regeneratorRuntime.mark(function t(e){var n,r=e.adTagUrl,i=e.adTagXML,o=e.isPackageAds;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r||i){t.next=2;break}throw _t.VASTClIENT_MISS_AD_TAG_URL;case 2:return(n=[]).push(this.adgetVASTResponse({adTagUrl:r,adTagXML:i,isPackageAds:o})),t.abrupt("return",Promise.all(n.map(function(t){return t.catch(function(){return[]})})).then(function(t){var e=[],n=[].concat(ft(t[0]));for(var r in n)if(n[r].ads)e.push(n[r]);else if(n[r].ima)return n[r];if(e.length)return e;throw n[0]}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"validateVASTTree",value:function(t){var e=Bt.attr(t,"version");if(!t.ad)throw _t.ERROR_303;if(e&&3!=e&&2!=e&&4!=e)throw _t.ERROR_102}},{key:"_buildVASTResponse",value:function(t){var e=new ue;return function(t,e){e.forEach(function(e){t.addAd(e)})}(e,t),function(t){if(!t.hasLinear())throw _t.VASTClIENT_AD_TYPE_NOT_SUPPORT;if(void 0===t.duration)throw _t.VASTClIENT_MISSING_DURATIOn}(e),e}},{key:"_getVastTree",value:function(){var e=at(regeneratorRuntime.mark(function e(n){var r,i,o=n.adTagUrl,a=n.adTagXML;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0,!o){e.next=9;break}if(-1===o.indexOf("googleads.g.doubleclick.net")){e.next=4;break}throw{adTagUrl:o,adsResponse:null,ima:!0};case 4:return e.next=6,this._requestVASTXml(o);case 6:r=e.sent,e.next=10;break;case 9:r=a;case 10:i=void 0,t.agent.isFireFox&&Object.keys(yn).map(function(t){r=r.split(t).join(yn[t])}),e.prev=12,i=Bt.toJXONTree(r),t.log.debug("built JXONTree from VAST response:",i),l(i.ad)?i.ads=i.ad:i.ad?i.ads=[i.ad]:i.ads=[],e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(12),_t.ERROR_100;case 21:return this.validateVASTTree(i),e.abrupt("return",i);case 23:case"end":return e.stop()}},e,this,[[12,18]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_getVASTAd",value:function(){var t=at(regeneratorRuntime.mark(function t(e){var n,r,i,o,a=e.adTagUrl,u=e.adTagXML,s=e.isPackageAds,c=e.adChainWrapper;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=2,t.next=5,this._getVastTree({adTagUrl:a,adTagXML:u});case 5:n=t.sent,t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),t.t0;case 12:if(r=n&&l(n.ads)?n.ads:null,!s||c){t.next=16;break}return i=this._buildAd(r[0]),t.abrupt("return",this._getVASTAd({adTagUrl:i.wrapper.VASTAdTagURI,adChainWrapper:i}));case 16:return o=n&&l(n.ads)?n.ads:null,t.abrupt("return",this._waterfallHandler({waterfallAds:o,adChainWrapper:c}).catch(function(t){if(t.ima)throw{adTagUrl:a,ima:!0}}));case 18:case"end":return t.stop()}},t,this,[[2,8]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getAd",value:function(){var t=at(regeneratorRuntime.mark(function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this,!(n.length>=this.props.WRAPPER_LIMIT)){t.next=3;break}throw _t.VASTClIENT_WRAPPER_LIMIT_REACHED;case 3:if(i=void 0,o=void 0,!c(e)){t.next=11;break}return t.next=7,this._getVastTree({adTagUrl:e});case 7:o=t.sent,i=o.ad,t.next=12;break;case 11:i=e;case 12:if(!(i instanceof Array)){t.next=15;break}return i.forEach(function(t){var e=r._buildAd(t);if(n.push(e),e.wrapper&&-1===e.wrapper.VASTAdTagURI.indexOf("//"))throw _t.ERROR_301;if(e.wrapper){if(-1!==e.wrapper.VASTAdTagURI.indexOf("googleads.g.doubleclick.net"))throw{adTagUrl:null,adsResponse:n,ima:!0};return r._getAd(e.wrapper.VASTAdTagURI,n)}}),t.abrupt("return",n);case 15:if(a=this._buildAd(i),n.push(a),!a.wrapper){t.next=20;break}if(-1!==a.wrapper.VASTAdTagURI.indexOf("//")){t.next=20;break}throw _t.ERROR_301;case 20:if(!a.wrapper){t.next=24;break}if(-1===a.wrapper.VASTAdTagURI.indexOf("googleads.g.doubleclick.net")){t.next=23;break}throw{adTagUrl:null,adsResponse:n,ima:!0};case 23:return t.abrupt("return",this._getAd(a.wrapper.VASTAdTagURI,n));case 24:return t.abrupt("return",n);case 25:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_buildAd",value:function(t){var e=new ae(t);return this._validateAd(e),e}},{key:"_validateAd",value:function(t){var e=t.wrapper,n=t.inLine;if(n&&e)throw _t.VALID_AD_ERROR_1;if(!n&&!e)throw _t.VALID_AD_ERROR_2;if(n&&!n.isSupported())throw _t.VALID_AD_ERROR_3;if(e&&!e.VASTAdTagURI)throw _t.VALID_AD_ERROR_4}},{key:"_waterfallHandler",value:function(){var t=at(regeneratorRuntime.mark(function t(e){var n,r,i,o,a=e.waterfallAds,u=e.adChainWrapper;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[];a.length;)r=this._getAd(a.shift(),[]).catch(function(t){return{error:t}}),n.push(r);return t.next=4,Promise.all(n);case 4:if(i=t.sent,!(o=i.filter(function(t){return!t.error&&(u&&t.push(u),!0)})).length){t.next=8;break}return t.abrupt("return",o);case 8:throw i[0].error;case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_requestVASTXml",value:function(t){var e=!1;return _n.indexOf(t)>=0&&(e=!0),new Promise(function(n,r){vn({uri:t,withCredentials:e,method:"GET"},0).then(function(t){t?n(t):r(_t.ERROR_301)}).catch(function(){r(_t.ERROR_301)})})}}]),n}(),je.defaultProps={WRAPPER_LIMIT:5},Fe),mn=t.playerconfig.DEFAULT,En=(ze=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),r=e.props.player;return e._volumeChangeVpaid=e._volumeChangeVpaid.bind(e),e.player={},e._savePlayerSnapshot(),ve.once(r,[mn.EVENT.AD_END],e._handleRestorePlayer),e}return ct(n,pt),st(n,[{key:"_savePlayerSnapshot",value:function(){var e=this.props,n=e.player,r=e.adsITVC,i=n.options().params,o=this,a=!1;this.player.currentTime=n.currentTime.bind(n),this.player.muted=n.muted.bind(n),this.player.volume=n.volume.bind(n);var u=void 0;n.vastAd&&(n.on(mn.EVENT.VPAID_AD_VOLUME_CHANGE,this._volumeChangeVpaid),n.one("snapshotPlayer",function(e,s){a="preroll"===n.vastAd.adPosition()?i.muted||i.mute:n.muted(),r&&(a=n.muted());var l=!n.paused()||"postroll"!==n.vastAd.adPosition(),c=void 0;c="postroll"!==n.vastAd.adPosition()?n.currentTime()-2:n.currentTime(),u={playing:l,ended:n.ended(),duration:n.duration(),src:n.currentSrc(),currentTime:c,type:n.currentType(),volume:n.volume(),muted:a||n.muted()},u=t.mergeOptions(u,s),o.setState({snapshot:u}),l&&n.pause()}))}},{key:"_volumeChangeVpaid",value:function(){var t=this.state.snapshot;this.props.player.vastAd.getAdVolume().then(function(e){t.muted=0===e})}},{key:"snapshot",value:function(){return this.state.snapshot}},{key:"_handleRestorePlayer",value:function(){var e=this.state.snapshot,n=this.props.player;if(n.off(mn.EVENT.VPAID_AD_VOLUME_CHANGE,this._volumeChangeVpaid),e){var r=this._needRestoreSrc(e),i=e.playing;if(n.vastAd=null,!r)return this.player.currentTime(e.currentTime),void this._resumePlayback(i);n.one("canplay",this._tryToResume.bind(this,e)),this._ensureCanplayEvtGetsFired(),t.agent.isMobile||n.reset(),n.src({src:e.src,type:e.type}),this.player.currentTime(e.currentTime),n.trigger("waiting"),t.agent.isMobile||n.load(),this._resumePlayback(i)}else this._resumePlayback(i)}},{key:"_tryToResume",value:function(e){var n=this.props.player,r=this;try{n.currentTime()!==e.currentTime?(n.one("seeked",function(){r._resumePlayback(e.playing)}),n.currentTime(e.currentTime)):this._resumePlayback(e.playing)}catch(e){t.log.warn("Failed to resume the content after an advertisement",e)}}},{key:"_ensureCanplayEvtGetsFired",value:function(){var t=this.props.player,e=setTimeout(function(){t.trigger("canplay")},1e3);t.one("canplay",function(){clearTimeout(e)})}},{key:"_resumePlayback",value:function(t){var e=this.props.player,n=this.state.snapshot,r=n.currentTime,i=n.muted,o=n.volume;this.triggerRestorePlayback_||(e.trigger(mn.EVENT.AD_RESTORED_PLAYBACK),this.triggerRestorePlayback_=!0),t&&(this.player.currentTime(r),this.player.muted(i),this.player.volume(o),e.options().params.adThumbnail&&!document.getElementById(""+e.id_).hasAttribute("loop")||setTimeout(function(){e.play(!0)},0))}},{key:"_needRestoreSrc",value:function(e){var n=this.props.player,r=n.src();if(!n.vastAd.adUnit())return!1;var i=n.vastAd.adUnit().type;return!r||(r!==e.src||(!!t.agent.isIOS||"VAST"!==i&&"VPAID"!==i&&(!/mediasource|blob/.test(r)&&(!!/m3u8/gi.test(r)||r!==e.src))))}}]),n}(),X(ze.prototype,"_handleRestorePlayer",[t.autobind],Object.getOwnPropertyDescriptor(ze.prototype,"_handleRestorePlayer"),ze.prototype),X(ze.prototype,"_tryToResume",[t.autobind],Object.getOwnPropertyDescriptor(ze.prototype,"_tryToResume"),ze.prototype),ze),Tn=$(function(t,e){(function(){function n(t,e){return t.set(e[0],e[1]),t}function r(t,e){return t.add(e),t}function i(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function o(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function a(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function u(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function l(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function c(t,e){return!!(null==t?0:t.length)&&E(t,e,0)>-1}function d(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function f(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function h(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function v(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function g(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function y(t){return t.split("")}function _(t){return t.match(Me)||[]}function A(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function m(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function E(t,e,n){return e===e?$(t,e,n):m(t,k,n)}function T(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function k(t){return t!==t}function b(t,e){var n=null==t?0:t.length;return n?w(t,e)/n:Lt}function P(t){return function(e){return null==e?et:e[t]}}function I(t){return function(e){return null==t?et:t[e]}}function R(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function V(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function w(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==et&&(n=n===et?o:n+o)}return n}function S(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function D(t,e){return f(e,function(e){return[e,t[e]]})}function L(t){return function(e){return t(e)}}function O(t,e){return f(e,function(e){return t[e]})}function C(t,e){return t.has(e)}function N(t,e){for(var n=-1,r=t.length;++n<r&&E(e,t[n],0)>-1;);return n}function U(t,e){for(var n=t.length;n--&&E(e,t[n],0)>-1;);return n}function M(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function x(t){return"\\"+Pn[t]}function j(t,e){return null==t?et:t[e]}function F(t){return vn.test(t)}function z(t){return yn.test(t)}function W(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function B(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function H(t,e){return function(n){return t(e(n))}}function q(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ut||(t[n]=ut,o[i++]=n)}return o}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function $(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function X(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function Q(t){return F(t)?Z(t):Wn(t)}function Y(t){return F(t)?J(t):y(t)}function Z(t){for(var e=pn.lastIndex=0;pn.test(t);)++e;return e}function J(t){return t.match(pn)||[]}function tt(t){return t.match(hn)||[]}var et,nt=200,rt="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",it="Expected a function",ot="__lodash_hash_undefined__",at=500,ut="__lodash_placeholder__",st=1,lt=2,ct=4,dt=1,ft=2,pt=1,ht=2,vt=4,gt=8,yt=16,_t=32,At=64,mt=128,Et=256,Tt=512,kt=30,bt="...",Pt=800,It=16,Rt=1,Vt=2,wt=1/0,St=9007199254740991,Dt=1.7976931348623157e308,Lt=NaN,Ot=4294967295,Ct=Ot-1,Nt=Ot>>>1,Ut=[["ary",mt],["bind",pt],["bindKey",ht],["curry",gt],["curryRight",yt],["flip",Tt],["partial",_t],["partialRight",At],["rearg",Et]],Mt="[object Arguments]",xt="[object Array]",jt="[object AsyncFunction]",Ft="[object Boolean]",zt="[object Date]",Wt="[object DOMException]",Bt="[object Error]",Ht="[object Function]",qt="[object GeneratorFunction]",Gt="[object Map]",Kt="[object Number]",$t="[object Null]",Xt="[object Object]",Qt="[object Proxy]",Yt="[object RegExp]",Zt="[object Set]",Jt="[object String]",te="[object Symbol]",ee="[object Undefined]",ne="[object WeakMap]",re="[object WeakSet]",ie="[object ArrayBuffer]",oe="[object DataView]",ae="[object Float32Array]",ue="[object Float64Array]",se="[object Int8Array]",le="[object Int16Array]",ce="[object Int32Array]",de="[object Uint8Array]",fe="[object Uint8ClampedArray]",pe="[object Uint16Array]",he="[object Uint32Array]",ve=/\b__p \+= '';/g,ge=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_e=/&(?:amp|lt|gt|quot|#39);/g,Ae=/[&<>"']/g,me=RegExp(_e.source),Ee=RegExp(Ae.source),Te=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,be=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Re=/^\./,Ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/[\\^$.*+?()[\]{}|]/g,Se=RegExp(we.source),De=/^\s+|\s+$/g,Le=/^\s+/,Oe=/\s+$/,Ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xe=/\\(\\)?/g,je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fe=/\w*$/,ze=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Be=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,qe=/^(?:0|[1-9]\d*)$/,Ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,$e=/['\n\r\u2028\u2029\\]/g,Xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ye="["+Qe+"]",Ze="["+Xe+"]",Je="[a-z\\xdf-\\xf6\\xf8-\\xff]",tn="[^\\ud800-\\udfff"+Qe+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",en="\\ud83c[\\udffb-\\udfff]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",rn="[\\ud800-\\udbff][\\udc00-\\udfff]",on="[A-Z\\xc0-\\xd6\\xd8-\\xde]",an="(?:"+Je+"|"+tn+")",un="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sn="[\\ufe0e\\ufe0f]?"+un+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",nn,rn].join("|")+")[\\ufe0e\\ufe0f]?"+un+")*"),ln="(?:"+["[\\u2700-\\u27bf]",nn,rn].join("|")+")"+sn,cn="(?:"+["[^\\ud800-\\udfff]"+Ze+"?",Ze,nn,rn,"[\\ud800-\\udfff]"].join("|")+")",dn=RegExp("['’]","g"),fn=RegExp(Ze,"g"),pn=RegExp(en+"(?="+en+")|"+cn+sn,"g"),hn=RegExp([on+"?"+Je+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Ye,on,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Ye,on+an,"$"].join("|")+")",on+"?"+an+"+(?:['’](?:d|ll|m|re|s|t|ve))?",on+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",ln].join("|"),"g"),vn=RegExp("[\\u200d\\ud800-\\udfff"+Xe+"\\ufe0e\\ufe0f]"),yn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],An=-1,mn={};mn[ae]=mn[ue]=mn[se]=mn[le]=mn[ce]=mn[de]=mn[fe]=mn[pe]=mn[he]=!0,mn[Mt]=mn[xt]=mn[ie]=mn[Ft]=mn[oe]=mn[zt]=mn[Bt]=mn[Ht]=mn[Gt]=mn[Kt]=mn[Xt]=mn[Yt]=mn[Zt]=mn[Jt]=mn[ne]=!1;var En={};En[Mt]=En[xt]=En[ie]=En[oe]=En[Ft]=En[zt]=En[ae]=En[ue]=En[se]=En[le]=En[ce]=En[Gt]=En[Kt]=En[Xt]=En[Yt]=En[Zt]=En[Jt]=En[te]=En[de]=En[fe]=En[pe]=En[he]=!0,En[Bt]=En[Ht]=En[ne]=!1;var Tn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},In=parseFloat,Rn=parseInt,Vn="object"==typeof gn&&gn&&gn.Object===Object&&gn,wn="object"==typeof self&&self&&self.Object===Object&&self,Sn=Vn||wn||Function("return this")(),Dn=e&&!e.nodeType&&e,Ln=Dn&&!0&&t&&!t.nodeType&&t,On=Ln&&Ln.exports===Dn,Cn=On&&Vn.process,Nn=function(){try{return Cn&&Cn.binding&&Cn.binding("util")}catch(t){}}(),Un=Nn&&Nn.isArrayBuffer,Mn=Nn&&Nn.isDate,xn=Nn&&Nn.isMap,jn=Nn&&Nn.isRegExp,Fn=Nn&&Nn.isSet,zn=Nn&&Nn.isTypedArray,Wn=P("length"),Bn=I(Tn),Hn=I(kn),qn=I(bn),Gn=function t(e){function y(t){if(ea(t)&&!Hs(t)&&!(t instanceof Z)){if(t instanceof $)return t;if(Ha.call(t,"__wrapped__"))return Po(t)}return new $(t)}function I(){}function $(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=et}function Z(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ot,this.__views__=[]}function J(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Me(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qe(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Xe;++e<n;)this.add(t[e])}function Ye(t){var e=this.__data__=new Me(t);this.size=e.size}function Ze(t,e){var n=Hs(t),r=!n&&Bs(t),i=!n&&!r&&Gs(t),o=!n&&!r&&!i&&Ys(t),a=n||r||i||o,u=a?S(t.length,Ma):[],s=u.length;for(var l in t)!e&&!Ha.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ro(l,s))||u.push(l);return u}function Je(t){var e=t.length;return e?t[Tr(0,e-1)]:et}function tn(t,e){return Eo(ai(t),pn(e,0,t.length))}function en(t){return Eo(ai(t))}function nn(t,e,n){(n===et||Ko(t[e],n))&&(n!==et||e in t)||ln(t,e,n)}function rn(t,e,n){var r=t[e];Ha.call(t,e)&&Ko(r,n)&&(n!==et||e in t)||ln(t,e,n)}function on(t,e){for(var n=t.length;n--;)if(Ko(t[n][0],e))return n;return-1}function an(t,e,n,r){return Wu(t,function(t,i,o){e(r,t,n(t),o)}),r}function un(t,e){return t&&ui(e,va(e),t)}function sn(t,e){return t&&ui(e,ga(e),t)}function ln(t,e,n){"__proto__"==e&&su?su(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function cn(t,e){for(var n=-1,r=e.length,i=Sa(r),o=null==t;++n<r;)i[n]=o?et:pa(t,e[n]);return i}function pn(t,e,n){return t===t&&(n!==et&&(t=t<=n?t:n),e!==et&&(t=t>=e?t:e)),t}function hn(t,e,n,r,i,o){var u,s=e&st,l=e&lt,c=e&ct;if(n&&(u=i?n(t,r,i,o):n(t)),u!==et)return u;if(!ta(t))return t;var d=Hs(t);if(d){if(u=Zi(t),!s)return ai(t,u)}else{var f=ts(t),p=f==Ht||f==qt;if(Gs(t))return $r(t,s);if(f==Xt||f==Mt||p&&!i){if(u=l||p?{}:Ji(t),!s)return l?li(t,sn(u,t)):si(t,un(u,t))}else{if(!En[f])return i?t:{};u=to(t,f,hn,s)}}o||(o=new Ye);var h=o.get(t);if(h)return h;o.set(t,u);var v=c?l?zi:Fi:l?ga:va,g=d?et:v(t);return a(g||t,function(r,i){g&&(r=t[i=r]),rn(u,i,hn(r,e,n,i,t,o))}),u}function vn(t){var e=va(t);return function(n){return gn(n,t,e)}}function gn(t,e,n){var r=n.length;if(null==t)return!r;for(t=Na(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===et&&!(i in t)||!o(a))return!1}return!0}function yn(t,e,n){if("function"!=typeof t)throw new xa(it);return rs(function(){t.apply(et,n)},e)}function Tn(t,e,n,r){var i=-1,o=c,a=!0,u=t.length,s=[],l=e.length;if(!u)return s;n&&(e=f(e,L(n))),r?(o=d,a=!1):e.length>=nt&&(o=C,a=!1,e=new Qe(e));t:for(;++i<u;){var p=t[i],h=null==n?p:n(p);if(p=r||0!==p?p:0,a&&h===h){for(var v=l;v--;)if(e[v]===h)continue t;s.push(p)}else o(e,h,r)||s.push(p)}return s}function kn(t,e){var n=!0;return Wu(t,function(t,r,i){return n=!!e(t,r,i)}),n}function bn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(u===et?a===a&&!oa(a):n(a,u)))var u=a,s=o}return s}function Pn(t,e,n,r){var i=t.length;for((n=sa(n))<0&&(n=-n>i?0:i+n),(r=r===et||r>i?i:sa(r))<0&&(r+=i),r=n>r?0:la(r);n<r;)t[n++]=e;return t}function Vn(t,e){var n=[];return Wu(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function wn(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=no),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?wn(u,e-1,n,r,i):p(i,u):r||(i[i.length]=u)}return i}function Dn(t,e){return t&&Hu(t,e,va)}function Ln(t,e){return t&&qu(t,e,va)}function Cn(t,e){return l(e,function(e){return Yo(t[e])})}function Nn(t,e){for(var n=0,r=(e=Gr(e,t)).length;null!=t&&n<r;)t=t[To(e[n++])];return n&&n==r?t:et}function Wn(t,e,n){var r=e(t);return Hs(t)?r:p(r,n(t))}function Kn(t){return null==t?t===et?ee:$t:uu&&uu in Na(t)?$i(t):vo(t)}function $n(t,e){return t>e}function Xn(t,e){return null!=t&&Ha.call(t,e)}function Qn(t,e){return null!=t&&e in Na(t)}function Yn(t,e,n){return t>=mu(e,n)&&t<Au(e,n)}function Zn(t,e,n){for(var r=n?d:c,i=t[0].length,o=t.length,a=o,u=Sa(o),s=1/0,l=[];a--;){var p=t[a];a&&e&&(p=f(p,L(e))),s=mu(p.length,s),u[a]=!n&&(e||i>=120&&p.length>=120)?new Qe(a&&p):et}p=t[0];var h=-1,v=u[0];t:for(;++h<i&&l.length<s;){var g=p[h],y=e?e(g):g;if(g=n||0!==g?g:0,!(v?C(v,y):r(l,y,n))){for(a=o;--a;){var _=u[a];if(!(_?C(_,y):r(t[a],y,n)))continue t}v&&v.push(y),l.push(g)}}return l}function Jn(t,e,n,r){return Dn(t,function(t,i,o){e(r,n(t),i,o)}),r}function tr(t,e,n){var r=null==(t=yo(t,e=Gr(e,t)))?t:t[To(So(e))];return null==r?et:i(r,t,n)}function er(t){return ea(t)&&Kn(t)==Mt}function nr(t,e,n,r,i){return t===e||(null==t||null==e||!ea(t)&&!ea(e)?t!==t&&e!==e:rr(t,e,n,r,nr,i))}function rr(t,e,n,r,i,o){var a=Hs(t),u=Hs(e),s=a?xt:ts(t),l=u?xt:ts(e),c=(s=s==Mt?Xt:s)==Xt,d=(l=l==Mt?Xt:l)==Xt,f=s==l;if(f&&Gs(t)){if(!Gs(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new Ye),a||Ys(t)?Ui(t,e,n,r,i,o):Mi(t,e,s,n,r,i,o);if(!(n&dt)){var p=c&&Ha.call(t,"__wrapped__"),h=d&&Ha.call(e,"__wrapped__");if(p||h){var v=p?t.value():t,g=h?e.value():e;return o||(o=new Ye),i(v,g,n,r,o)}}return!!f&&(o||(o=new Ye),xi(t,e,n,r,i,o))}function ir(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Na(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var s=(u=n[i])[0],l=t[s],c=u[1];if(a&&u[2]){if(l===et&&!(s in t))return!1}else{var d=new Ye;if(r)var f=r(l,c,s,t,e,d);if(!(f===et?nr(c,l,dt|ft,r,d):f))return!1}}return!0}function or(t){return!(!ta(t)||so(t))&&(Yo(t)?Qa:Be).test(ko(t))}function ar(t){return"function"==typeof t?t:null==t?ka:"object"==typeof t?Hs(t)?fr(t[0],t[1]):dr(t):Ra(t)}function ur(t){if(!lo(t))return _u(t);var e=[];for(var n in Na(t))Ha.call(t,n)&&"constructor"!=n&&e.push(n);return e}function sr(t){if(!ta(t))return ho(t);var e=lo(t),n=[];for(var r in t)("constructor"!=r||!e&&Ha.call(t,r))&&n.push(r);return n}function lr(t,e){return t<e}function cr(t,e){var n=-1,r=$o(t)?Sa(t.length):[];return Wu(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function dr(t){var e=Gi(t);return 1==e.length&&e[0][2]?fo(e[0][0],e[0][1]):function(n){return n===t||ir(n,t,e)}}function fr(t,e){return oo(t)&&co(e)?fo(To(t),e):function(n){var r=pa(n,t);return r===et&&r===e?ha(n,t):nr(e,r,dt|ft)}}function pr(t,e,n,r,i){t!==e&&Hu(e,function(o,a){if(ta(o))i||(i=new Ye),hr(t,e,a,n,pr,r,i);else{var u=r?r(t[a],o,a+"",t,e,i):et;u===et&&(u=o),nn(t,a,u)}},ga)}function hr(t,e,n,r,i,o,a){var u=t[n],s=e[n],l=a.get(s);if(l)nn(t,n,l);else{var c=o?o(u,s,n+"",t,e,a):et,d=c===et;if(d){var f=Hs(s),p=!f&&Gs(s),h=!f&&!p&&Ys(s);c=s,f||p||h?Hs(u)?c=u:Xo(u)?c=ai(u):p?(d=!1,c=$r(s,!0)):h?(d=!1,c=ei(s,!0)):c=[]:ra(s)||Bs(s)?(c=u,Bs(u)?c=da(u):(!ta(u)||r&&Yo(u))&&(c=Ji(s))):d=!1}d&&(a.set(s,c),i(c,s,r,o,a),a.delete(s)),nn(t,n,c)}}function vr(t,e){var n=t.length;if(n)return e+=e<0?n:0,ro(e,n)?t[e]:et}function gr(t,e,n){var r=-1;return e=f(e.length?e:[ka],L(Hi())),V(cr(t,function(t,n,i){return{criteria:f(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return ri(t,e,n)})}function yr(t,e){return _r(t,e,function(e,n){return ha(t,n)})}function _r(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Nn(t,a);n(u,a)&&Vr(o,Gr(a,t),u)}return o}function Ar(t){return function(e){return Nn(e,t)}}function mr(t,e,n,r){var i=r?T:E,o=-1,a=e.length,u=t;for(t===e&&(e=ai(e)),n&&(u=f(t,L(n)));++o<a;)for(var s=0,l=e[o],c=n?n(l):l;(s=i(u,c,s,r))>-1;)u!==t&&iu.call(u,s,1),iu.call(t,s,1);return t}function Er(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;ro(i)?iu.call(t,i,1):xr(t,i)}}return t}function Tr(t,e){return t+pu(ku()*(e-t+1))}function kr(t,e,n,r){for(var i=-1,o=Au(fu((e-t)/(n||1)),0),a=Sa(o);o--;)a[r?o:++i]=t,t+=n;return a}function br(t,e){var n="";if(!t||e<1||e>St)return n;do{e%2&&(n+=t),(e=pu(e/2))&&(t+=t)}while(e);return n}function Pr(t,e){return is(go(t,e,ka),t+"")}function Ir(t){return Je(_a(t))}function Rr(t,e){var n=_a(t);return Eo(n,pn(e,0,n.length))}function Vr(t,e,n,r){if(!ta(t))return t;for(var i=-1,o=(e=Gr(e,t)).length,a=o-1,u=t;null!=u&&++i<o;){var s=To(e[i]),l=n;if(i!=a){var c=u[s];(l=r?r(c,s,u):et)===et&&(l=ta(c)?c:ro(e[i+1])?[]:{})}rn(u,s,l),u=u[s]}return t}function wr(t){return Eo(_a(t))}function Sr(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Sa(i);++r<i;)o[r]=t[r+e];return o}function Dr(t,e){var n;return Wu(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Lr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Nt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!oa(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Or(t,e,ka,n)}function Or(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,u=null===e,s=oa(e),l=e===et;i<o;){var c=pu((i+o)/2),d=n(t[c]),f=d!==et,p=null===d,h=d===d,v=oa(d);if(a)var g=r||h;else g=l?h&&(r||f):u?h&&f&&(r||!p):s?h&&f&&!p&&(r||!v):!p&&!v&&(r?d<=e:d<e);g?i=c+1:o=c}return mu(o,Ct)}function Cr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!Ko(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function Nr(t){return"number"==typeof t?t:oa(t)?Lt:+t}function Ur(t){if("string"==typeof t)return t;if(Hs(t))return f(t,Ur)+"";if(oa(t))return Fu?Fu.call(t):"";var e=t+"";return"0"==e&&1/t==-wt?"-0":e}function Mr(t,e,n){var r=-1,i=c,o=t.length,a=!0,u=[],s=u;if(n)a=!1,i=d;else if(o>=nt){var l=e?null:Qu(t);if(l)return G(l);a=!1,i=C,s=new Qe}else s=e?[]:u;t:for(;++r<o;){var f=t[r],p=e?e(f):f;if(f=n||0!==f?f:0,a&&p===p){for(var h=s.length;h--;)if(s[h]===p)continue t;e&&s.push(p),u.push(f)}else i(s,p,n)||(s!==u&&s.push(p),u.push(f))}return u}function xr(t,e){return e=Gr(e,t),null==(t=yo(t,e))||delete t[To(So(e))]}function jr(t,e,n,r){return Vr(t,e,n(Nn(t,e)),r)}function Fr(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Sr(t,r?0:o,r?o+1:i):Sr(t,r?o+1:0,r?i:o)}function zr(t,e){var n=t;return n instanceof Z&&(n=n.value()),h(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function Wr(t,e,n){var r=t.length;if(r<2)return r?Mr(t[0]):[];for(var i=-1,o=Sa(r);++i<r;)for(var a=t[i],u=-1;++u<r;)u!=i&&(o[i]=Tn(o[i]||a,t[u],e,n));return Mr(wn(o,1),e,n)}function Br(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var u=r<o?e[r]:et;n(a,t[r],u)}return a}function Hr(t){return Xo(t)?t:[]}function qr(t){return"function"==typeof t?t:ka}function Gr(t,e){return Hs(t)?t:oo(t,e)?[t]:os(fa(t))}function Kr(t,e,n){var r=t.length;return n=n===et?r:n,!e&&n>=r?t:Sr(t,e,n)}function $r(t,e){if(e)return t.slice();var n=t.length,r=tu?tu(n):new t.constructor(n);return t.copy(r),r}function Xr(t){var e=new t.constructor(t.byteLength);return new Ja(e).set(new Ja(t)),e}function Qr(t,e){var n=e?Xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Yr(t,e,r){return h(e?r(B(t),st):B(t),n,new t.constructor)}function Zr(t){var e=new t.constructor(t.source,Fe.exec(t));return e.lastIndex=t.lastIndex,e}function Jr(t,e,n){return h(e?n(G(t),st):G(t),r,new t.constructor)}function ti(t){return ju?Na(ju.call(t)):{}}function ei(t,e){var n=e?Xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ni(t,e){if(t!==e){var n=t!==et,r=null===t,i=t===t,o=oa(t),a=e!==et,u=null===e,s=e===e,l=oa(e);if(!u&&!l&&!o&&t>e||o&&a&&s&&!u&&!l||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||u&&n&&i||!a&&i||!s)return-1}return 0}function ri(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=ni(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return t.index-e.index}function ii(t,e,n,r){for(var i=-1,o=t.length,a=n.length,u=-1,s=e.length,l=Au(o-a,0),c=Sa(s+l),d=!r;++u<s;)c[u]=e[u];for(;++i<a;)(d||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[u++]=t[i++];return c}function oi(t,e,n,r){for(var i=-1,o=t.length,a=-1,u=n.length,s=-1,l=e.length,c=Au(o-u,0),d=Sa(c+l),f=!r;++i<c;)d[i]=t[i];for(var p=i;++s<l;)d[p+s]=e[s];for(;++a<u;)(f||i<o)&&(d[p+n[a]]=t[i++]);return d}function ai(t,e){var n=-1,r=t.length;for(e||(e=Sa(r));++n<r;)e[n]=t[n];return e}function ui(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var u=e[o],s=r?r(n[u],t[u],u,n,t):et;s===et&&(s=t[u]),i?ln(n,u,s):rn(n,u,s)}return n}function si(t,e){return ui(t,Zu(t),e)}function li(t,e){return ui(t,Ju(t),e)}function ci(t,e){return function(n,r){var i=Hs(n)?o:an,a=e?e():{};return i(n,t,Hi(r,2),a)}}function di(t){return Pr(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:et,a=i>2?n[2]:et;for(o=t.length>3&&"function"==typeof o?(i--,o):et,a&&io(n[0],n[1],a)&&(o=i<3?et:o,i=1),e=Na(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e})}function fi(t,e){return function(n,r){if(null==n)return n;if(!$o(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Na(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function pi(t){return function(e,n,r){for(var i=-1,o=Na(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}function hi(t,e,n){function r(){return(this&&this!==Sn&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&pt,o=yi(t);return r}function vi(t){return function(e){var n=F(e=fa(e))?Y(e):et,r=n?n[0]:e.charAt(0),i=n?Kr(n,1).join(""):e.slice(1);return r[t]()+i}}function gi(t){return function(e){return h(Ea(ma(e).replace(dn,"")),t,"")}}function yi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=zu(t.prototype),r=t.apply(n,e);return ta(r)?r:n}}function _i(t,e,n){function r(){for(var a=arguments.length,u=Sa(a),s=a,l=Bi(r);s--;)u[s]=arguments[s];var c=a<3&&u[0]!==l&&u[a-1]!==l?[]:q(u,l);return(a-=c.length)<n?wi(t,e,Ei,r.placeholder,et,u,c,et,et,n-a):i(this&&this!==Sn&&this instanceof r?o:t,this,u)}var o=yi(t);return r}function Ai(t){return function(e,n,r){var i=Na(e);if(!$o(e)){var o=Hi(n,3);e=va(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:et}}function mi(t){return ji(function(e){var n=e.length,r=n,i=$.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new xa(it);if(i&&!a&&"wrapper"==Wi(o))var a=new $([],!0)}for(r=a?r:n;++r<n;){var u=Wi(o=e[r]),s="wrapper"==u?Yu(o):et;a=s&&uo(s[0])&&s[1]==(mt|gt|_t|Et)&&!s[4].length&&1==s[9]?a[Wi(s[0])].apply(a,s[3]):1==o.length&&uo(o)?a[u]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Hs(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Ei(t,e,n,r,i,o,a,u,s,l){function c(){for(var y=arguments.length,_=Sa(y),A=y;A--;)_[A]=arguments[A];if(h)var m=Bi(c),E=M(_,m);if(r&&(_=ii(_,r,i,h)),o&&(_=oi(_,o,a,h)),y-=E,h&&y<l){var T=q(_,m);return wi(t,e,Ei,c.placeholder,n,_,T,u,s,l-y)}var k=f?n:this,b=p?k[t]:t;return y=_.length,u?_=_o(_,u):v&&y>1&&_.reverse(),d&&s<y&&(_.length=s),this&&this!==Sn&&this instanceof c&&(b=g||yi(b)),b.apply(k,_)}var d=e&mt,f=e&pt,p=e&ht,h=e&(gt|yt),v=e&Tt,g=p?et:yi(t);return c}function Ti(t,e){return function(n,r){return Jn(n,t,e(r),{})}}function ki(t,e){return function(n,r){var i;if(n===et&&r===et)return e;if(n!==et&&(i=n),r!==et){if(i===et)return r;"string"==typeof n||"string"==typeof r?(n=Ur(n),r=Ur(r)):(n=Nr(n),r=Nr(r)),i=t(n,r)}return i}}function bi(t){return ji(function(e){return e=f(e,L(Hi())),Pr(function(n){var r=this;return t(e,function(t){return i(t,r,n)})})})}function Pi(t,e){var n=(e=e===et?" ":Ur(e)).length;if(n<2)return n?br(e,t):e;var r=br(e,fu(t/Q(e)));return F(e)?Kr(Y(r),0,t).join(""):r.slice(0,t)}function Ii(t,e,n,r){function o(){for(var e=-1,s=arguments.length,l=-1,c=r.length,d=Sa(c+s),f=this&&this!==Sn&&this instanceof o?u:t;++l<c;)d[l]=r[l];for(;s--;)d[l++]=arguments[++e];return i(f,a?n:this,d)}var a=e&pt,u=yi(t);return o}function Ri(t){return function(e,n,r){return r&&"number"!=typeof r&&io(e,n,r)&&(n=r=et),e=ua(e),n===et?(n=e,e=0):n=ua(n),r=r===et?e<n?1:-1:ua(r),kr(e,n,r,t)}}function Vi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ca(e),n=ca(n)),t(e,n)}}function wi(t,e,n,r,i,o,a,u,s,l){var c=e&gt,d=c?a:et,f=c?et:a,p=c?o:et,h=c?et:o;e|=c?_t:At,(e&=~(c?At:_t))&vt||(e&=~(pt|ht));var v=[t,e,i,p,d,h,f,u,s,l],g=n.apply(et,v);return uo(t)&&ns(g,v),g.placeholder=r,Ao(g,t,e)}function Si(t){var e=Ca[t];return function(t,n){if(t=ca(t),n=null==n?0:mu(sa(n),292)){var r=(fa(t)+"e").split("e");return+((r=(fa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}function Di(t){return function(e){var n=ts(e);return n==Gt?B(e):n==Zt?K(e):D(e,t(e))}}function Li(t,e,n,r,i,o,a,u){var s=e&ht;if(!s&&"function"!=typeof t)throw new xa(it);var l=r?r.length:0;if(l||(e&=~(_t|At),r=i=et),a=a===et?a:Au(sa(a),0),u=u===et?u:sa(u),l-=i?i.length:0,e&At){var c=r,d=i;r=i=et}var f=s?et:Yu(t),p=[t,e,n,r,i,c,d,o,a,u];if(f&&po(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],!(u=p[9]=p[9]===et?s?0:t.length:Au(p[9]-l,0))&&e&(gt|yt)&&(e&=~(gt|yt)),e&&e!=pt)h=e==gt||e==yt?_i(t,e,u):e!=_t&&e!=(pt|_t)||i.length?Ei.apply(et,p):Ii(t,e,n,r);else var h=hi(t,e,n);return Ao((f?Gu:ns)(h,p),t,e)}function Oi(t,e,n,r){return t===et||Ko(t,za[n])&&!Ha.call(r,n)?e:t}function Ci(t,e,n,r,i,o){return ta(t)&&ta(e)&&(o.set(e,t),pr(t,e,et,Ci,o),o.delete(e)),t}function Ni(t){return ra(t)?et:t}function Ui(t,e,n,r,i,o){var a=n&dt,u=t.length,s=e.length;if(u!=s&&!(a&&s>u))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,d=!0,f=n&ft?new Qe:et;for(o.set(t,e),o.set(e,t);++c<u;){var p=t[c],h=e[c];if(r)var v=a?r(h,p,c,e,t,o):r(p,h,c,t,e,o);if(v!==et){if(v)continue;d=!1;break}if(f){if(!g(e,function(t,e){if(!C(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)})){d=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Mi(t,e,n,r,i,o,a){switch(n){case oe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ie:return!(t.byteLength!=e.byteLength||!o(new Ja(t),new Ja(e)));case Ft:case zt:case Kt:return Ko(+t,+e);case Bt:return t.name==e.name&&t.message==e.message;case Yt:case Jt:return t==e+"";case Gt:var u=B;case Zt:var s=r&dt;if(u||(u=G),t.size!=e.size&&!s)return!1;var l=a.get(t);if(l)return l==e;r|=ft,a.set(t,e);var c=Ui(u(t),u(e),r,i,o,a);return a.delete(t),c;case te:if(ju)return ju.call(t)==ju.call(e)}return!1}function xi(t,e,n,r,i,o){var a=n&dt,u=Fi(t),s=u.length;if(s!=Fi(e).length&&!a)return!1;for(var l=s;l--;){var c=u[l];if(!(a?c in e:Ha.call(e,c)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++l<s;){var h=t[c=u[l]],v=e[c];if(r)var g=a?r(v,h,c,e,t,o):r(h,v,c,t,e,o);if(!(g===et?h===v||i(h,v,n,r,o):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(f=!1)}return o.delete(t),o.delete(e),f}function ji(t){return is(go(t,et,Vo),t+"")}function Fi(t){return Wn(t,va,Zu)}function zi(t){return Wn(t,ga,Ju)}function Wi(t){for(var e=t.name+"",n=Lu[e],r=Ha.call(Lu,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Bi(t){return(Ha.call(y,"placeholder")?y:t).placeholder}function Hi(){var t=y.iteratee||ba;return t=t===ba?ar:t,arguments.length?t(arguments[0],arguments[1]):t}function qi(t,e){var n=t.__data__;return ao(e)?n["string"==typeof e?"string":"hash"]:n.map}function Gi(t){for(var e=va(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,co(i)]}return e}function Ki(t,e){var n=j(t,e);return or(n)?n:et}function $i(t){var e=Ha.call(t,uu),n=t[uu];try{t[uu]=et;var r=!0}catch(t){}var i=Ka.call(t);return r&&(e?t[uu]=n:delete t[uu]),i}function Xi(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=mu(e,t+a);break;case"takeRight":t=Au(t,e-a)}}return{start:t,end:e}}function Qi(t){var e=t.match(Ne);return e?e[1].split(Ue):[]}function Yi(t,e,n){for(var r=-1,i=(e=Gr(e,t)).length,o=!1;++r<i;){var a=To(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Jo(i)&&ro(a,i)&&(Hs(t)||Bs(t))}function Zi(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Ha.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Ji(t){return"function"!=typeof t.constructor||lo(t)?{}:zu(eu(t))}function to(t,e,n,r){var i=t.constructor;switch(e){case ie:return Xr(t);case Ft:case zt:return new i(+t);case oe:return Qr(t,r);case ae:case ue:case se:case le:case ce:case de:case fe:case pe:case he:return ei(t,r);case Gt:return Yr(t,r,n);case Kt:case Jt:return new i(t);case Yt:return Zr(t);case Zt:return Jr(t,r,n);case te:return ti(t)}}function eo(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ce,"{\n/* [wrapped with "+e+"] */\n")}function no(t){return Hs(t)||Bs(t)||!!(ou&&t&&t[ou])}function ro(t,e){return!!(e=null==e?St:e)&&("number"==typeof t||qe.test(t))&&t>-1&&t%1==0&&t<e}function io(t,e,n){if(!ta(n))return!1;var r=typeof e;return!!("number"==r?$o(n)&&ro(e,n.length):"string"==r&&e in n)&&Ko(n[e],t)}function oo(t,e){if(Hs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!oa(t))||Ie.test(t)||!Pe.test(t)||null!=e&&t in Na(e)}function ao(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function uo(t){var e=Wi(t),n=y[e];if("function"!=typeof n||!(e in Z.prototype))return!1;if(t===n)return!0;var r=Yu(n);return!!r&&t===r[0]}function so(t){return!!Ga&&Ga in t}function lo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||za)}function co(t){return t===t&&!ta(t)}function fo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==et||t in Na(n))}}function po(t,e){var n=t[1],r=e[1],i=n|r,o=i<(pt|ht|mt),a=r==mt&&n==gt||r==mt&&n==Et&&t[7].length<=e[8]||r==(mt|Et)&&e[7].length<=e[8]&&n==gt;if(!o&&!a)return t;r&pt&&(t[2]=e[2],i|=n&pt?0:vt);var u=e[3];if(u){var s=t[3];t[3]=s?ii(s,u,e[4]):u,t[4]=s?q(t[3],ut):e[4]}return(u=e[5])&&(s=t[5],t[5]=s?oi(s,u,e[6]):u,t[6]=s?q(t[5],ut):e[6]),(u=e[7])&&(t[7]=u),r&mt&&(t[8]=null==t[8]?e[8]:mu(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function ho(t){var e=[];if(null!=t)for(var n in Na(t))e.push(n);return e}function vo(t){return Ka.call(t)}function go(t,e,n){return e=Au(e===et?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=Au(r.length-e,0),u=Sa(a);++o<a;)u[o]=r[e+o];o=-1;for(var s=Sa(e+1);++o<e;)s[o]=r[o];return s[e]=n(u),i(t,this,s)}}function yo(t,e){return e.length<2?t:Nn(t,Sr(e,0,-1))}function _o(t,e){for(var n=t.length,r=mu(e.length,n),i=ai(t);r--;){var o=e[r];t[r]=ro(o,n)?i[o]:et}return t}function Ao(t,e,n){var r=e+"";return is(t,eo(r,bo(Qi(r),n)))}function mo(t){var e=0,n=0;return function(){var r=Eu(),i=It-(r-n);if(n=r,i>0){if(++e>=Pt)return arguments[0]}else e=0;return t.apply(et,arguments)}}function Eo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===et?r:e;++n<e;){var o=Tr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function To(t){if("string"==typeof t||oa(t))return t;var e=t+"";return"0"==e&&1/t==-wt?"-0":e}function ko(t){if(null!=t){try{return Ba.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function bo(t,e){return a(Ut,function(n){var r="_."+n[0];e&n[1]&&!c(t,r)&&t.push(r)}),t.sort()}function Po(t){if(t instanceof Z)return t.clone();var e=new $(t.__wrapped__,t.__chain__);return e.__actions__=ai(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Io(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:sa(n);return i<0&&(i=Au(r+i,0)),m(t,Hi(e,3),i)}function Ro(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==et&&(i=sa(n),i=n<0?Au(r+i,0):mu(i,r-1)),m(t,Hi(e,3),i,!0)}function Vo(t){return(null==t?0:t.length)?wn(t,1):[]}function wo(t){return t&&t.length?t[0]:et}function So(t){var e=null==t?0:t.length;return e?t[e-1]:et}function Do(t,e){return t&&t.length&&e&&e.length?mr(t,e):t}function Lo(t){return null==t?t:bu.call(t)}function Oo(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Xo(t))return e=Au(t.length,e),!0}),S(e,function(e){return f(t,P(e))})}function Co(t,e){if(!t||!t.length)return[];var n=Oo(t);return null==e?n:f(n,function(t){return i(e,et,t)})}function No(t){var e=y(t);return e.__chain__=!0,e}function Uo(t,e){return e(t)}function Mo(t,e){return(Hs(t)?a:Wu)(t,Hi(e,3))}function xo(t,e){return(Hs(t)?u:Bu)(t,Hi(e,3))}function jo(t,e){return(Hs(t)?f:cr)(t,Hi(e,3))}function Fo(t,e,n){return e=n?et:e,e=t&&null==e?t.length:e,Li(t,mt,et,et,et,et,e)}function zo(t,e){var n;if("function"!=typeof e)throw new xa(it);return t=sa(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=et),n}}function Wo(t,e,n){var r=Li(t,gt,et,et,et,et,et,e=n?et:e);return r.placeholder=Wo.placeholder,r}function Bo(t,e,n){var r=Li(t,yt,et,et,et,et,et,e=n?et:e);return r.placeholder=Bo.placeholder,r}function Ho(t,e,n){function r(e){var n=c,r=d;return c=d=et,g=e,p=t.apply(r,n)}function i(t){return g=t,h=rs(u,e),y?r(t):p}function o(t){var n=t-g,r=e-(t-v);return _?mu(r,f-n):r}function a(t){var n=t-v,r=t-g;return v===et||n>=e||n<0||_&&r>=f}function u(){var t=Ls();if(a(t))return s(t);h=rs(u,o(t))}function s(t){return h=et,A&&c?r(t):(c=d=et,p)}function l(){var t=Ls(),n=a(t);if(c=arguments,d=this,v=t,n){if(h===et)return i(v);if(_)return h=rs(u,e),r(v)}return h===et&&(h=rs(u,e)),p}var c,d,f,p,h,v,g=0,y=!1,_=!1,A=!0;if("function"!=typeof t)throw new xa(it);return e=ca(e)||0,ta(n)&&(y=!!n.leading,f=(_="maxWait"in n)?Au(ca(n.maxWait)||0,e):f,A="trailing"in n?!!n.trailing:A),l.cancel=function(){h!==et&&Xu(h),g=0,c=v=d=h=et},l.flush=function(){return h===et?p:s(Ls())},l}function qo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new xa(it);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(qo.Cache||Xe),n}function Go(t){if("function"!=typeof t)throw new xa(it);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ko(t,e){return t===e||t!==t&&e!==e}function $o(t){return null!=t&&Jo(t.length)&&!Yo(t)}function Xo(t){return ea(t)&&$o(t)}function Qo(t){if(!ea(t))return!1;var e=Kn(t);return e==Bt||e==Wt||"string"==typeof t.message&&"string"==typeof t.name&&!ra(t)}function Yo(t){if(!ta(t))return!1;var e=Kn(t);return e==Ht||e==qt||e==jt||e==Qt}function Zo(t){return"number"==typeof t&&t==sa(t)}function Jo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=St}function ta(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ea(t){return null!=t&&"object"==typeof t}function na(t){return"number"==typeof t||ea(t)&&Kn(t)==Kt}function ra(t){if(!ea(t)||Kn(t)!=Xt)return!1;var e=eu(t);if(null===e)return!0;var n=Ha.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ba.call(n)==$a}function ia(t){return"string"==typeof t||!Hs(t)&&ea(t)&&Kn(t)==Jt}function oa(t){return"symbol"==typeof t||ea(t)&&Kn(t)==te}function aa(t){if(!t)return[];if($o(t))return ia(t)?Y(t):ai(t);if(au&&t[au])return W(t[au]());var e=ts(t);return(e==Gt?B:e==Zt?G:_a)(t)}function ua(t){return t?(t=ca(t))===wt||t===-wt?(t<0?-1:1)*Dt:t===t?t:0:0===t?t:0}function sa(t){var e=ua(t),n=e%1;return e===e?n?e-n:e:0}function la(t){return t?pn(sa(t),0,Ot):0}function ca(t){if("number"==typeof t)return t;if(oa(t))return Lt;if(ta(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ta(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(De,"");var n=We.test(t);return n||He.test(t)?Rn(t.slice(2),n?2:8):ze.test(t)?Lt:+t}function da(t){return ui(t,ga(t))}function fa(t){return null==t?"":Ur(t)}function pa(t,e,n){var r=null==t?et:Nn(t,e);return r===et?n:r}function ha(t,e){return null!=t&&Yi(t,e,Qn)}function va(t){return $o(t)?Ze(t):ur(t)}function ga(t){return $o(t)?Ze(t,!0):sr(t)}function ya(t,e){if(null==t)return{};var n=f(zi(t),function(t){return[t]});return e=Hi(e),_r(t,n,function(t,n){return e(t,n[0])})}function _a(t){return null==t?[]:O(t,va(t))}function Aa(t){return kl(fa(t).toLowerCase())}function ma(t){return(t=fa(t))&&t.replace(Ge,Bn).replace(fn,"")}function Ea(t,e,n){return t=fa(t),(e=n?et:e)===et?z(t)?tt(t):_(t):t.match(e)||[]}function Ta(t){return function(){return t}}function ka(t){return t}function ba(t){return ar("function"==typeof t?t:hn(t,st))}function Pa(t,e,n){var r=va(e),i=Cn(e,r);null!=n||ta(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Cn(e,va(e)));var o=!(ta(n)&&"chain"in n&&!n.chain),u=Yo(t);return a(i,function(n){var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=ai(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,p([this.value()],arguments))})}),t}function Ia(){}function Ra(t){return oo(t)?P(To(t)):Ar(t)}function Va(){return[]}function wa(){return!1}var Sa=(e=null==e?Sn:Gn.defaults(Sn.Object(),e,Gn.pick(Sn,_n))).Array,Da=e.Date,La=e.Error,Oa=e.Function,Ca=e.Math,Na=e.Object,Ua=e.RegExp,Ma=e.String,xa=e.TypeError,ja=Sa.prototype,Fa=Oa.prototype,za=Na.prototype,Wa=e["__core-js_shared__"],Ba=Fa.toString,Ha=za.hasOwnProperty,qa=0,Ga=function(){var t=/[^.]+$/.exec(Wa&&Wa.keys&&Wa.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ka=za.toString,$a=Ba.call(Na),Xa=Sn._,Qa=Ua("^"+Ba.call(Ha).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ya=On?e.Buffer:et,Za=e.Symbol,Ja=e.Uint8Array,tu=Ya?Ya.allocUnsafe:et,eu=H(Na.getPrototypeOf,Na),nu=Na.create,ru=za.propertyIsEnumerable,iu=ja.splice,ou=Za?Za.isConcatSpreadable:et,au=Za?Za.iterator:et,uu=Za?Za.toStringTag:et,su=function(){try{var t=Ki(Na,"defineProperty");return t({},"",{}),t}catch(t){}}(),lu=e.clearTimeout!==Sn.clearTimeout&&e.clearTimeout,cu=Da&&Da.now!==Sn.Date.now&&Da.now,du=e.setTimeout!==Sn.setTimeout&&e.setTimeout,fu=Ca.ceil,pu=Ca.floor,hu=Na.getOwnPropertySymbols,vu=Ya?Ya.isBuffer:et,gu=e.isFinite,yu=ja.join,_u=H(Na.keys,Na),Au=Ca.max,mu=Ca.min,Eu=Da.now,Tu=e.parseInt,ku=Ca.random,bu=ja.reverse,Pu=Ki(e,"DataView"),Iu=Ki(e,"Map"),Ru=Ki(e,"Promise"),Vu=Ki(e,"Set"),wu=Ki(e,"WeakMap"),Su=Ki(Na,"create"),Du=wu&&new wu,Lu={},Ou=ko(Pu),Cu=ko(Iu),Nu=ko(Ru),Uu=ko(Vu),Mu=ko(wu),xu=Za?Za.prototype:et,ju=xu?xu.valueOf:et,Fu=xu?xu.toString:et,zu=function(){function t(){}return function(e){if(!ta(e))return{};if(nu)return nu(e);t.prototype=e;var n=new t;return t.prototype=et,n}}();y.templateSettings={escape:Te,evaluate:ke,interpolate:be,variable:"",imports:{_:y}},y.prototype=I.prototype,y.prototype.constructor=y,$.prototype=zu(I.prototype),$.prototype.constructor=$,Z.prototype=zu(I.prototype),Z.prototype.constructor=Z,J.prototype.clear=function(){this.__data__=Su?Su(null):{},this.size=0},J.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},J.prototype.get=function(t){var e=this.__data__;if(Su){var n=e[t];return n===ot?et:n}return Ha.call(e,t)?e[t]:et},J.prototype.has=function(t){var e=this.__data__;return Su?e[t]!==et:Ha.call(e,t)},J.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Su&&e===et?ot:e,this},Me.prototype.clear=function(){this.__data__=[],this.size=0},Me.prototype.delete=function(t){var e=this.__data__,n=on(e,t);return!(n<0||(n==e.length-1?e.pop():iu.call(e,n,1),--this.size,0))},Me.prototype.get=function(t){var e=this.__data__,n=on(e,t);return n<0?et:e[n][1]},Me.prototype.has=function(t){return on(this.__data__,t)>-1},Me.prototype.set=function(t,e){var n=this.__data__,r=on(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Xe.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(Iu||Me),string:new J}},Xe.prototype.delete=function(t){var e=qi(this,t).delete(t);return this.size-=e?1:0,e},Xe.prototype.get=function(t){return qi(this,t).get(t)},Xe.prototype.has=function(t){return qi(this,t).has(t)},Xe.prototype.set=function(t,e){var n=qi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Qe.prototype.add=Qe.prototype.push=function(t){return this.__data__.set(t,ot),this},Qe.prototype.has=function(t){return this.__data__.has(t)},Ye.prototype.clear=function(){this.__data__=new Me,this.size=0},Ye.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ye.prototype.get=function(t){return this.__data__.get(t)},Ye.prototype.has=function(t){return this.__data__.has(t)},Ye.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Me){var r=n.__data__;if(!Iu||r.length<nt-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xe(r)}return n.set(t,e),this.size=n.size,this};var Wu=fi(Dn),Bu=fi(Ln,!0),Hu=pi(),qu=pi(!0),Gu=Du?function(t,e){return Du.set(t,e),t}:ka,Ku=su?function(t,e){return su(t,"toString",{configurable:!0,enumerable:!1,value:Ta(e),writable:!0})}:ka,$u=Pr,Xu=lu||function(t){return Sn.clearTimeout(t)},Qu=Vu&&1/G(new Vu([,-0]))[1]==wt?function(t){return new Vu(t)}:Ia,Yu=Du?function(t){return Du.get(t)}:Ia,Zu=hu?function(t){return null==t?[]:(t=Na(t),l(hu(t),function(e){return ru.call(t,e)}))}:Va,Ju=hu?function(t){for(var e=[];t;)p(e,Zu(t)),t=eu(t);return e}:Va,ts=Kn;(Pu&&ts(new Pu(new ArrayBuffer(1)))!=oe||Iu&&ts(new Iu)!=Gt||Ru&&"[object Promise]"!=ts(Ru.resolve())||Vu&&ts(new Vu)!=Zt||wu&&ts(new wu)!=ne)&&(ts=function(t){var e=Kn(t),n=e==Xt?t.constructor:et,r=n?ko(n):"";if(r)switch(r){case Ou:return oe;case Cu:return Gt;case Nu:return"[object Promise]";case Uu:return Zt;case Mu:return ne}return e});var es=Wa?Yo:wa,ns=mo(Gu),rs=du||function(t,e){return Sn.setTimeout(t,e)},is=mo(Ku),os=function(t){var e=qo(t,function(t){return n.size===at&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return Re.test(t)&&e.push(""),t.replace(Ve,function(t,n,r,i){e.push(r?i.replace(xe,"$1"):n||t)}),e}),as=Pr(function(t,e){return Xo(t)?Tn(t,wn(e,1,Xo,!0)):[]}),us=Pr(function(t,e){var n=So(e);return Xo(n)&&(n=et),Xo(t)?Tn(t,wn(e,1,Xo,!0),Hi(n,2)):[]}),ss=Pr(function(t,e){var n=So(e);return Xo(n)&&(n=et),Xo(t)?Tn(t,wn(e,1,Xo,!0),et,n):[]}),ls=Pr(function(t){var e=f(t,Hr);return e.length&&e[0]===t[0]?Zn(e):[]}),cs=Pr(function(t){var e=So(t),n=f(t,Hr);return e===So(n)?e=et:n.pop(),n.length&&n[0]===t[0]?Zn(n,Hi(e,2)):[]}),ds=Pr(function(t){var e=So(t),n=f(t,Hr);return(e="function"==typeof e?e:et)&&n.pop(),n.length&&n[0]===t[0]?Zn(n,et,e):[]}),fs=Pr(Do),ps=ji(function(t,e){var n=null==t?0:t.length,r=cn(t,e);return Er(t,f(e,function(t){return ro(t,n)?+t:t}).sort(ni)),r}),hs=Pr(function(t){return Mr(wn(t,1,Xo,!0))}),vs=Pr(function(t){var e=So(t);return Xo(e)&&(e=et),Mr(wn(t,1,Xo,!0),Hi(e,2))}),gs=Pr(function(t){var e=So(t);return e="function"==typeof e?e:et,Mr(wn(t,1,Xo,!0),et,e)}),ys=Pr(function(t,e){return Xo(t)?Tn(t,e):[]}),_s=Pr(function(t){return Wr(l(t,Xo))}),As=Pr(function(t){var e=So(t);return Xo(e)&&(e=et),Wr(l(t,Xo),Hi(e,2))}),ms=Pr(function(t){var e=So(t);return e="function"==typeof e?e:et,Wr(l(t,Xo),et,e)}),Es=Pr(Oo),Ts=Pr(function(t){var e=t.length,n=e>1?t[e-1]:et;return n="function"==typeof n?(t.pop(),n):et,Co(t,n)}),ks=ji(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return cn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Z&&ro(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Uo,args:[i],thisArg:et}),new $(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(et),t})):this.thru(i)}),bs=ci(function(t,e,n){Ha.call(t,n)?++t[n]:ln(t,n,1)}),Ps=Ai(Io),Is=Ai(Ro),Rs=ci(function(t,e,n){Ha.call(t,n)?t[n].push(e):ln(t,n,[e])}),Vs=Pr(function(t,e,n){var r=-1,o="function"==typeof e,a=$o(t)?Sa(t.length):[];return Wu(t,function(t){a[++r]=o?i(e,t,n):tr(t,e,n)}),a}),ws=ci(function(t,e,n){ln(t,n,e)}),Ss=ci(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Ds=Pr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&io(t,e[0],e[1])?e=[]:n>2&&io(e[0],e[1],e[2])&&(e=[e[0]]),gr(t,wn(e,1),[])}),Ls=cu||function(){return Sn.Date.now()},Os=Pr(function(t,e,n){var r=pt;if(n.length){var i=q(n,Bi(Os));r|=_t}return Li(t,r,e,n,i)}),Cs=Pr(function(t,e,n){var r=pt|ht;if(n.length){var i=q(n,Bi(Cs));r|=_t}return Li(e,r,t,n,i)}),Ns=Pr(function(t,e){return yn(t,1,e)}),Us=Pr(function(t,e,n){return yn(t,ca(e)||0,n)});qo.Cache=Xe;var Ms=$u(function(t,e){var n=(e=1==e.length&&Hs(e[0])?f(e[0],L(Hi())):f(wn(e,1),L(Hi()))).length;return Pr(function(r){for(var o=-1,a=mu(r.length,n);++o<a;)r[o]=e[o].call(this,r[o]);return i(t,this,r)})}),xs=Pr(function(t,e){var n=q(e,Bi(xs));return Li(t,_t,et,e,n)}),js=Pr(function(t,e){var n=q(e,Bi(js));return Li(t,At,et,e,n)}),Fs=ji(function(t,e){return Li(t,Et,et,et,et,e)}),zs=Vi($n),Ws=Vi(function(t,e){return t>=e}),Bs=er(function(){return arguments}())?er:function(t){return ea(t)&&Ha.call(t,"callee")&&!ru.call(t,"callee")},Hs=Sa.isArray,qs=Un?L(Un):function(t){return ea(t)&&Kn(t)==ie},Gs=vu||wa,Ks=Mn?L(Mn):function(t){return ea(t)&&Kn(t)==zt},$s=xn?L(xn):function(t){return ea(t)&&ts(t)==Gt},Xs=jn?L(jn):function(t){return ea(t)&&Kn(t)==Yt},Qs=Fn?L(Fn):function(t){return ea(t)&&ts(t)==Zt},Ys=zn?L(zn):function(t){return ea(t)&&Jo(t.length)&&!!mn[Kn(t)]},Zs=Vi(lr),Js=Vi(function(t,e){return t<=e}),tl=di(function(t,e){if(lo(e)||$o(e))ui(e,va(e),t);else for(var n in e)Ha.call(e,n)&&rn(t,n,e[n])}),el=di(function(t,e){ui(e,ga(e),t)}),nl=di(function(t,e,n,r){ui(e,ga(e),t,r)}),rl=di(function(t,e,n,r){ui(e,va(e),t,r)}),il=ji(cn),ol=Pr(function(t){return t.push(et,Oi),i(nl,et,t)}),al=Pr(function(t){return t.push(et,Ci),i(dl,et,t)}),ul=Ti(function(t,e,n){t[e]=n},Ta(ka)),sl=Ti(function(t,e,n){Ha.call(t,e)?t[e].push(n):t[e]=[n]},Hi),ll=Pr(tr),cl=di(function(t,e,n){pr(t,e,n)}),dl=di(function(t,e,n,r){pr(t,e,n,r)}),fl=ji(function(t,e){var n={};if(null==t)return n;var r=!1;e=f(e,function(e){return e=Gr(e,t),r||(r=e.length>1),e}),ui(t,zi(t),n),r&&(n=hn(n,st|lt|ct,Ni));for(var i=e.length;i--;)xr(n,e[i]);return n}),pl=ji(function(t,e){return null==t?{}:yr(t,e)}),hl=Di(va),vl=Di(ga),gl=gi(function(t,e,n){return e=e.toLowerCase(),t+(n?Aa(e):e)}),yl=gi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),_l=gi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Al=vi("toLowerCase"),ml=gi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),El=gi(function(t,e,n){return t+(n?" ":"")+kl(e)}),Tl=gi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),kl=vi("toUpperCase"),bl=Pr(function(t,e){try{return i(t,et,e)}catch(t){return Qo(t)?t:new La(t)}}),Pl=ji(function(t,e){return a(e,function(e){e=To(e),ln(t,e,Os(t[e],t))}),t}),Il=mi(),Rl=mi(!0),Vl=Pr(function(t,e){return function(n){return tr(n,t,e)}}),wl=Pr(function(t,e){return function(n){return tr(t,n,e)}}),Sl=bi(f),Dl=bi(s),Ll=bi(g),Ol=Ri(),Cl=Ri(!0),Nl=ki(function(t,e){return t+e},0),Ul=Si("ceil"),Ml=ki(function(t,e){return t/e},1),xl=Si("floor"),jl=ki(function(t,e){return t*e},1),Fl=Si("round"),zl=ki(function(t,e){return t-e},0);return y.after=function(t,e){if("function"!=typeof e)throw new xa(it);return t=sa(t),function(){if(--t<1)return e.apply(this,arguments)}},y.ary=Fo,y.assign=tl,y.assignIn=el,y.assignInWith=nl,y.assignWith=rl,y.at=il,y.before=zo,y.bind=Os,y.bindAll=Pl,y.bindKey=Cs,y.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Hs(t)?t:[t]},y.chain=No,y.chunk=function(t,e,n){e=(n?io(t,e,n):e===et)?1:Au(sa(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Sa(fu(r/e));i<r;)a[o++]=Sr(t,i,i+=e);return a},y.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},y.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Sa(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return p(Hs(n)?ai(n):[n],wn(e,1))},y.cond=function(t){var e=null==t?0:t.length,n=Hi();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new xa(it);return[n(t[0]),t[1]]}):[],Pr(function(n){for(var r=-1;++r<e;){var o=t[r];if(i(o[0],this,n))return i(o[1],this,n)}})},y.conforms=function(t){return vn(hn(t,st))},y.constant=Ta,y.countBy=bs,y.create=function(t,e){var n=zu(t);return null==e?n:un(n,e)},y.curry=Wo,y.curryRight=Bo,y.debounce=Ho,y.defaults=ol,y.defaultsDeep=al,y.defer=Ns,y.delay=Us,y.difference=as,y.differenceBy=us,y.differenceWith=ss,y.drop=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===et?1:sa(e),Sr(t,e<0?0:e,r)):[]},y.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===et?1:sa(e),e=r-e,Sr(t,0,e<0?0:e)):[]},y.dropRightWhile=function(t,e){return t&&t.length?Fr(t,Hi(e,3),!0,!0):[]},y.dropWhile=function(t,e){return t&&t.length?Fr(t,Hi(e,3),!0):[]},y.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&io(t,e,n)&&(n=0,r=i),Pn(t,e,n,r)):[]},y.filter=function(t,e){return(Hs(t)?l:Vn)(t,Hi(e,3))},y.flatMap=function(t,e){return wn(jo(t,e),1)},y.flatMapDeep=function(t,e){return wn(jo(t,e),wt)},y.flatMapDepth=function(t,e,n){return n=n===et?1:sa(n),wn(jo(t,e),n)},y.flatten=Vo,y.flattenDeep=function(t){return(null==t?0:t.length)?wn(t,wt):[]},y.flattenDepth=function(t,e){return(null==t?0:t.length)?(e=e===et?1:sa(e),wn(t,e)):[]},y.flip=function(t){return Li(t,Tt)},y.flow=Il,y.flowRight=Rl,y.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},y.functions=function(t){return null==t?[]:Cn(t,va(t))},y.functionsIn=function(t){return null==t?[]:Cn(t,ga(t))},y.groupBy=Rs,y.initial=function(t){return(null==t?0:t.length)?Sr(t,0,-1):[]},y.intersection=ls,y.intersectionBy=cs,y.intersectionWith=ds,y.invert=ul,y.invertBy=sl,y.invokeMap=Vs,y.iteratee=ba,y.keyBy=ws,y.keys=va,y.keysIn=ga,y.map=jo,y.mapKeys=function(t,e){var n={};return e=Hi(e,3),Dn(t,function(t,r,i){ln(n,e(t,r,i),t)}),n},y.mapValues=function(t,e){var n={};return e=Hi(e,3),Dn(t,function(t,r,i){ln(n,r,e(t,r,i))}),n},y.matches=function(t){return dr(hn(t,st))},y.matchesProperty=function(t,e){return fr(t,hn(e,st))},y.memoize=qo,y.merge=cl,y.mergeWith=dl,y.method=Vl,y.methodOf=wl,y.mixin=Pa,y.negate=Go,y.nthArg=function(t){return t=sa(t),Pr(function(e){return vr(e,t)})},y.omit=fl,y.omitBy=function(t,e){return ya(t,Go(Hi(e)))},y.once=function(t){return zo(2,t)},y.orderBy=function(t,e,n,r){return null==t?[]:(Hs(e)||(e=null==e?[]:[e]),n=r?et:n,Hs(n)||(n=null==n?[]:[n]),gr(t,e,n))},y.over=Sl,y.overArgs=Ms,y.overEvery=Dl,y.overSome=Ll,y.partial=xs,y.partialRight=js,y.partition=Ss,y.pick=pl,y.pickBy=ya,y.property=Ra,y.propertyOf=function(t){return function(e){return null==t?et:Nn(t,e)}},y.pull=fs,y.pullAll=Do,y.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?mr(t,e,Hi(n,2)):t},y.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?mr(t,e,et,n):t},y.pullAt=ps,y.range=Ol,y.rangeRight=Cl,y.rearg=Fs,y.reject=function(t,e){return(Hs(t)?l:Vn)(t,Go(Hi(e,3)))},y.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Hi(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Er(t,i),n},y.rest=function(t,e){if("function"!=typeof t)throw new xa(it);return e=e===et?e:sa(e),Pr(t,e)},y.reverse=Lo,y.sampleSize=function(t,e,n){return e=(n?io(t,e,n):e===et)?1:sa(e),(Hs(t)?tn:Rr)(t,e)},y.set=function(t,e,n){return null==t?t:Vr(t,e,n)},y.setWith=function(t,e,n,r){return r="function"==typeof r?r:et,null==t?t:Vr(t,e,n,r)},y.shuffle=function(t){return(Hs(t)?en:wr)(t)},y.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&io(t,e,n)?(e=0,n=r):(e=null==e?0:sa(e),n=n===et?r:sa(n)),Sr(t,e,n)):[]},y.sortBy=Ds,y.sortedUniq=function(t){return t&&t.length?Cr(t):[]},y.sortedUniqBy=function(t,e){return t&&t.length?Cr(t,Hi(e,2)):[]},y.split=function(t,e,n){return n&&"number"!=typeof n&&io(t,e,n)&&(e=n=et),(n=n===et?Ot:n>>>0)?(t=fa(t))&&("string"==typeof e||null!=e&&!Xs(e))&&!(e=Ur(e))&&F(t)?Kr(Y(t),0,n):t.split(e,n):[]},y.spread=function(t,e){if("function"!=typeof t)throw new xa(it);return e=null==e?0:Au(sa(e),0),Pr(function(n){var r=n[e],o=Kr(n,0,e);return r&&p(o,r),i(t,this,o)})},y.tail=function(t){var e=null==t?0:t.length;return e?Sr(t,1,e):[]},y.take=function(t,e,n){return t&&t.length?(e=n||e===et?1:sa(e),Sr(t,0,e<0?0:e)):[]},y.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===et?1:sa(e),e=r-e,Sr(t,e<0?0:e,r)):[]},y.takeRightWhile=function(t,e){return t&&t.length?Fr(t,Hi(e,3),!1,!0):[]},y.takeWhile=function(t,e){return t&&t.length?Fr(t,Hi(e,3)):[]},y.tap=function(t,e){return e(t),t},y.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new xa(it);return ta(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ho(t,e,{leading:r,maxWait:e,trailing:i})},y.thru=Uo,y.toArray=aa,y.toPairs=hl,y.toPairsIn=vl,y.toPath=function(t){return Hs(t)?f(t,To):oa(t)?[t]:ai(os(fa(t)))},y.toPlainObject=da,y.transform=function(t,e,n){var r=Hs(t),i=r||Gs(t)||Ys(t);if(e=Hi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ta(t)&&Yo(o)?zu(eu(t)):{}}return(i?a:Dn)(t,function(t,r,i){return e(n,t,r,i)}),n},y.unary=function(t){return Fo(t,1)},y.union=hs,y.unionBy=vs,y.unionWith=gs,y.uniq=function(t){return t&&t.length?Mr(t):[]},y.uniqBy=function(t,e){return t&&t.length?Mr(t,Hi(e,2)):[]},y.uniqWith=function(t,e){return e="function"==typeof e?e:et,t&&t.length?Mr(t,et,e):[]},y.unset=function(t,e){return null==t||xr(t,e)},y.unzip=Oo,y.unzipWith=Co,y.update=function(t,e,n){return null==t?t:jr(t,e,qr(n))},y.updateWith=function(t,e,n,r){return r="function"==typeof r?r:et,null==t?t:jr(t,e,qr(n),r)},y.values=_a,y.valuesIn=function(t){return null==t?[]:O(t,ga(t))},y.without=ys,y.words=Ea,y.wrap=function(t,e){return xs(qr(e),t)},y.xor=_s,y.xorBy=As,y.xorWith=ms,y.zip=Es,y.zipObject=function(t,e){return Br(t||[],e||[],rn)},y.zipObjectDeep=function(t,e){return Br(t||[],e||[],Vr)},y.zipWith=Ts,y.entries=hl,y.entriesIn=vl,y.extend=el,y.extendWith=nl,Pa(y,y),y.add=Nl,y.attempt=bl,y.camelCase=gl,y.capitalize=Aa,y.ceil=Ul,y.clamp=function(t,e,n){return n===et&&(n=e,e=et),n!==et&&(n=(n=ca(n))===n?n:0),e!==et&&(e=(e=ca(e))===e?e:0),pn(ca(t),e,n)},y.clone=function(t){return hn(t,ct)},y.cloneDeep=function(t){return hn(t,st|ct)},y.cloneDeepWith=function(t,e){return e="function"==typeof e?e:et,hn(t,st|ct,e)},y.cloneWith=function(t,e){return e="function"==typeof e?e:et,hn(t,ct,e)},y.conformsTo=function(t,e){return null==e||gn(t,e,va(e))},y.deburr=ma,y.defaultTo=function(t,e){return null==t||t!==t?e:t},y.divide=Ml,y.endsWith=function(t,e,n){t=fa(t),e=Ur(e);var r=t.length,i=n=n===et?r:pn(sa(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},y.eq=Ko,y.escape=function(t){return(t=fa(t))&&Ee.test(t)?t.replace(Ae,Hn):t},y.escapeRegExp=function(t){return(t=fa(t))&&Se.test(t)?t.replace(we,"\\$&"):t},y.every=function(t,e,n){var r=Hs(t)?s:kn;return n&&io(t,e,n)&&(e=et),r(t,Hi(e,3))},y.find=Ps,y.findIndex=Io,y.findKey=function(t,e){return A(t,Hi(e,3),Dn)},y.findLast=Is,y.findLastIndex=Ro,y.findLastKey=function(t,e){return A(t,Hi(e,3),Ln)},y.floor=xl,y.forEach=Mo,y.forEachRight=xo,y.forIn=function(t,e){return null==t?t:Hu(t,Hi(e,3),ga)},y.forInRight=function(t,e){return null==t?t:qu(t,Hi(e,3),ga)},y.forOwn=function(t,e){return t&&Dn(t,Hi(e,3))},y.forOwnRight=function(t,e){return t&&Ln(t,Hi(e,3))},y.get=pa,y.gt=zs,y.gte=Ws,y.has=function(t,e){return null!=t&&Yi(t,e,Xn)},y.hasIn=ha,y.head=wo,y.identity=ka,y.includes=function(t,e,n,r){t=$o(t)?t:_a(t),n=n&&!r?sa(n):0;var i=t.length;return n<0&&(n=Au(i+n,0)),ia(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&E(t,e,n)>-1},y.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:sa(n);return i<0&&(i=Au(r+i,0)),E(t,e,i)},y.inRange=function(t,e,n){return e=ua(e),n===et?(n=e,e=0):n=ua(n),t=ca(t),Yn(t,e,n)},y.invoke=ll,y.isArguments=Bs,y.isArray=Hs,y.isArrayBuffer=qs,y.isArrayLike=$o,y.isArrayLikeObject=Xo,y.isBoolean=function(t){return!0===t||!1===t||ea(t)&&Kn(t)==Ft},y.isBuffer=Gs,y.isDate=Ks,y.isElement=function(t){return ea(t)&&1===t.nodeType&&!ra(t)},y.isEmpty=function(t){if(null==t)return!0;if($o(t)&&(Hs(t)||"string"==typeof t||"function"==typeof t.splice||Gs(t)||Ys(t)||Bs(t)))return!t.length;var e=ts(t);if(e==Gt||e==Zt)return!t.size;if(lo(t))return!ur(t).length;for(var n in t)if(Ha.call(t,n))return!1;return!0},y.isEqual=function(t,e){return nr(t,e)},y.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:et)?n(t,e):et;return r===et?nr(t,e,et,n):!!r},y.isError=Qo,y.isFinite=function(t){return"number"==typeof t&&gu(t)},y.isFunction=Yo,y.isInteger=Zo,y.isLength=Jo,y.isMap=$s,y.isMatch=function(t,e){return t===e||ir(t,e,Gi(e))},y.isMatchWith=function(t,e,n){return n="function"==typeof n?n:et,ir(t,e,Gi(e),n)},y.isNaN=function(t){return na(t)&&t!=+t},y.isNative=function(t){if(es(t))throw new La(rt);return or(t)},y.isNil=function(t){return null==t},y.isNull=function(t){return null===t},y.isNumber=na,y.isObject=ta,y.isObjectLike=ea,y.isPlainObject=ra,y.isRegExp=Xs,y.isSafeInteger=function(t){return Zo(t)&&t>=-St&&t<=St},y.isSet=Qs,y.isString=ia,y.isSymbol=oa,y.isTypedArray=Ys,y.isUndefined=function(t){return t===et},y.isWeakMap=function(t){return ea(t)&&ts(t)==ne},y.isWeakSet=function(t){return ea(t)&&Kn(t)==re},y.join=function(t,e){return null==t?"":yu.call(t,e)},y.kebabCase=yl,y.last=So,y.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==et&&(i=(i=sa(n))<0?Au(r+i,0):mu(i,r-1)),e===e?X(t,e,i):m(t,k,i,!0)},y.lowerCase=_l,y.lowerFirst=Al,y.lt=Zs,y.lte=Js,y.max=function(t){return t&&t.length?bn(t,ka,$n):et},y.maxBy=function(t,e){return t&&t.length?bn(t,Hi(e,2),$n):et},y.mean=function(t){return b(t,ka)},y.meanBy=function(t,e){return b(t,Hi(e,2))},y.min=function(t){return t&&t.length?bn(t,ka,lr):et},y.minBy=function(t,e){return t&&t.length?bn(t,Hi(e,2),lr):et},y.stubArray=Va,y.stubFalse=wa,y.stubObject=function(){return{}},y.stubString=function(){return""},y.stubTrue=function(){return!0},y.multiply=jl,y.nth=function(t,e){return t&&t.length?vr(t,sa(e)):et},y.noConflict=function(){return Sn._===this&&(Sn._=Xa),this},y.noop=Ia,y.now=Ls,y.pad=function(t,e,n){t=fa(t);var r=(e=sa(e))?Q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Pi(pu(i),n)+t+Pi(fu(i),n)},y.padEnd=function(t,e,n){t=fa(t);var r=(e=sa(e))?Q(t):0;return e&&r<e?t+Pi(e-r,n):t},y.padStart=function(t,e,n){t=fa(t);var r=(e=sa(e))?Q(t):0;return e&&r<e?Pi(e-r,n)+t:t},y.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Tu(fa(t).replace(Le,""),e||0)},y.random=function(t,e,n){if(n&&"boolean"!=typeof n&&io(t,e,n)&&(e=n=et),n===et&&("boolean"==typeof e?(n=e,e=et):"boolean"==typeof t&&(n=t,t=et)),t===et&&e===et?(t=0,e=1):(t=ua(t),e===et?(e=t,t=0):e=ua(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ku();return mu(t+i*(e-t+In("1e-"+((i+"").length-1))),e)}return Tr(t,e)},y.reduce=function(t,e,n){var r=Hs(t)?h:R,i=arguments.length<3;return r(t,Hi(e,4),n,i,Wu)},y.reduceRight=function(t,e,n){var r=Hs(t)?v:R,i=arguments.length<3;return r(t,Hi(e,4),n,i,Bu)},y.repeat=function(t,e,n){return e=(n?io(t,e,n):e===et)?1:sa(e),br(fa(t),e)},y.replace=function(){var t=arguments,e=fa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},y.result=function(t,e,n){var r=-1,i=(e=Gr(e,t)).length;for(i||(i=1,t=et);++r<i;){var o=null==t?et:t[To(e[r])];o===et&&(r=i,o=n),t=Yo(o)?o.call(t):o}return t},y.round=Fl,y.runInContext=t,y.sample=function(t){return(Hs(t)?Je:Ir)(t)},y.size=function(t){if(null==t)return 0;if($o(t))return ia(t)?Q(t):t.length;var e=ts(t);return e==Gt||e==Zt?t.size:ur(t).length},y.snakeCase=ml,y.some=function(t,e,n){var r=Hs(t)?g:Dr;return n&&io(t,e,n)&&(e=et),r(t,Hi(e,3))},y.sortedIndex=function(t,e){return Lr(t,e)},y.sortedIndexBy=function(t,e,n){return Or(t,e,Hi(n,2))},y.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Lr(t,e);if(r<n&&Ko(t[r],e))return r}return-1},y.sortedLastIndex=function(t,e){return Lr(t,e,!0)},y.sortedLastIndexBy=function(t,e,n){return Or(t,e,Hi(n,2),!0)},y.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Lr(t,e,!0)-1;if(Ko(t[n],e))return n}return-1},y.startCase=El,y.startsWith=function(t,e,n){return t=fa(t),n=null==n?0:pn(sa(n),0,t.length),e=Ur(e),t.slice(n,n+e.length)==e},y.subtract=zl,y.sum=function(t){return t&&t.length?w(t,ka):0},y.sumBy=function(t,e){return t&&t.length?w(t,Hi(e,2)):0},y.template=function(t,e,n){var r=y.templateSettings;n&&io(t,e,n)&&(e=et),t=fa(t),e=nl({},e,r,Oi);var i,o,a=nl({},e.imports,r.imports,Oi),u=va(a),s=O(a,u),l=0,c=e.interpolate||Ke,d="__p += '",f=Ua((e.escape||Ke).source+"|"+c.source+"|"+(c===be?je:Ke).source+"|"+(e.evaluate||Ke).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++An+"]")+"\n";t.replace(f,function(e,n,r,a,u,s){return r||(r=a),d+=t.slice(l,s).replace($e,x),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),u&&(o=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),d+="';\n";var h=e.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(ve,""):d).replace(ge,"$1").replace(ye,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=bl(function(){return Oa(u,p+"return "+d).apply(et,s)});if(v.source=d,Qo(v))throw v;return v},y.times=function(t,e){if((t=sa(t))<1||t>St)return[];var n=Ot,r=mu(t,Ot);e=Hi(e),t-=Ot;for(var i=S(r,e);++n<t;)e(n);return i},y.toFinite=ua,y.toInteger=sa,y.toLength=la,y.toLower=function(t){return fa(t).toLowerCase()},y.toNumber=ca,y.toSafeInteger=function(t){return t?pn(sa(t),-St,St):0===t?t:0},y.toString=fa,y.toUpper=function(t){return fa(t).toUpperCase()},y.trim=function(t,e,n){if((t=fa(t))&&(n||e===et))return t.replace(De,"");if(!t||!(e=Ur(e)))return t;var r=Y(t),i=Y(e);return Kr(r,N(r,i),U(r,i)+1).join("")},y.trimEnd=function(t,e,n){if((t=fa(t))&&(n||e===et))return t.replace(Oe,"");if(!t||!(e=Ur(e)))return t;var r=Y(t);return Kr(r,0,U(r,Y(e))+1).join("")},y.trimStart=function(t,e,n){if((t=fa(t))&&(n||e===et))return t.replace(Le,"");if(!t||!(e=Ur(e)))return t;var r=Y(t);return Kr(r,N(r,Y(e))).join("")},y.truncate=function(t,e){var n=kt,r=bt;if(ta(e)){var i="separator"in e?e.separator:i;n="length"in e?sa(e.length):n,r="omission"in e?Ur(e.omission):r}var o=(t=fa(t)).length;if(F(t)){var a=Y(t);o=a.length}if(n>=o)return t;var u=n-Q(r);if(u<1)return r;var s=a?Kr(a,0,u).join(""):t.slice(0,u);if(i===et)return s+r;if(a&&(u+=s.length-u),Xs(i)){if(t.slice(u).search(i)){var l,c=s;for(i.global||(i=Ua(i.source,fa(Fe.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var d=l.index;s=s.slice(0,d===et?u:d)}}else if(t.indexOf(Ur(i),u)!=u){var f=s.lastIndexOf(i);f>-1&&(s=s.slice(0,f))}return s+r},y.unescape=function(t){return(t=fa(t))&&me.test(t)?t.replace(_e,qn):t},y.uniqueId=function(t){var e=++qa;return fa(t)+e},y.upperCase=Tl,y.upperFirst=kl,y.each=Mo,y.eachRight=xo,y.first=wo,Pa(y,function(){var t={};return Dn(y,function(e,n){Ha.call(y.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),y.VERSION="4.17.4",a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){y[t].placeholder=y}),a(["drop","take"],function(t,e){Z.prototype[t]=function(n){n=n===et?1:Au(sa(n),0);var r=this.__filtered__&&!e?new Z(this):this.clone();return r.__filtered__?r.__takeCount__=mu(n,r.__takeCount__):r.__views__.push({size:mu(n,Ot),type:t+(r.__dir__<0?"Right":"")}),r},Z.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Rt||3==n;Z.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Hi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),a(["head","last"],function(t,e){var n="take"+(e?"Right":"");Z.prototype[t]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Z.prototype[t]=function(){return this.__filtered__?new Z(this):this[n](1)}}),Z.prototype.compact=function(){return this.filter(ka)},Z.prototype.find=function(t){return this.filter(t).head()},Z.prototype.findLast=function(t){return this.reverse().find(t)},Z.prototype.invokeMap=Pr(function(t,e){return"function"==typeof t?new Z(this):this.map(function(n){return tr(n,t,e)})}),Z.prototype.reject=function(t){return this.filter(Go(Hi(t)))},Z.prototype.slice=function(t,e){t=sa(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Z(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==et&&(n=(e=sa(e))<0?n.dropRight(-e):n.take(e-t)),n)},Z.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Z.prototype.toArray=function(){return this.take(Ot)},Dn(Z.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=y[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(y.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Z,s=a[0],l=u||Hs(e),c=function(t){var e=i.apply(y,p([t],a));return r&&d?e[0]:e};l&&n&&"function"==typeof s&&1!=s.length&&(u=l=!1);var d=this.__chain__,f=!!this.__actions__.length,h=o&&!d,v=u&&!f;if(!o&&l){e=v?e:new Z(this);var g=t.apply(e,a);return g.__actions__.push({func:Uo,args:[c],thisArg:et}),new $(g,d)}return h&&v?t.apply(this,a):(g=this.thru(c),h?r?g.value()[0]:g.value():g)})}),a(["pop","push","shift","sort","splice","unshift"],function(t){var e=ja[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);y.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Hs(i)?i:[],t)}return this[n](function(n){return e.apply(Hs(n)?n:[],t)})}}),Dn(Z.prototype,function(t,e){var n=y[e];if(n){var r=n.name+"";(Lu[r]||(Lu[r]=[])).push({name:e,func:n})}}),Lu[Ei(et,ht).name]=[{name:"wrapper",func:et}],Z.prototype.clone=function(){var t=new Z(this.__wrapped__);return t.__actions__=ai(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ai(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ai(this.__views__),t},Z.prototype.reverse=function(){if(this.__filtered__){var t=new Z(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Z.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hs(t),r=e<0,i=n?t.length:0,o=Xi(0,i,this.__views__),a=o.start,u=o.end,s=u-a,l=r?u:a-1,c=this.__iteratees__,d=c.length,f=0,p=mu(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return zr(t,this.__actions__);var h=[];t:for(;s--&&f<p;){for(var v=-1,g=t[l+=e];++v<d;){var y=c[v],_=y.iteratee,A=y.type,m=_(g);if(A==Vt)g=m;else if(!m){if(A==Rt)continue t;break t}}h[f++]=g}return h},y.prototype.at=ks,y.prototype.chain=function(){return No(this)},y.prototype.commit=function(){return new $(this.value(),this.__chain__)},y.prototype.next=function(){this.__values__===et&&(this.__values__=aa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?et:this.__values__[this.__index__++]}},y.prototype.plant=function(t){for(var e,n=this;n instanceof I;){var r=Po(n);r.__index__=0,r.__values__=et,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},y.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Z){var e=t;return this.__actions__.length&&(e=new Z(this)),(e=e.reverse()).__actions__.push({func:Uo,args:[Lo],thisArg:et}),new $(e,this.__chain__)}return this.thru(Lo)},y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=function(){return zr(this.__wrapped__,this.__actions__)},y.prototype.first=y.prototype.head,au&&(y.prototype[au]=function(){return this}),y}();"function"==typeof et&&"object"==typeof et.amd&&et.amd?Sn._=Gn:Ln?((Ln.exports=Gn)._=Gn,Dn._=Gn):Sn._=Gn}).call(gn)}),kn=t.playerconfig.DEFAULT,bn=new An({WRAPPER_LIMIT:10}),Pn={INIT:"INIT",PENDING:"PENDING",WATING:"WATING",DISPOSE:"DISPOSE"},In=(He=Be=function(e){function n(t){ut(this,n);var e=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={adState:Pn.INIT,adIntegrator:null,paused:!1,restorePlayer:null},e.props.player.vastAd=e,e.firstAd=!1,e._initAd(),e}return ct(n,pt),st(n,[{key:"adPosition",value:function(){return this.props.type}},{key:"skipAd",value:function(){var t=this.state.adIntegrator;t&&t.skipAd()}},{key:"clickThrough",value:function(){var t=this.state.adIntegrator;t&&t.clickThrough()}},{key:"getAdVolume",value:function(){var t=this.state.adIntegrator;if(t)return t.getAdVolume()}},{key:"getAdExpanded",value:function(){var t=this.state.adIntegrator;if(t)return t.getAdExpanded()}},{key:"setAdVolume",value:function(t){var e=this.state.adIntegrator;e&&e.setAdVolume(t)}},{key:"adUnit",value:function(){var t=this.state.adIntegrator;if(t)return t}},{key:"paused",value:function(){return this.state.paused}},{key:"getPlayerAdUnit",value:function(){return this.state.adIntegrator.getPlayerAdUnit()}},{key:"isPaused",value:function(){return this.state.adIntegrator.isPaused()}},{key:"vastResponse",value:function(){var t=this.state.vastResponse;return t}},{key:"_initAd",value:function(){var e=this,n=this.props.player;n.on(kn.EVENT.USER_SKIP_AD,this.skipAd),Promise.resolve().then(function(){return e._setAdCancelTimeout()}).then(function(){return e._getVastResponse()}).then(function(t){return e.playAd(t)}).then(function(){var r=e.state,i=r.restorePlayer,o=r.adIntegrator;t.log.trace("VastPlugin > ad end"),i.snapshot().muted=o.getPlayerAdUnit().muted(),i.snapshot().volume=o.getPlayerAdUnit().volume(),n.trigger(kn.EVENT.AD_END)}).catch(function(e){t.log.trace("VastPlugin > end with error:",e),n.trigger(kn.EVENT.AD_END)})}},{key:"prepareForPlayAd",value:function(){this._prepareForAd(),this._setUpRestorePlayer()}},{key:"_prepareForAd",value:function(){var e=this,n=this.props,r=n.player,i=n.preLoaded,o=this.origPlay=r.play,a=this.origPlay=r.pause;r.play=function(t){var n=e.state.adIntegrator;t?o.apply(this,arguments):n&&(e.setState({paused:!1}),n.resumeAd())},r.pause=function(t){var n=e.state.adIntegrator;t?a.apply(this,arguments):n&&(e.setState({paused:!0}),n.pauseAd())};var u=this.oriCurrentTime=r.currentTime,s=this.oriDuration=r.duration,l=this.oriMuted=r.muted;!t.agent.isIOS&&i&&(r.currentTime=function(t){var n=e.state.adIntegrator;if(t)u.apply(this.arguments);else if(n)return n.getPlayerAdUnit().currentTime()},r.duration=function(t){var n=e.state.adIntegrator;if(t)s.apply(this,arguments);else if(n)return n.getPlayerAdUnit().duration()},r.muted=function(t){var n=e.state.adIntegrator;return"boolean"==typeof t?(n.getPlayerAdUnit().muted(t),t?e.setAdVolume(0):e.setAdVolume(.5)):n.getPlayerAdUnit().muted()}),r.one(kn.EVENT.AD_END,function(){r.off(kn.EVENT.USER_SKIP_AD,e.skipAd),r.play=o,r.pause=a,r.currentTime=u,r.duration=s,r.muted=l})}},{key:"playAd",value:function(){var t=at(regeneratorRuntime.mark(function t(e){var n,r,i,o,a,u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props.player,r=this.state.adState,i=n.options().params.adPod,r===Pn.INIT){t.next=5;break}return t.abrupt("return");case 5:if(!e||!e.length){t.next=33;break}o=void 0,a=void 0,u=0;case 9:if(!(u<e.length)){t.next=32;break}if(s=e[u],t.prev=11,!0!==i){t.next=19;break}return n.trigger(kn.EVENT.AD_VASTRESPONSE,s),t.next=16,this._playMutilAd(s);case 16:a=t.sent,t.next=24;break;case 19:return n.trigger(kn.EVENT.AD_VASTRESPONSE,s),t.next=22,this._playOneAd(s);case 22:return a=t.sent,t.abrupt("return",a);case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(11),o=t.t0;case 29:u++,t.next=9;break;case 32:return t.abrupt("return",o);case 33:return t.abrupt("return",this._playOneAd(e));case 34:case"end":return t.stop()}},t,this,[[11,26]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_playMutilAd",value:function(t){var e=this.props.player;this.setState({adIntegrator:null,vastResponse:t});var n=Tn.cloneDeep(t),r=void 0;r=hn&&this._isIMA(n)?new hn(this.props):this._isVPAID(n)?new Re(this.props):new me(this.props),this.setState({adIntegrator:r});var i=!1;return e.one(kn.EVENT.VPAID_AD_START,function(){i=!0}),r.playAd(n).catch(function(t){if(!i)throw t})}},{key:"_checkPrerollVpaid",value:function(){var t=this.props,e=t.player,n=t.preLoaded,r=t.type,i=t.adsITVC,o=this.state.adIntegrator;return new Promise(function(t){i?t():n&&"preroll"===r&&"VPAID"===o.type?e.one("timeupdate",function(){t()}):t()})}},{key:"_playOneAd",value:function(t){var e=this.props.player;this.setState({vastResponse:t});var n=void 0,r=Tn.cloneDeep(t);n=hn&&this._isIMA(r)?new hn(this.props):this._isVPAID(r)?new Re(this.props):new me(this.props),this.setState({adIntegrator:n}),e.trigger(kn.EVENT.AD_PLAY,r);var i=!1;return e.one(kn.EVENT.VPAID_AD_START,function(){i=!0}),this._checkPrerollVpaid(r).then(function(){return n.playAd(r).catch(function(t){if(!i)throw t})})}},{key:"snapshot",value:function(){return this.state.restorePlayer.snapshot()}},{key:"_setUpRestorePlayer",value:function(){var t=new En(this.props);this.setState({restorePlayer:t})}},{key:"_setAdCancelTimeout",value:function(){}},{key:"_getVastResponse",value:function(){var t=this.props,e=t.adTagUrl,r=t.adTagXML,i=t.vastResponse,o=t.ima;return o?Promise.resolve({ima:!0,adTagUrl:o}):i?Promise.resolve(i):n.getVASTResponse({adTagUrl:e,adTagXML:r})}},{key:"_isVPAID",value:function(t){var e,n,r=t.mediaFiles;for(e=0,n=r.length;e<n;e++)if(zt.isVPAID(r[e])&&r[e].isSupported())return!0;return!1}},{key:"_isIMA",value:function(t){return!!t.ima}}],[{key:"getVASTResponse",value:function(t){var e=t.adTagUrl,n=t.adTagXML,r=t.isPackageAds;return bn.getVASTResponse({adTagUrl:e,adTagXML:n,isPackageAds:r})}}]),n}(),Be.propTypes={player:t.PropTypes.object.isRequired,type:t.PropTypes.string.isRequired,adTagUrl:t.PropTypes.string,adTagXML:t.PropTypes.object,adsITVC:t.PropTypes.bool,ima:t.PropTypes.string,preLoaded:t.PropTypes.bool,skipoffset:t.PropTypes.number,vastResponse:t.PropTypes.array},Be.defaultProps={timeout:500,autostart:!0},We=He,Q(We.prototype,"skipAd",[t.autobind],Object.getOwnPropertyDescriptor(We.prototype,"skipAd"),We.prototype),Q(We.prototype,"clickThrough",[t.autobind],Object.getOwnPropertyDescriptor(We.prototype,"clickThrough"),We.prototype),We),Rn=(Ge=qe=function(t){function e(t){return ut(this,e),dt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return ct(e,t),st(e,[{key:"getDefaultProps",value:function(){var t=this.constructor.defaultProps;return lt({},t,{})}}]),st(e,[{key:"initAd",value:function(t){var e=t.adTagUrl,n=t.adTagXML,r=t.vastResponse,i=t.ima,o=t.type,a=t.skipoffset,u=t.preLoaded,s=t.adsITVC,l=this,c=this.props.player,d=c.play,f=!1;c.play=function(){f||(f=!0,c.play=d,l._initAd({adTagUrl:e,adTagXML:n,vastResponse:r,ima:i,type:o,skipoffset:a,preLoaded:u,adsITVC:s}))},c.play()}},{key:"_initAd",value:function(t){var e=t.adTagUrl,n=t.adTagXML,r=t.vastResponse,i=t.ima,o=t.type,a=t.preLoaded,u=t.skipoffset,s=t.adsITVC,l=this.props.player;l.vastAd||new In({player:l,adTagUrl:e,adTagXML:n,vastResponse:r,ima:i,type:o,skipoffset:u,preLoaded:a,adsITVC:s})}},{key:"getVastRespone",value:function(t){var e=t.adTagUrl,n=t.adTagXML;return In.getVASTResponse({adTagUrl:e,adTagXML:n})}}]),e}(t.Plugin),qe.defaultProps={adsCancelTimeout:5e3},Ge),Vn={PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll"},wn=rt.getComponent("Player"),Sn=t.playerconfig.DEFAULT,Dn=(Xe=$e=function(e){function n(e){ut(this,n);var r=dt(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),i=r,o=r.props,a=o.player,u=o.enableAd,s=a.options().params;return u?(s.noAdsLoad||a.one("updateMediaInfo",function(){if(s.midroll){var e=i._getVastInAdmicro({type:Vn.MIDROLL});i.getVastRespone({adTagUrl:e}).then(function(t){"object"===(void 0===t?"undefined":ot(t))&&i.setState({midroll:t})}).catch(function(t){})}if(s.postroll){var n=i._getVastInAdmicro({type:Vn.POSTROLL});i.getVastRespone({adTagUrl:n}).then(function(t){"object"===(void 0===t?"undefined":ot(t))&&i.setState({postroll:t})}).catch(function(t){})}if(!s.nopre&&t.agent.isIOS){var r=i._getVastInAdmicro({type:Vn.PREROLL});i.getVastRespone({adTagUrl:r}).then(function(t){"object"===(void 0===t?"undefined":ot(t))&&i.setState({preroll:t})}).catch(function(t){})}}),a.on("prepareMidrollVast",r.handlePrepareMidroll),s.noAdsLoad||t.agent.isIOS?(a.on(Sn.EVENT.AD_ORDER_START_POSTROLL,r.startPostroll),a.one("play",r.preparePreroll)):(a.on("preparePostrollVast",r.preparePostroll),s.vid?a.one("updateMediaInfo",r.handleLoadAdPreroll):a.one(Sn.EVENT.PLAYER_READY,r.handleLoadAdPreroll)),r):dt(r)}return ct(n,Rn),st(n,[{key:"getDefaultProps",value:function(t){var e=t.player.options(),n=e.params,r=e.plugins,i=n.ads,o=n.vast,a=n.ima,u=this.constructor.defaultProps,s={};return!r.kinghubAdmicroADSPlugin&&wn.prototype.kinghubAdmicroADSPlugin&&(s.enableAd=!1),(o||a)&&(s.enableAd=!0),wn.prototype.adsVastPlugin&&(s.enableAd=!1),!1===i&&(s.enableAd=!1),lt({},u,s)}}]),st(n,[{key:"preparePreroll",value:function(){var t=this,e=this.props.player,n=this.state.preroll,r=e.options().params;if(!r.nopre){var i=r.ima;if(n)e.one("timeupdate",function(){t.initAd({adTagUrl:o,vastResponse:n,ima:i,type:Vn.PREROLL})});else{var o=t._getVastInAdmicro({type:Vn.PREROLL,position:0});o&&e.one("timeupdate",function(){t.initAd({adTagUrl:o,vastResponse:void 0,ima:i,type:Vn.PREROLL})})}}}},{key:"preparePostroll",value:function(){var t=this,e=this.state.postroll,n=t._getVastInAdmicro({type:Vn.POSTROLL,position:0});if(n)return e?(this.initAd({adTagUrl:n,vastResponse:e,type:Vn.POSTROLL,preLoaded:!0}),void this.setState({postroll:!1})):void this.getVastRespone({adTagUrl:n}).then(function(e){var n=void 0,r=void 0;if("string"==typeof e)n=e;else{if("object"!==(void 0===e?"undefined":ot(e)))return;r=e}t.initAd({adTagUrl:n,vastResponse:r,type:Vn.POSTROLL,preLoaded:!0})}).catch(function(t){})}},{key:"handleLoadAdPreroll",value:function(){var t=this,e=this.props.player,n=this.state.preroll,r=e.options().params;if(!r.nopre){var i=r.ima;if(n)e.one("timeupdate",function(){t.initAd({adTagUrl:o,vastResponse:n,ima:i,type:Vn.PREROLL})});else{var o=t._getVastInAdmicro({type:Vn.PREROLL,position:0});o&&this.getVastRespone({adTagUrl:o}).then(function(e){var n=void 0,r=void 0;if("string"==typeof e)n=e;else{if("object"!==(void 0===e?"undefined":ot(e)))return;r=e}t.initAd({adTagUrl:n,vastResponse:r,ima:i,type:Vn.PREROLL,preLoaded:!0})}).catch(function(t){})}}}},{key:"startMidroll",value:function(t,e){var n=void 0,r=void 0;if("string"==typeof e)n=e;else{if("object"!==(void 0===e?"undefined":ot(e)))return;r=e}this.initAd({adTagUrl:n,vastResponse:r,type:Vn.MIDROLL})}},{key:"handlePrepareMidroll",value:function(e,n){var r=this.props.player,i=this,o=this.state.midroll,a=r.options().params,u=this._getVastInAdmicro({type:Vn.MIDROLL,position:n});if(u)return o?(r.trigger(Sn.EVENT.AD_MIDROLL_VASTRESPONSE,o),a.noAdsLoad||t.agent.isIOS?void r.one(Sn.EVENT.AD_ORDER_START_MIDROLL,i.startMidroll):(this.initAd({adTagUrl:u,vastResponse:o,type:Vn.MIDROLL,preLoaded:!0}),void this.setState({midroll:!1}))):void this.getVastRespone({adTagUrl:u}).then(function(e){r.trigger(Sn.EVENT.AD_MIDROLL_VASTRESPONSE,e);var n=void 0,o=void 0;if("string"==typeof e)n=e;else{if("object"!==(void 0===e?"undefined":ot(e)))return;o=e}a.noAdsLoad||t.agent.isIOS?r.one(Sn.EVENT.AD_ORDER_START_MIDROLL,i.startMidroll):i.initAd({adTagUrl:n,vastResponse:o,type:Vn.MIDROLL,preLoaded:!0})}).catch(function(){r.trigger(Sn.EVENT.AD_MIDROLL_VASTRESPONSE)});r.trigger(Sn.EVENT.AD_MIDROLL_VASTRESPONSE)}},{key:"startPostroll",value:function(){var t=this._getVastInAdmicro({type:Vn.POSTROLL,position:10});t&&this._initAd({adTagUrl:t,type:"postroll"})}},{key:"_getVastInAdmicro",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props.player,n=e.options().params;return wn.prototype.kinghubAdmicroADSPlugin?wn.prototype.kinghubAdmicroADSPlugin.call(e,t):n.vast?n.vast:void 0}}]),n}(),$e.defaultProps={adsCancelTimeout:5e3,enableAd:!0},Ke=Xe,Y(Ke.prototype,"preparePreroll",[t.autobind],Object.getOwnPropertyDescriptor(Ke.prototype,"preparePreroll"),Ke.prototype),Y(Ke.prototype,"preparePostroll",[t.autobind],Object.getOwnPropertyDescriptor(Ke.prototype,"preparePostroll"),Ke.prototype),Y(Ke.prototype,"handleLoadAdPreroll",[t.autobind],Object.getOwnPropertyDescriptor(Ke.prototype,"handleLoadAdPreroll"),Ke.prototype),Y(Ke.prototype,"startMidroll",[t.autobind],Object.getOwnPropertyDescriptor(Ke.prototype,"startMidroll"),Ke.prototype),Y(Ke.prototype,"handlePrepareMidroll",[t.autobind],Object.getOwnPropertyDescriptor(Ke.prototype,"handlePrepareMidroll"),Ke.prototype),Y(Ke.prototype,"startPostroll",[t.autobind],Object.getOwnPropertyDescriptor(Ke.prototype,"startPostroll"),Ke.prototype),Ke),Ln=t.playerconfig.DEFAULT,On=(Ze=Ye=function(e){function n(){var t,e,r,i;ut(this,n);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return e=r=dt(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))),r.state={timeLeft:6,started:!1,skipped:!1},i=e,dt(r,i)}return ct(n,e),st(n,[{key:"componentDidMount",value:function(){this.intervalRemainingTime_=setInterval(this.update,200)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalRemainingTime_)}},{key:"_getAdDuration",value:function(){var t=this.props.player,e=this;t.vastAd.adUnit().getAdDuration().then(function(t){e.adDuration=t}),543706===t.vastAd.vastResponse().ads[0].id&&(this.skipOffset=8)}},{key:"update",value:function(){var t=this.props,e=t.player,n=t.skipOffset;if(e.vastAd){var r=e.vastAd.adUnit(),i=this;this.adDuration&&-1!==this.adDuration?(this.skipOffset=r.getSkipOffSet(),n=this.skipOffset||n,r.getAdRemainingTime().then(function(t){var e=Math.ceil(n+t-i.adDuration);i.setState({timeLeft:e,started:!0})})):this._getAdDuration()}}},{key:"_skipAd",value:function(e){e.preventDefault();var n=this.state,r=n.timeLeft,i=n.skipped;r>0||i||(this.setState({skipped:!0}),t.log.trace("<SkipToggle._skipAd>"),this.props.player.trigger(Ln.EVENT.USER_SKIP_AD))}},{key:"render",value:function(){var t=void 0,e=this.props.player,n=this.state,r=n.timeLeft,i=n.skipped,o=n.started,a=r>0?r+" giây":"Bỏ Qua";return"Bỏ Qua"===a&&(t="ad-canskip"),e.options().params.noAdSkip?null:i||!o?null:it.createElement("button",{className:"ad-skip "+t+" Kenh14Player-button",onClick:this._skipAd},a)}}]),n}(e.Component),Ye.propTypes={player:t.PropTypes.object.isRequired,skipOffset:t.PropTypes.number},Ye.defaultProps={skipOffset:6},Qe=Ze,Z(Qe.prototype,"update",[t.autobind],Object.getOwnPropertyDescriptor(Qe.prototype,"update"),Qe.prototype),Z(Qe.prototype,"_skipAd",[t.autobind],Object.getOwnPropertyDescriptor(Qe.prototype,"_skipAd"),Qe.prototype),Qe),Cn=t.playerconfig.DEFAULT,Nn=(en=tn=function(t){function e(){var t,n,r,i;ut(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=dt(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.state={url:null},i=n,dt(r,i)}return ct(e,t),st(e,[{key:"componentDidMount",value:function(){var t=this.props.player;"VPAID"!==t.vastAd.adUnit().type&&t.trigger(Cn.EVENT.VAST_AD_VIDEO_SHOW)}},{key:"updateBlocker",value:function(t){this.setState({url:t})}},{key:"_clickthrough",value:function(t){var e=this.props.player,n=e.vastAd.adUnit();if(n.isPaused())return e.play(),t.stopPropagation(),!1;n.clickThrough()}},{key:"render",value:function(){var t=this.state.url;return t?it.createElement("a",{className:"ad-clickthrough-blocker",onClick:this._clickthrough,href:t,target:"_blank",rel:"noopener noreferrer"}):null}}]),e}(e.Component),tn.propTypes={player:t.PropTypes.object.isRequired},Je=en,J(Je.prototype,"updateBlocker",[t.autobind],Object.getOwnPropertyDescriptor(Je.prototype,"updateBlocker"),Je.prototype),J(Je.prototype,"_clickthrough",[t.autobind],Object.getOwnPropertyDescriptor(Je.prototype,"_clickthrough"),Je.prototype),Je),Un=t.playerconfig.DEFAULT,Mn=(on=rn=function(t){function e(){var t,n,r,i;ut(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=dt(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.state={muted:!0},i=n,dt(r,i)}return ct(e,t),st(e,[{key:"componentDidMount",value:function(){var t=this.props.player,e=this;this.type=t.vastAd.adUnit().type,this.update=this.update.bind(this),this._handleAdEnd=this._handleAdEnd.bind(this);var n=t.vastAd.getPlayerAdUnit();t.on(Un.EVENT.AD_END,this._handleAdEnd);var r=t.vastAd,i=r.snapshot(),o=i.muted?0:i.volume;try{r.setAdVolume(o).then(function(){r.getAdVolume().then(function(t){e.setState({firstVolume:t})})})}catch(t){}var a=i.muted;this.setState({muted:a}),t.setTimeout(function(){e.setState({firstVolume:o})},1e3),n.on("volumechange",this.update),this.update()}},{key:"_handleAdEnd",value:function(){}},{key:"update",value:function(){var t=this,e=this.props.player.vastAd,n=e.getPlayerAdUnit();e.getAdVolume().then(function(e){var r=n.muted();0===e||r?t.setState({muted:!0}):t.setState({muted:!1})})}},{key:"handleClick",value:function(t){t.preventDefault();var e=this.props.player,n=this.state,r=n.firstVolume,i=n.muted,o=e.vastAd,a=o.getPlayerAdUnit();o.getAdVolume().then(function(t){var e=0===r?.5:r;a.muted(!i),0===t||i?o.setAdVolume(e):o.setAdVolume(0)})}},{key:"render",value:function(){var t=this,e=this.props.player,n=this.state.muted,r=e.el_.clientWidth;return e.options().params.noAdMute?null:e.options().params.adMuteToggle||"VPAID"!==e.vastAd.adUnit().type?r<=170?null:it.createElement("div",{className:"Kenh14Player-ad-btn-mute",onClick:function(e){return t.handleClick(e)}},it.createElement("button",null,it.createElement("span",{className:"Kenh14Player-ad-qmtwbs-base"}),it.createElement("span",{className:"Kenh14Player-ad-qmtwbs-level"})),n?it.createElement("span",{className:"Kenh14Player-ad-line-mute"}):null):null}}]),e}(e.Component),rn.propTypes={player:t.PropTypes.object.isRequired},nn=on,function(t,e,n,r,i){var o={};Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null)}(nn.prototype,"handleClick",[t.autobind],Object.getOwnPropertyDescriptor(nn.prototype,"handleClick"),nn.prototype),nn),xn=t.playerconfig.DEFAULT,jn=(un=an=function(t){function e(){var t,n,r,i;ut(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=dt(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.state={url:null},i=n,dt(r,i)}return ct(e,t),st(e,[{key:"componentDidMount",value:function(){var t=this.props.player;"VPAID"!==t.vastAd.adUnit().type&&t.trigger(xn.EVENT.VAST_AD_VIDEO_SHOW)}},{key:"render",value:function(){var t=this.props.player;return it.createElement("div",{className:"Ad-controlBar"},it.createElement(Mn,{player:t}))}}]),e}(e.Component),an.propTypes={player:t.PropTypes.object.isRequired},un),Fn=t.playerconfig.DEFAULT,zn=(cn=ln=function(t){function e(){var t,n,r,i;ut(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=dt(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.state={is_show:!1,thumb_query:r.props.player.options().params.poster},i=n,dt(r,i)}return ct(e,t),st(e,[{key:"componentDidMount",value:function(){this.props.player.on(Fn.EVENT.AD_END,this.handleOnAdEnd)}},{key:"handleOnAdEnd",value:function(){this.setState({is_show:!0})}},{key:"render",value:function(){var t=this.state,e=t.is_show,n=t.thumb_query;if(!e)return null;var r=n,i={backgroundImage:"url('"+(r=(r=decodeURIComponent(r)).replace(/([^:])(\/\/)/g,"$1/"))+"')"};return it.createElement("div",{style:i,className:"ad-thumbnail"})}}]),e}(e.Component),ln.propTypes={player:t.PropTypes.object.isRequired},sn=cn,function(t,e,n,r,i){var o={};Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null)}(sn.prototype,"handleOnAdEnd",[t.autobind],Object.getOwnPropertyDescriptor(sn.prototype,"handleOnAdEnd"),sn.prototype),sn),Wn=t.playerconfig.DEFAULT,Bn=(pn=fn=function(t){function e(){var t,n,r,i;ut(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=dt(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.state={isShow:!1,is_Loop:!1},i=n,dt(r,i)}return ct(e,t),st(e,[{key:"componentDidMount",value:function(){var t=this.props.player;t.on(Wn.EVENT.AD_START,this._handleAdStart),t.on(Wn.EVENT.AD_END,this._handleAdEnd),t.on(Wn.EVENT.USER_SKIP_AD,this._handleAdSkip),t.on(Wn.EVENT.VAST_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.on(Wn.EVENT.VPAID_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.on(Wn.EVENT.VAST_AD_VIDEO_START,this._handleVastStart),t.on(Wn.EVENT.VPAID_AD_START,this._handleVpaidStart),this.hasAttributeLoop()}},{key:"hasAttributeLoop",value:function(){var t=this.props.player;document.getElementById(""+t.id_).hasAttribute("loop")&&this.setState({is_Loop:!0})}},{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off(Wn.EVENT.AD_START,this._handleAdStart),t.off(Wn.EVENT.AD_END,this._handleAdEnd),t.off(Wn.EVENT.USER_SKIP_AD,this._handleAdSkip),t.off(Wn.EVENT.VAST_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.off(Wn.EVENT.VPAID_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.off(Wn.EVENT.VAST_AD_VIDEO_START,this._handleVastStart),t.off(Wn.EVENT.VPAID_AD_START,this._handleVpaidStart)}},{key:"_handleAdStart",value:function(){}},{key:"_handleAdMediaEnd",value:function(){this.setState({isShow:!1})}},{key:"_handleAdSkip",value:function(){this.setState({isShow:!1})}},{key:"_handleAdEnd",value:function(){this.setState({isShow:!1})}},{key:"_handleVastStart",value:function(){this.setState({isShow:!0})}},{key:"_handleVpaidStart",value:function(){this.setState({isShow:!0})}},{key:"render",value:function(){var t=this,e=this.state,n=e.isShow,r=e.is_Loop,i=this.props.player.options().params.adThumbnail;return n?it.createElement("div",{className:"ad-container",style:{width:"100%",height:"100%"}},it.createElement(Nn,{key:"clickThrough",player:this.props.player,ref:function(e){t.clickThrough=e}}),it.createElement(On,{key:"skipToggle",player:this.props.player,ref:function(e){t.skipToggle=e}}),it.createElement(jn,{key:"adControlBar",player:this.props.player,ref:function(e){t.adControlBar=e}}),it.createElement(zn,{key:"adThumbail",player:this.props.player,ref:function(e){t.adThumbnail=e}})):i&&!r?it.createElement("div",{className:"ad-container",style:{width:"100%",height:"100%"}},it.createElement(zn,{key:"adThumbail",player:this.props.player,ref:function(e){t.adThumbnail=e}})):null}}]),e}(e.Component),fn.propTypes={player:t.PropTypes.object.isRequired},dn=pn,tt(dn.prototype,"_handleAdStart",[t.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"_handleAdStart"),dn.prototype),tt(dn.prototype,"_handleAdMediaEnd",[t.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"_handleAdMediaEnd"),dn.prototype),tt(dn.prototype,"_handleAdSkip",[t.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"_handleAdSkip"),dn.prototype),tt(dn.prototype,"_handleAdEnd",[t.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"_handleAdEnd"),dn.prototype),tt(dn.prototype,"_handleVastStart",[t.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"_handleVastStart"),dn.prototype),tt(dn.prototype,"_handleVpaidStart",[t.autobind],Object.getOwnPropertyDescriptor(dn.prototype,"_handleVpaidStart"),dn.prototype),dn);rt.Vast=In;rt.registerPlugin("AdsPlayerPlugin",function(){var t=this;t.AdsPlugin=new Dn({player:t}),t.one("ready",function(){var e=this,n=it.createElement(Bn,{key:"ad",player:t,ref:function(t){e.container.ad=t}});t.container.addChild(n);var r=document.createElement("div");r.style.background="rgba(0,0,0,0.7)",r.style.transition="all 2s ease 0s",r.style.opacity=0,vt.addClass(r,"overlay-ad"),t.overlay.append(r)})})})}();